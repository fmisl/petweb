diff --git a/node_modules/cornerstone-core/dist/cornerstone.js b/node_modules/cornerstone-core/dist/cornerstone.js
index 9212dd6..1769f4d 100644
--- a/node_modules/cornerstone-core/dist/cornerstone.js
+++ b/node_modules/cornerstone-core/dist/cornerstone.js
@@ -2474,6 +2474,16 @@ var colormapsData = {
     numColors: 256,
     colors: [[0, 0, 0, 255], [0, 0, 0, 255], [0, 0, 0, 255], [0, 0, 0, 255], [0, 0, 0, 255], [0, 0, 0, 255], [0, 0, 0, 255], [0, 0, 0, 255], [0, 0, 0, 255], [0, 0, 0, 255], [0, 0, 0, 255], [0, 0, 0, 255], [0, 0, 0, 255], [96, 0, 80, 255], [96, 0, 80, 255], [96, 0, 80, 255], [96, 0, 80, 255], [96, 0, 80, 255], [96, 0, 80, 255], [96, 0, 80, 255], [96, 0, 80, 255], [96, 0, 80, 255], [96, 0, 80, 255], [96, 0, 80, 255], [96, 0, 80, 255], [96, 0, 80, 255], [48, 48, 80, 255], [48, 48, 80, 255], [48, 48, 80, 255], [48, 48, 80, 255], [48, 48, 80, 255], [48, 48, 80, 255], [48, 48, 80, 255], [48, 48, 80, 255], [48, 48, 80, 255], [48, 48, 80, 255], [48, 48, 80, 255], [48, 48, 80, 255], [48, 48, 80, 255], [48, 48, 112, 255], [48, 48, 112, 255], [48, 48, 112, 255], [48, 48, 112, 255], [48, 48, 112, 255], [48, 48, 112, 255], [48, 48, 112, 255], [48, 48, 112, 255], [48, 48, 112, 255], [48, 48, 112, 255], [48, 48, 112, 255], [48, 48, 112, 255], [80, 80, 128, 255], [80, 80, 128, 255], [80, 80, 128, 255], [80, 80, 128, 255], [80, 80, 128, 255], [80, 80, 128, 255], [80, 80, 128, 255], [80, 80, 128, 255], [80, 80, 128, 255], [80, 80, 128, 255], [80, 80, 128, 255], [80, 80, 128, 255], [80, 80, 128, 255], [96, 96, 176, 255], [96, 96, 176, 255], [96, 96, 176, 255], [96, 96, 176, 255], [96, 96, 176, 255], [96, 96, 176, 255], [96, 96, 176, 255], [96, 96, 176, 255], [96, 96, 176, 255], [96, 96, 176, 255], [96, 96, 176, 255], [96, 96, 176, 255], [96, 96, 176, 255], [112, 112, 192, 255], [112, 112, 192, 255], [112, 112, 192, 255], [112, 112, 192, 255], [112, 112, 192, 255], [112, 112, 192, 255], [112, 112, 192, 255], [112, 112, 192, 255], [112, 112, 192, 255], [112, 112, 192, 255], [112, 112, 192, 255], [112, 112, 192, 255], [112, 112, 192, 255], [128, 128, 224, 255], [128, 128, 224, 255], [128, 128, 224, 255], [128, 128, 224, 255], [128, 128, 224, 255], [128, 128, 224, 255], [128, 128, 224, 255], [128, 128, 224, 255], [128, 128, 224, 255], [128, 128, 224, 255], [128, 128, 224, 255], [128, 128, 224, 255], [48, 96, 48, 255], [48, 96, 48, 255], [48, 96, 48, 255], [48, 96, 48, 255], [48, 96, 48, 255], [48, 96, 48, 255], [48, 96, 48, 255], [48, 96, 48, 255], [48, 96, 48, 255], [48, 96, 48, 255], [48, 96, 48, 255], [48, 96, 48, 255], [48, 96, 48, 255], [48, 144, 48, 255], [48, 144, 48, 255], [48, 144, 48, 255], [48, 144, 48, 255], [48, 144, 48, 255], [48, 144, 48, 255], [48, 144, 48, 255], [48, 144, 48, 255], [48, 144, 48, 255], [48, 144, 48, 255], [48, 144, 48, 255], [48, 144, 48, 255], [48, 144, 48, 255], [80, 192, 80, 255], [80, 192, 80, 255], [80, 192, 80, 255], [80, 192, 80, 255], [80, 192, 80, 255], [80, 192, 80, 255], [80, 192, 80, 255], [80, 192, 80, 255], [80, 192, 80, 255], [80, 192, 80, 255], [80, 192, 80, 255], [80, 192, 80, 255], [80, 192, 80, 255], [64, 224, 64, 255], [64, 224, 64, 255], [64, 224, 64, 255], [64, 224, 64, 255], [64, 224, 64, 255], [64, 224, 64, 255], [64, 224, 64, 255], [64, 224, 64, 255], [64, 224, 64, 255], [64, 224, 64, 255], [64, 224, 64, 255], [64, 224, 64, 255], [224, 224, 80, 255], [224, 224, 80, 255], [224, 224, 80, 255], [224, 224, 80, 255], [224, 224, 80, 255], [224, 224, 80, 255], [224, 224, 80, 255], [224, 224, 80, 255], [224, 224, 80, 255], [224, 224, 80, 255], [224, 224, 80, 255], [224, 224, 80, 255], [224, 224, 80, 255], [208, 208, 96, 255], [208, 208, 96, 255], [208, 208, 96, 255], [208, 208, 96, 255], [208, 208, 96, 255], [208, 208, 96, 255], [208, 208, 96, 255], [208, 208, 96, 255], [208, 208, 96, 255], [208, 208, 96, 255], [208, 208, 96, 255], [208, 208, 96, 255], [208, 208, 96, 255], [208, 176, 64, 255], [208, 176, 64, 255], [208, 176, 64, 255], [208, 176, 64, 255], [208, 176, 64, 255], [208, 176, 64, 255], [208, 176, 64, 255], [208, 176, 64, 255], [208, 176, 64, 255], [208, 176, 64, 255], [208, 176, 64, 255], [208, 176, 64, 255], [208, 176, 64, 255], [208, 144, 0, 255], [208, 144, 0, 255], [208, 144, 0, 255], [208, 144, 0, 255], [208, 144, 0, 255], [208, 144, 0, 255], [208, 144, 0, 255], [208, 144, 0, 255], [208, 144, 0, 255], [208, 144, 0, 255], [208, 144, 0, 255], [208, 144, 0, 255], [192, 96, 0, 255], [192, 96, 0, 255], [192, 96, 0, 255], [192, 96, 0, 255], [192, 96, 0, 255], [192, 96, 0, 255], [192, 96, 0, 255], [192, 96, 0, 255], [192, 96, 0, 255], [192, 96, 0, 255], [192, 96, 0, 255], [192, 96, 0, 255], [192, 96, 0, 255], [176, 48, 0, 255], [176, 48, 0, 255], [176, 48, 0, 255], [176, 48, 0, 255], [176, 48, 0, 255], [176, 48, 0, 255], [176, 48, 0, 255], [176, 48, 0, 255], [176, 48, 0, 255], [176, 48, 0, 255], [176, 48, 0, 255], [176, 48, 0, 255], [176, 48, 0, 255], [255, 0, 0, 255], [255, 0, 0, 255], [255, 0, 0, 255], [255, 0, 0, 255], [255, 0, 0, 255], [255, 0, 0, 255], [255, 0, 0, 255], [255, 0, 0, 255], [255, 0, 0, 255], [255, 0, 0, 255], [255, 0, 0, 255], [255, 0, 0, 255], [255, 0, 0, 255], [255, 255, 255, 255], [255, 255, 255, 255], [255, 255, 255, 255], [255, 255, 255, 255], [255, 255, 255, 255], [255, 255, 255, 255], [255, 255, 255, 255], [255, 255, 255, 255], [255, 255, 255, 255], [255, 255, 255, 255], [255, 255, 255, 255], [255, 255, 255, 255], [255, 255, 255, 255]]
   },
+  invertedGray: {
+    name: 'Inverted Gray',
+    numColors: 256,
+    gamma: 1,
+    segmentedData: {
+      red: [[1, 1, 1], [0, 0, 0]],
+      green: [[1, 1, 1], [0, 0, 0]],
+      blue: [[1, 1, 1], [0, 0, 0]]
+    }
+  },
   gray: {
     name: 'Gray',
     numColors: 256,
diff --git a/node_modules/cornerstone-core/dist/cornerstone.min.js b/node_modules/cornerstone-core/dist/cornerstone.min.js
index fffac11..17a123b 100644
--- a/node_modules/cornerstone-core/dist/cornerstone.min.js
+++ b/node_modules/cornerstone-core/dist/cornerstone.min.js
@@ -1,3 +1 @@
-/*! cornerstone-core - 2.1.0 - 2018-03-02 | (c) 2016 Chris Hafey | https://github.com/cornerstonejs/cornerstone */
-!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define("cornerstone-core",[],t):"object"==typeof exports?exports["cornerstone-core"]=t():e.cornerstone=t()}("undefined"!=typeof self?self:this,function(){return function(e){function t(n){if(r[n])return r[n].exports;var a=r[n]={i:n,l:!1,exports:{}};return e[n].call(a.exports,a,a.exports,t),a.l=!0,a.exports}var r={};return t.m=e,t.c=r,t.d=function(e,r,n){t.o(e,r)||Object.defineProperty(e,r,{configurable:!1,enumerable:!0,get:n})},t.n=function(e){var r=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(r,"a",r),r},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="",t(t.s=42)}([function(e,t,r){"use strict";function n(e){if(void 0===e)throw new Error("getEnabledElement: parameter element must not be undefined");for(var t=0;t<l.length;t++)if(l[t].element===e)return l[t];throw new Error("element not enabled")}function a(e){if(void 0===e)throw new Error("getEnabledElement: enabledElement element must not be undefined");l.push(e)}function i(e){var t=[];return l.forEach(function(r){r.image&&r.image.imageId===e&&t.push(r)}),t}function o(){return l}Object.defineProperty(t,"__esModule",{value:!0}),t.getEnabledElement=n,t.addEnabledElement=a,t.getEnabledElementsByImageId=i,t.getEnabledElements=o;var l=[]},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){return window.performance?performance.now():Date.now()}},function(e,t,r){"use strict";function n(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,n=void 0;return"function"==typeof window.CustomEvent?n=new CustomEvent(t,{detail:r,cancelable:!0}):(n=document.createEvent("CustomEvent"),n.initCustomEvent(t,!0,!0,r)),e.dispatchEvent(n)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=n},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){if(void 0===e)throw new Error("getDefaultViewport: parameter canvas must not be undefined");if(void 0===t)return{scale:1,translation:{x:0,y:0},voi:{windowWidth:void 0,windowCenter:void 0},invert:!1,pixelReplication:!1,rotation:0,hflip:!1,vflip:!1,modalityLUT:void 0,voiLUT:void 0,colormap:void 0,labelmap:!1};var r=e.height/t.rows,n=e.width/t.columns;return{scale:Math.min(n,r),translation:{x:0,y:0},voi:{windowWidth:t.windowWidth,windowCenter:t.windowCenter},invert:t.invert,pixelReplication:!1,rotation:0,hflip:!1,vflip:!1,modalityLUT:t.modalityLUT,voiLUT:t.voiLUT,colormap:t.colormap,labelmap:Boolean(t.labelmap)}}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t,r){if(void 0===e)throw new Error("setToPixelCoordinateSystem: parameter enabledElement must not be undefined");if(void 0===t)throw new Error("setToPixelCoordinateSystem: parameter context must not be undefined");var n=(0,a.default)(e,r);t.setTransform(n.m[0],n.m[1],n.m[2],n.m[3],n.m[4],n.m[5])};var n=r(24),a=function(e){return e&&e.__esModule?e:{default:e}}(n)},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=(0,n.getEnabledElement)(e);if(void 0===r.image&&!r.layers.length)throw new Error("updateImage: image has not been loaded yet");(0,i.default)(r,t)};var n=r(0),a=r(6),i=function(e){return e&&e.__esModule?e:{default:e}}(a)},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];e.needsRedraw=!0,t&&(e.invalid=!0)}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(28),a=r(29),i=function(e){return e&&e.__esModule?e:{default:e}}(a);t.default={getColormap:n.getColormap,getColormapsList:n.getColormapsList,LookupTable:i.default}},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function a(e,t){return void 0!==e.cachedLut&&e.cachedLut.windowCenter===t.voi.windowCenter&&e.cachedLut.windowWidth===t.voi.windowWidth&&e.cachedLut.invert===t.invert?e.cachedLut.lutArray:((0,f.default)(e,t.voi.windowWidth,t.voi.windowCenter,t.invert),e.cachedLut.windowWidth=t.voi.windowWidth,e.cachedLut.windowCenter=t.voi.windowCenter,e.cachedLut.invert=t.invert,e.cachedLut.lutArray)}function i(e,t,r){e.renderingTools.renderCanvas||(e.renderingTools.renderCanvas=document.createElement("canvas"));var n=e.renderingTools.renderCanvas;if(255===e.viewport.voi.windowWidth&&128===e.viewport.voi.windowCenter&&!1===e.viewport.invert&&t.getCanvas&&t.getCanvas())return t.getCanvas();if(!1===(0,I.default)(e,t)&&!0!==r)return n;n.width===t.width&&n.height===t.height||(0,P.default)(e,t);var i=(0,d.default)(),o=a(t,e.viewport);t.stats=t.stats||{},t.stats.lastLutGenerateTime=(0,d.default)()-i;var l=e.renderingTools.renderCanvasData,u=e.renderingTools.renderCanvasContext;return t.rgba?(0,g.default)(t,o,l.data):(0,m.default)(t,o,l.data),i=(0,d.default)(),u.putImageData(l,0,0),t.stats.lastPutImageDataTime=(0,d.default)()-i,n}function o(e,t){if(void 0===e)throw new Error("renderColorImage: enabledElement parameter must not be undefined");var r=e.image;if(void 0===r)throw new Error("renderColorImage: image must be loaded before it can be drawn");var n=e.canvas.getContext("2d");n.setTransform(1,0,0,1,0,0),n.fillStyle="black",n.fillRect(0,0,e.canvas.width,e.canvas.height),n.imageSmoothingEnabled=!e.viewport.pixelReplication,n.mozImageSmoothingEnabled=n.imageSmoothingEnabled,(0,p.default)(e,n);var a=void 0;a=e.options&&e.options.renderer&&"webgl"===e.options.renderer.toLowerCase()?w.default.renderer.render(e):i(e,r,t),n.drawImage(a,0,0,r.width,r.height,0,0,r.width,r.height),e.renderingTools=(0,C.default)(e)}function l(e,t){if(void 0===e)throw new Error("addColorLayer: layer parameter must not be undefined");var r=e.image;if(void 0===r)throw new Error("addColorLayer: image must be loaded before it can be drawn");r.rgba=!0,e.canvas=i(e,r,t);var n=e.canvas.getContext("2d");n.imageSmoothingEnabled=!e.viewport.pixelReplication,n.mozImageSmoothingEnabled=n.imageSmoothingEnabled,e.renderingTools=(0,C.default)(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.renderColorImage=o,t.addColorLayer=l;var u=r(1),d=n(u),s=r(45),f=n(s),c=r(21),m=n(c),v=r(46),g=n(v),h=r(4),p=n(h),b=r(15),w=n(b),y=r(13),I=n(y),_=r(11),P=n(_),E=r(12),C=n(E)},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return(0,a.default)(e)};var n=r(24),a=function(e){return e&&e.__esModule?e:{default:e}}(n)},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function a(e,t,r){e.renderingTools.renderCanvas||(e.renderingTools.renderCanvas=document.createElement("canvas"));var n=e.renderingTools.renderCanvas,a=e.viewport.colormap||e.options.colormap;if(a&&"string"==typeof a&&(a=y.default.getColormap(a)),!a)throw new Error("renderLabelMapImage: colormap not found.");var i=a.getId();if(!1===(0,h.default)(e,t)&&!0!==r&&e.renderingTools.colormapId===i)return n;n.width===t.width&&n.height===t.height||(0,c.default)(e,t);var o=(0,s.default)();e.renderingTools.colorLut&&!r&&e.renderingTools.colormapId===i||(e.renderingTools.colorLut=a.createLookupTable(),e.renderingTools.colormapId=i),t.stats=t.stats||{},t.stats.lastLutGenerateTime=(0,s.default)()-o;var l=e.renderingTools.colorLut,u=e.renderingTools.renderCanvasData,d=e.renderingTools.renderCanvasContext;return(0,b.default)(t,l,u.data),o=(0,s.default)(),d.putImageData(u,0,0),t.stats.lastPutImageDataTime=(0,s.default)()-o,n}function i(e,t){if(void 0===e)throw new Error("renderLabelMapImage: enabledElement parameter must not be undefined");var r=e.image;if(void 0===r)throw new Error("renderLabelMapImage: image must be loaded before it can be drawn");var n=e.canvas.getContext("2d");n.setTransform(1,0,0,1,0,0),n.fillStyle="black",n.fillRect(0,0,e.canvas.width,e.canvas.height),n.imageSmoothingEnabled=!e.viewport.pixelReplication,n.mozImageSmoothingEnabled=n.imageSmoothingEnabled,(0,u.default)(e,n);var i=a(e,r,t),o=r.width,l=r.height;n.drawImage(i,0,0,o,l,0,0,o,l),e.renderingTools=(0,v.default)(e)}function o(e,t){if(void 0===e)throw new Error("addLabelMapLayer: layer parameter must not be undefined");var r=e.image;if(void 0===r)throw new Error("addLabelMapLayer: image must be loaded before it can be drawn");e.canvas=a(e,r,t);var n=e.canvas.getContext("2d");n.imageSmoothingEnabled=!e.viewport.pixelReplication,n.mozImageSmoothingEnabled=n.imageSmoothingEnabled,e.renderingTools=(0,v.default)(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.renderLabelMapImage=i,t.addLabelMapLayer=o;var l=r(4),u=n(l),d=r(1),s=n(d),f=r(11),c=n(f),m=r(12),v=n(m),g=r(13),h=n(g),p=r(22),b=n(p),w=r(7),y=n(w)},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){var r=e.renderingTools.renderCanvas;r.width=t.width,r.height=t.height;var n=r.getContext("2d");n.fillStyle="white",n.fillRect(0,0,r.width,r.height);var a=n.getImageData(0,0,t.width,t.height);e.renderingTools.renderCanvasContext=n,e.renderingTools.renderCanvasData=a}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t=e.image.imageId,r=e.viewport;return e.renderingTools.lastRenderedImageId=t,e.renderingTools.lastRenderedViewport={windowCenter:r.voi.windowCenter,windowWidth:r.voi.windowWidth,invert:r.invert,rotation:r.rotation,hflip:r.hflip,vflip:r.vflip,modalityLUT:r.modalityLUT,voiLUT:r.voiLUT,colormap:r.colormap},e.renderingTools}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){var r=e.renderingTools.lastRenderedImageId,n=e.renderingTools.lastRenderedViewport;return t.imageId!==r||!n||n.windowCenter!==e.viewport.voi.windowCenter||n.windowWidth!==e.viewport.voi.windowWidth||n.invert!==e.viewport.invert||n.rotation!==e.viewport.rotation||n.hflip!==e.viewport.hflip||n.vflip!==e.viewport.vflip||n.modalityLUT!==e.viewport.modalityLUT||n.voiLUT!==e.viewport.voiLUT||n.colormap!==e.viewport.colormap}},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function a(e,t,r){e.renderingTools.renderCanvas||(e.renderingTools.renderCanvas=document.createElement("canvas"));var n=e.renderingTools.renderCanvas,a=e.viewport.colormap||e.options.colormap;if(a&&"string"==typeof a&&(a=_.default.getColormap(a)),!a)throw new Error("renderPseudoColorImage: colormap not found.");var i=a.getId();if(!1===(0,b.default)(e,t)&&!0!==r&&e.renderingTools.colormapId===i)return n;n.width===t.width&&n.height===t.height||(0,c.default)(e,t);var o=(0,s.default)();e.renderingTools.colorLut&&!r&&e.renderingTools.colormapId===i||(a.setNumberOfColors(256),e.renderingTools.colorLut=a.createLookupTable(),e.renderingTools.colormapId=i);var l=(0,v.default)(t,e.viewport,r);t.stats=t.stats||{},t.stats.lastLutGenerateTime=(0,s.default)()-o;var u=e.renderingTools.colorLut,d=e.renderingTools.renderCanvasData,f=e.renderingTools.renderCanvasContext;return(0,y.default)(t,l,u,d.data),o=(0,s.default)(),f.putImageData(d,0,0),t.stats.lastPutImageDataTime=(0,s.default)()-o,n}function i(e,t){if(void 0===e)throw new Error("drawImage: enabledElement parameter must not be undefined");var r=e.image;if(void 0===r)throw new Error("drawImage: image must be loaded before it can be drawn");var n=e.canvas.getContext("2d");n.setTransform(1,0,0,1,0,0),n.fillStyle="black",n.fillRect(0,0,e.canvas.width,e.canvas.height),n.imageSmoothingEnabled=!e.viewport.pixelReplication,n.mozImageSmoothingEnabled=n.imageSmoothingEnabled,(0,u.default)(e,n);var i=a(e,r,t),o=r.width,l=r.height;n.drawImage(i,0,0,o,l,0,0,o,l),e.renderingTools=(0,h.default)(e)}function o(e,t){if(void 0===e)throw new Error("addPseudoColorLayer: layer parameter must not be undefined");var r=e.image;if(void 0===r)throw new Error("addPseudoColorLayer: image must be loaded before it can be drawn");e.canvas=a(e,r,t);var n=e.canvas.getContext("2d");n.imageSmoothingEnabled=!e.viewport.pixelReplication,n.mozImageSmoothingEnabled=n.imageSmoothingEnabled,e.renderingTools=(0,h.default)(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.renderPseudoColorImage=i,t.addPseudoColorLayer=o;var l=r(4),u=n(l),d=r(1),s=n(d),f=r(11),c=n(f),m=r(32),v=n(m),g=r(12),h=n(g),p=r(13),b=n(p),w=r(23),y=n(w),I=r(7),_=n(I)},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var a=r(47),i=r(34),o=n(i),l=r(33),u=n(l),d={createProgramFromString:o.default,renderer:{render:a.render,initRenderer:a.initRenderer,getRenderCanvas:a.getRenderCanvas,isWebGLAvailable:a.isWebGLAvailable},textureCache:u.default};Object.defineProperty(d,"isWebGLInitialized",{enumerable:!0,configurable:!1,get:function(){return a.isWebGLInitialized}}),t.default=d},function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),i=function(){function e(){n(this,e),this.listeners={},this.namespaces={}}return a(e,[{key:"addEventNamespaceListener",value:function(e,t){e.indexOf(".")<=0||(this.namespaces[e]=t,this.addEventListener(e.split(".")[0],t))}},{key:"removeEventNamespaceListener",value:function(e){e.indexOf(".")<=0||!this.namespaces[e]||(this.removeEventListener(e.split(".")[0],this.namespaces[e]),delete this.namespaces[e])}},{key:"addEventListener",value:function(e,t){if(e.indexOf(".")>0)return void this.addEventNamespaceListener(e,t);e in this.listeners||(this.listeners[e]=[]),this.listeners[e].push(t)}},{key:"removeEventListener",value:function(e,t){if(e.indexOf(".")>0)return void this.removeEventNamespaceListener(e);if(e in this.listeners)for(var r=this.listeners[e],n=0,a=r.length;n<a;n++)if(r[n]===t)return void r.splice(n,1)}},{key:"dispatchEvent",value:function(e){if(!(e.type in this.listeners))return!0;for(var t=this.listeners[e.type],r=0,n=t.length;r<n;r++)t[r].call(this,e);return!e.defaultPrevented}}]),e}(),o=new i;t.default=o},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function a(e,t,r){var n=!(arguments.length>3&&void 0!==arguments[3])||arguments[3];e.renderingTools.renderCanvas||(e.renderingTools.renderCanvas=document.createElement("canvas"));var a=e.renderingTools.renderCanvas;if(!1===(0,y.default)(e,t)&&!0!==r)return a;a.width===t.width&&a.height===t.height||(0,_.default)(e,t);var i=(0,v.default)(),o=(0,b.default)(t,e.viewport,r);t.stats=t.stats||{},t.stats.lastLutGenerateTime=(0,v.default)()-i;var l=e.renderingTools.renderCanvasData,d=e.renderingTools.renderCanvasContext;return n?(0,u.default)(t,o,l.data):(0,s.default)(t,o,l.data),i=(0,v.default)(),d.putImageData(l,0,0),t.stats.lastPutImageDataTime=(0,v.default)()-i,a}function i(e,t){if(void 0===e)throw new Error("drawImage: enabledElement parameter must not be undefined");var r=e.image;if(void 0===r)throw new Error("drawImage: image must be loaded before it can be drawn");var n=e.canvas.getContext("2d");n.setTransform(1,0,0,1,0,0),n.fillStyle="black",n.fillRect(0,0,e.canvas.width,e.canvas.height),n.imageSmoothingEnabled=!e.viewport.pixelReplication,n.mozImageSmoothingEnabled=n.imageSmoothingEnabled,(0,c.default)(e,n);var i=void 0;i=e.options&&e.options.renderer&&"webgl"===e.options.renderer.toLowerCase()?h.default.renderer.render(e):a(e,r,t),n.drawImage(i,0,0,r.width,r.height,0,0,r.width,r.height),e.renderingTools=(0,E.default)(e)}function o(e,t){var r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(void 0===e)throw new Error("addGrayscaleLayer: layer parameter must not be undefined");var n=e.image;if(void 0===n)throw new Error("addGrayscaleLayer: image must be loaded before it can be drawn");e.canvas=a(e,n,t,r);var i=e.canvas.getContext("2d");i.imageSmoothingEnabled=!e.viewport.pixelReplication,i.mozImageSmoothingEnabled=i.imageSmoothingEnabled,e.renderingTools=(0,E.default)(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.renderGrayscaleImage=i,t.addGrayscaleLayer=o;var l=r(20),u=n(l),d=r(30),s=n(d),f=r(4),c=n(f),m=r(1),v=n(m),g=r(15),h=n(g),p=r(32),b=n(p),w=r(13),y=n(w),I=r(11),_=n(I),P=r(12),E=n(P)},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t,r,n,a,o){var u=e.maxPixelValue,d=e.minPixelValue,s=Math.min(d,0);if(void 0===e.cachedLut){var f=u-s+1;e.cachedLut={},e.cachedLut.lutArray=new Uint8ClampedArray(f)}var c=e.cachedLut.lutArray,m=(0,i.default)(e.slope,e.intercept,a),v=(0,l.default)(t,r,o);if(!0===n)for(var g=d;g<=u;g++)c[g+-s]=255-v(m(g));else for(var h=d;h<=u;h++)c[h+-s]=v(m(h));return c};var a=r(26),i=n(a),o=r(27),l=n(o)},function(e,t,r){"use strict";function n(e){window.setTimeout(e,1e3/60)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return window.requestAnimationFrame(e)||window.webkitRequestAnimationFrame(e)||window.mozRequestAnimationFrame(e)||window.oRequestAnimationFrame(e)||window.msRequestAnimationFrame(e)||n(e)}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t,r){var n=(0,a.default)(),i=e.getPixelData();e.stats.lastGetPixelDataTime=(0,a.default)()-n;var o=i.length,l=e.minPixelValue,u=3,d=0;if(n=(0,a.default)(),i instanceof Int16Array)if(l<0)for(;d<o;)r[u]=t[i[d++]+-l],u+=4;else for(;d<o;)r[u]=t[i[d++]],u+=4;else if(i instanceof Uint16Array)for(;d<o;)r[u]=t[i[d++]],u+=4;else if(l<0)for(;d<o;)r[u]=t[i[d++]+-l],u+=4;else for(;d<o;)r[u]=t[i[d++]],u+=4;e.stats.lastStoredPixelDataToCanvasImageDataTime=(0,a.default)()-n};var n=r(1),a=function(e){return e&&e.__esModule?e:{default:e}}(n)},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t,r){var n=(0,a.default)(),i=e.getPixelData();e.stats.lastGetPixelDataTime=(0,a.default)()-n;var o=e.minPixelValue,l=0,u=0,d=i.length;if(n=(0,a.default)(),o<0)for(;u<d;)r[l++]=t[i[u++]+-o],r[l++]=t[i[u++]+-o],r[l]=t[i[u]+-o],u+=2,l+=2;else for(;u<d;)r[l++]=t[i[u++]],r[l++]=t[i[u++]],r[l]=t[i[u]],u+=2,l+=2;e.stats.lastStoredPixelDataToCanvasImageDataTime=(0,a.default)()-n};var n=r(1),a=function(e){return e&&e.__esModule?e:{default:e}}(n)},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function a(e,t,r){var n=(0,u.default)(),a=e.getPixelData();e.stats.lastGetPixelDataTime=(0,u.default)()-n;var i=a.length,l=e.minPixelValue,d=0,s=0,f=void 0,c=void 0;if(n=(0,u.default)(),c=t instanceof o.default.LookupTable?t.Table:t,l<0)for(;s<i;)f=c[a[s++]+-l],r[d++]=f[0],r[d++]=f[1],r[d++]=f[2],r[d++]=f[3];else for(;s<i;)f=c[a[s++]],r[d++]=f[0],r[d++]=f[1],r[d++]=f[2],r[d++]=f[3];e.stats.lastStoredPixelDataToCanvasImageDataTime=(0,u.default)()-n}Object.defineProperty(t,"__esModule",{value:!0});var i=r(7),o=n(i),l=r(1),u=n(l);t.default=a},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function a(e,t,r,n){var a=(0,u.default)(),i=e.getPixelData();e.stats.lastGetPixelDataTime=(0,u.default)()-a;var l=i.length,d=e.minPixelValue,s=0,f=0,c=void 0,m=void 0,v=void 0;if(a=(0,u.default)(),v=r instanceof o.default.LookupTable?r.Table:r,d<0)for(;f<l;)c=t[i[f++]+-d],m=v[c],n[s++]=m[0],n[s++]=m[1],n[s++]=m[2],n[s++]=m[3];else for(;f<l;)c=t[i[f++]],m=v[c],n[s++]=m[0],n[s++]=m[1],n[s++]=m[2],n[s++]=m[3];e.stats.lastStoredPixelDataToCanvasImageDataTime=(0,u.default)()-a}Object.defineProperty(t,"__esModule",{value:!0});var i=r(7),o=n(i),l=r(1),u=n(l);t.default=a},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){var r=new n.Transform;r.translate(e.canvas.width/2,e.canvas.height/2);var a=e.viewport.rotation;0!==a&&r.rotate(a*Math.PI/180);var i=e.viewport.scale,o=e.viewport.scale;return e.image.rowPixelSpacing<e.image.columnPixelSpacing?i*=e.image.columnPixelSpacing/e.image.rowPixelSpacing:e.image.columnPixelSpacing<e.image.rowPixelSpacing&&(o*=e.image.rowPixelSpacing/e.image.columnPixelSpacing),r.scale(i,o),0!==a&&r.rotate(-a*Math.PI/180),r.translate(e.viewport.translation.x,e.viewport.translation.y),0!==a&&r.rotate(a*Math.PI/180),void 0!==t&&r.scale(t,t),e.viewport.hflip&&r.scale(-1,1),e.viewport.vflip&&r.scale(1,-1),r.translate(-e.image.width/2,-e.image.height/2),r};var n=r(31)},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function a(e,t,r){var n=t.element,a={viewport:t.viewport,element:t.element,image:t.image,enabledElement:t,layerId:r};(0,_.default)(n,e,a)}function i(e,t){if(e.layerId===t.layerId)throw new Error("rescaleImage: both arguments represent the same layer");var r=e.image,n=t.image;if(r.imageId&&n.imageId){var a=n.columnPixelSpacing*n.width/(r.columnPixelSpacing*r.width),i=t.viewport.scale/e.viewport.scale*a;t.viewport.scale=e.viewport.scale*i}}function o(e,t,r){var n=(0,g.default)(),o=(0,h.getEnabledElement)(e),l=o.layers,u=void 0;t&&(u=(0,b.default)(o.canvas,t),r&&r.viewport&&(u=Object.assign(u,r.viewport))),!1!==o.syncViewports&&(o.syncViewports=!0);var d={image:t,layerId:n,viewport:u,options:r||{},renderingTools:{}};return l.length&&t&&i(l[0],d),l.push(d),a("cornerstonelayeradded",o,n),1===l.length&&t&&f(e,n),n}function l(e,t){var r=(0,h.getEnabledElement)(e),n=r.layers,i=r.layers.findIndex(function(e){return e.layerId===t});-1!==i&&(n.splice(i,1),t===r.activeLayerId&&n.length&&f(e,n[0].layerId),a("cornerstonelayerremoved",r,t))}function u(e,t){return(0,h.getEnabledElement)(e).layers.find(function(e){return e.layerId===t})}function d(e){return(0,h.getEnabledElement)(e).layers}function s(e){return(0,h.getEnabledElement)(e).layers.filter(function(e){return e.options&&!1!==e.options.visible&&0!==e.options.opacity})}function f(e,t){var r=(0,h.getEnabledElement)(e);if(r.activeLayerId!==t){var n=r.layers.findIndex(function(e){return e.layerId===t});if(-1===n)throw new Error("setActiveLayer: layer not found in layers array");var i=r.layers[n];if(!i.image)throw new Error("setActiveLayer: layer with undefined image cannot be set as active.");r.activeLayerId=t,r.image=i.image,r.viewport=i.viewport,(0,y.default)(e),a("cornerstoneactivelayerchanged",r,t)}}function c(e,t,r){var n=(0,h.getEnabledElement)(e),a=n.layers[0],o=void 0;if(!(o=r?u(e,r):m(e)))throw new Error("setLayerImage: Layer not found");if(o.image=t,!t)return void(o.viewport=void 0);if(!o.viewport){var l=(0,b.default)(n.canvas,t);o.options&&o.options.viewport&&(o.viewport=Object.assign(l,o.options.viewport)),a.layerId!==r&&i(a,o)}}function m(e){var t=(0,h.getEnabledElement)(e);return t.layers.find(function(e){return e.layerId===t.activeLayerId})}Object.defineProperty(t,"__esModule",{value:!0}),t.rescaleImage=i,t.addLayer=o,t.removeLayer=l,t.getLayer=u,t.getLayers=d,t.getVisibleLayers=s,t.setActiveLayer=f,t.setLayerImage=c,t.getActiveLayer=m;var v=r(58),g=n(v),h=r(0),p=r(3),b=n(p),w=r(5),y=n(w),I=r(2),_=n(I)},function(e,t,r){"use strict";function n(e,t){return function(r){return r*e+t}}function a(e){var t=e.lut[0],r=e.lut[e.lut.length-1],n=e.firstValueMapped+e.lut.length;return function(a){return a<e.firstValueMapped?t:a>=n?r:e.lut[a]}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t,r){return r?a(r):n(e,t)}},function(e,t,r){"use strict";function n(e){if(Array.isArray(e)){for(var t=0,r=Array(e.length);t<e.length;t++)r[t]=e[t];return r}return Array.from(e)}function a(e,t){return function(r){return 255*((r-t)/e+.5)}}function i(e){var t=Math.max.apply(Math,n(e.lut)).toString(2).length,r=t-8,a=e.lut[0]>>r,i=e.lut[e.lut.length-1]>>r,o=e.firstValueMapped+e.lut.length-1;return function(t){return t<e.firstValueMapped?a:t>=o?i:e.lut[t-e.firstValueMapped]>>r}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t,r){return r?i(r):a(e,t)}},function(e,t,r){"use strict";function n(e,t,r){r=null===r?100:r;for(var n=(t-e)/(r-1),a=[];r-- >0;)a.push(e),e+=n;return a[a.length-1]=t,a}function a(e,t){for(var r=0,n=e.length-1;r<=n;){var a=r+Math.floor((n-r)/2),i=e[a];if(i===t)return a;t<i?n=a-1:r=a+1}return r}function i(e,t){var r=void 0,n=[],i=t.length;for(e.sort(function(e,t){return e-t}),r=0;r<i;r++)n[r]=a(e,t[r]);return n}function o(e,t,r){var a=void 0,o=[],l=[],u=[],d=[];for(r=null===r?1:r,a=0;a<t.length;a++){var s=t[a];o.push((e-1)*s[0]),l.push(s[1]),u.push(s[1])}var f=n(0,1,e);for(a=0;a<e;a++)f[a]=(e-1)*Math.pow(f[a],r);var c=i(o,f);for(a=1;a<e-1;a++){var m=c[a],v=(f[a]-o[m-1])/(o[m]-o[m-1]),g=l[m]-u[m-1];d[a]=v*g+u[m-1]}return d[0]=u[0],d[e-1]=l[t.length-1],d}function l(e,t,r){var n=void 0,a=[];t=null===t?256:t,r=null===r?1:r;var i=o(t,e.red,r),l=o(t,e.green,r),u=o(t,e.blue,r);for(n=0;n<t;n++){var d=Math.round(255*i[n]),s=Math.round(255*l[n]),f=Math.round(255*u[n]),c=[d,s,f,255];a.push(c)}return a}function u(){var e=[];return Object.keys(m).forEach(function(t){if(m.hasOwnProperty(t)){var r=m[t];e.push({id:t,name:r.name})}}),e.sort(function(e,t){var r=e.name.toLowerCase(),n=t.name.toLowerCase();return r===n?0:r<n?-1:1}),e}function d(e,t){var r=m[e];return r||(r=m[e]=t||{name:"",colors:[]}),!r.colors&&r.segmentedData&&(r.colors=l(r.segmentedData,r.numColors,r.gamma)),{getId:function(){return e},getColorSchemeName:function(){return r.name},setColorSchemeName:function(e){r.name=e},getNumberOfColors:function(){return r.colors.length},setNumberOfColors:function(e){for(;r.colors.length<e;)r.colors.push(c);r.colors.length=e},getColor:function(e){return this.isValidIndex(e)?r.colors[e]:c},getColorRepeating:function(e){var t=r.colors.length;return e=t?e%t:0,this.getColor(e)},setColor:function(e,t){this.isValidIndex(e)&&(r.colors[e]=t)},addColor:function(e){r.colors.push(e)},insertColor:function(e,t){this.isValidIndex(e)&&r.colors.splice(e,1,t)},removeColor:function(e){this.isValidIndex(e)&&r.colors.splice(e,1)},clearColors:function(){r.colors=[]},buildLookupTable:function(e){if(e){var t=r.colors.length;e.setNumberOfTableValues(t);for(var n=0;n<t;n++)e.setTableValue(n,r.colors[n])}},createLookupTable:function(){var e=new f.default;return this.buildLookupTable(e),e},isValidIndex:function(e){return e>=0&&e<r.colors.length}}}Object.defineProperty(t,"__esModule",{value:!0}),t.getColormapsList=u,t.getColormap=d;var s=r(29),f=function(e){return e&&e.__esModule?e:{default:e}}(s),c=[0,0,0,0],m={hotIron:{name:"Hot Iron",numOfColors:256,colors:[[0,0,0,255],[2,0,0,255],[4,0,0,255],[6,0,0,255],[8,0,0,255],[10,0,0,255],[12,0,0,255],[14,0,0,255],[16,0,0,255],[18,0,0,255],[20,0,0,255],[22,0,0,255],[24,0,0,255],[26,0,0,255],[28,0,0,255],[30,0,0,255],[32,0,0,255],[34,0,0,255],[36,0,0,255],[38,0,0,255],[40,0,0,255],[42,0,0,255],[44,0,0,255],[46,0,0,255],[48,0,0,255],[50,0,0,255],[52,0,0,255],[54,0,0,255],[56,0,0,255],[58,0,0,255],[60,0,0,255],[62,0,0,255],[64,0,0,255],[66,0,0,255],[68,0,0,255],[70,0,0,255],[72,0,0,255],[74,0,0,255],[76,0,0,255],[78,0,0,255],[80,0,0,255],[82,0,0,255],[84,0,0,255],[86,0,0,255],[88,0,0,255],[90,0,0,255],[92,0,0,255],[94,0,0,255],[96,0,0,255],[98,0,0,255],[100,0,0,255],[102,0,0,255],[104,0,0,255],[106,0,0,255],[108,0,0,255],[110,0,0,255],[112,0,0,255],[114,0,0,255],[116,0,0,255],[118,0,0,255],[120,0,0,255],[122,0,0,255],[124,0,0,255],[126,0,0,255],[128,0,0,255],[130,0,0,255],[132,0,0,255],[134,0,0,255],[136,0,0,255],[138,0,0,255],[140,0,0,255],[142,0,0,255],[144,0,0,255],[146,0,0,255],[148,0,0,255],[150,0,0,255],[152,0,0,255],[154,0,0,255],[156,0,0,255],[158,0,0,255],[160,0,0,255],[162,0,0,255],[164,0,0,255],[166,0,0,255],[168,0,0,255],[170,0,0,255],[172,0,0,255],[174,0,0,255],[176,0,0,255],[178,0,0,255],[180,0,0,255],[182,0,0,255],[184,0,0,255],[186,0,0,255],[188,0,0,255],[190,0,0,255],[192,0,0,255],[194,0,0,255],[196,0,0,255],[198,0,0,255],[200,0,0,255],[202,0,0,255],[204,0,0,255],[206,0,0,255],[208,0,0,255],[210,0,0,255],[212,0,0,255],[214,0,0,255],[216,0,0,255],[218,0,0,255],[220,0,0,255],[222,0,0,255],[224,0,0,255],[226,0,0,255],[228,0,0,255],[230,0,0,255],[232,0,0,255],[234,0,0,255],[236,0,0,255],[238,0,0,255],[240,0,0,255],[242,0,0,255],[244,0,0,255],[246,0,0,255],[248,0,0,255],[250,0,0,255],[252,0,0,255],[254,0,0,255],[255,0,0,255],[255,2,0,255],[255,4,0,255],[255,6,0,255],[255,8,0,255],[255,10,0,255],[255,12,0,255],[255,14,0,255],[255,16,0,255],[255,18,0,255],[255,20,0,255],[255,22,0,255],[255,24,0,255],[255,26,0,255],[255,28,0,255],[255,30,0,255],[255,32,0,255],[255,34,0,255],[255,36,0,255],[255,38,0,255],[255,40,0,255],[255,42,0,255],[255,44,0,255],[255,46,0,255],[255,48,0,255],[255,50,0,255],[255,52,0,255],[255,54,0,255],[255,56,0,255],[255,58,0,255],[255,60,0,255],[255,62,0,255],[255,64,0,255],[255,66,0,255],[255,68,0,255],[255,70,0,255],[255,72,0,255],[255,74,0,255],[255,76,0,255],[255,78,0,255],[255,80,0,255],[255,82,0,255],[255,84,0,255],[255,86,0,255],[255,88,0,255],[255,90,0,255],[255,92,0,255],[255,94,0,255],[255,96,0,255],[255,98,0,255],[255,100,0,255],[255,102,0,255],[255,104,0,255],[255,106,0,255],[255,108,0,255],[255,110,0,255],[255,112,0,255],[255,114,0,255],[255,116,0,255],[255,118,0,255],[255,120,0,255],[255,122,0,255],[255,124,0,255],[255,126,0,255],[255,128,4,255],[255,130,8,255],[255,132,12,255],[255,134,16,255],[255,136,20,255],[255,138,24,255],[255,140,28,255],[255,142,32,255],[255,144,36,255],[255,146,40,255],[255,148,44,255],[255,150,48,255],[255,152,52,255],[255,154,56,255],[255,156,60,255],[255,158,64,255],[255,160,68,255],[255,162,72,255],[255,164,76,255],[255,166,80,255],[255,168,84,255],[255,170,88,255],[255,172,92,255],[255,174,96,255],[255,176,100,255],[255,178,104,255],[255,180,108,255],[255,182,112,255],[255,184,116,255],[255,186,120,255],[255,188,124,255],[255,190,128,255],[255,192,132,255],[255,194,136,255],[255,196,140,255],[255,198,144,255],[255,200,148,255],[255,202,152,255],[255,204,156,255],[255,206,160,255],[255,208,164,255],[255,210,168,255],[255,212,172,255],[255,214,176,255],[255,216,180,255],[255,218,184,255],[255,220,188,255],[255,222,192,255],[255,224,196,255],[255,226,200,255],[255,228,204,255],[255,230,208,255],[255,232,212,255],[255,234,216,255],[255,236,220,255],[255,238,224,255],[255,240,228,255],[255,242,232,255],[255,244,236,255],[255,246,240,255],[255,248,244,255],[255,250,248,255],[255,252,252,255],[255,255,255,255]]},pet:{name:"PET",numColors:256,colors:[[0,0,0,255],[0,2,1,255],[0,4,3,255],[0,6,5,255],[0,8,7,255],[0,10,9,255],[0,12,11,255],[0,14,13,255],[0,16,15,255],[0,18,17,255],[0,20,19,255],[0,22,21,255],[0,24,23,255],[0,26,25,255],[0,28,27,255],[0,30,29,255],[0,32,31,255],[0,34,33,255],[0,36,35,255],[0,38,37,255],[0,40,39,255],[0,42,41,255],[0,44,43,255],[0,46,45,255],[0,48,47,255],[0,50,49,255],[0,52,51,255],[0,54,53,255],[0,56,55,255],[0,58,57,255],[0,60,59,255],[0,62,61,255],[0,65,63,255],[0,67,65,255],[0,69,67,255],[0,71,69,255],[0,73,71,255],[0,75,73,255],[0,77,75,255],[0,79,77,255],[0,81,79,255],[0,83,81,255],[0,85,83,255],[0,87,85,255],[0,89,87,255],[0,91,89,255],[0,93,91,255],[0,95,93,255],[0,97,95,255],[0,99,97,255],[0,101,99,255],[0,103,101,255],[0,105,103,255],[0,107,105,255],[0,109,107,255],[0,111,109,255],[0,113,111,255],[0,115,113,255],[0,117,115,255],[0,119,117,255],[0,121,119,255],[0,123,121,255],[0,125,123,255],[0,128,125,255],[1,126,127,255],[3,124,129,255],[5,122,131,255],[7,120,133,255],[9,118,135,255],[11,116,137,255],[13,114,139,255],[15,112,141,255],[17,110,143,255],[19,108,145,255],[21,106,147,255],[23,104,149,255],[25,102,151,255],[27,100,153,255],[29,98,155,255],[31,96,157,255],[33,94,159,255],[35,92,161,255],[37,90,163,255],[39,88,165,255],[41,86,167,255],[43,84,169,255],[45,82,171,255],[47,80,173,255],[49,78,175,255],[51,76,177,255],[53,74,179,255],[55,72,181,255],[57,70,183,255],[59,68,185,255],[61,66,187,255],[63,64,189,255],[65,63,191,255],[67,61,193,255],[69,59,195,255],[71,57,197,255],[73,55,199,255],[75,53,201,255],[77,51,203,255],[79,49,205,255],[81,47,207,255],[83,45,209,255],[85,43,211,255],[86,41,213,255],[88,39,215,255],[90,37,217,255],[92,35,219,255],[94,33,221,255],[96,31,223,255],[98,29,225,255],[100,27,227,255],[102,25,229,255],[104,23,231,255],[106,21,233,255],[108,19,235,255],[110,17,237,255],[112,15,239,255],[114,13,241,255],[116,11,243,255],[118,9,245,255],[120,7,247,255],[122,5,249,255],[124,3,251,255],[126,1,253,255],[128,0,255,255],[130,2,252,255],[132,4,248,255],[134,6,244,255],[136,8,240,255],[138,10,236,255],[140,12,232,255],[142,14,228,255],[144,16,224,255],[146,18,220,255],[148,20,216,255],[150,22,212,255],[152,24,208,255],[154,26,204,255],[156,28,200,255],[158,30,196,255],[160,32,192,255],[162,34,188,255],[164,36,184,255],[166,38,180,255],[168,40,176,255],[170,42,172,255],[171,44,168,255],[173,46,164,255],[175,48,160,255],[177,50,156,255],[179,52,152,255],[181,54,148,255],[183,56,144,255],[185,58,140,255],[187,60,136,255],[189,62,132,255],[191,64,128,255],[193,66,124,255],[195,68,120,255],[197,70,116,255],[199,72,112,255],[201,74,108,255],[203,76,104,255],[205,78,100,255],[207,80,96,255],[209,82,92,255],[211,84,88,255],[213,86,84,255],[215,88,80,255],[217,90,76,255],[219,92,72,255],[221,94,68,255],[223,96,64,255],[225,98,60,255],[227,100,56,255],[229,102,52,255],[231,104,48,255],[233,106,44,255],[235,108,40,255],[237,110,36,255],[239,112,32,255],[241,114,28,255],[243,116,24,255],[245,118,20,255],[247,120,16,255],[249,122,12,255],[251,124,8,255],[253,126,4,255],[255,128,0,255],[255,130,4,255],[255,132,8,255],[255,134,12,255],[255,136,16,255],[255,138,20,255],[255,140,24,255],[255,142,28,255],[255,144,32,255],[255,146,36,255],[255,148,40,255],[255,150,44,255],[255,152,48,255],[255,154,52,255],[255,156,56,255],[255,158,60,255],[255,160,64,255],[255,162,68,255],[255,164,72,255],[255,166,76,255],[255,168,80,255],[255,170,85,255],[255,172,89,255],[255,174,93,255],[255,176,97,255],[255,178,101,255],[255,180,105,255],[255,182,109,255],[255,184,113,255],[255,186,117,255],[255,188,121,255],[255,190,125,255],[255,192,129,255],[255,194,133,255],[255,196,137,255],[255,198,141,255],[255,200,145,255],[255,202,149,255],[255,204,153,255],[255,206,157,255],[255,208,161,255],[255,210,165,255],[255,212,170,255],[255,214,174,255],[255,216,178,255],[255,218,182,255],[255,220,186,255],[255,222,190,255],[255,224,194,255],[255,226,198,255],[255,228,202,255],[255,230,206,255],[255,232,210,255],[255,234,214,255],[255,236,218,255],[255,238,222,255],[255,240,226,255],[255,242,230,255],[255,244,234,255],[255,246,238,255],[255,248,242,255],[255,250,246,255],[255,252,250,255],[255,255,255,255]]},hotMetalBlue:{name:"Hot Metal Blue",numColors:256,colors:[[0,0,0,255],[0,0,2,255],[0,0,4,255],[0,0,6,255],[0,0,8,255],[0,0,10,255],[0,0,12,255],[0,0,14,255],[0,0,16,255],[0,0,17,255],[0,0,19,255],[0,0,21,255],[0,0,23,255],[0,0,25,255],[0,0,27,255],[0,0,29,255],[0,0,31,255],[0,0,33,255],[0,0,35,255],[0,0,37,255],[0,0,39,255],[0,0,41,255],[0,0,43,255],[0,0,45,255],[0,0,47,255],[0,0,49,255],[0,0,51,255],[0,0,53,255],[0,0,55,255],[0,0,57,255],[0,0,59,255],[0,0,61,255],[0,0,63,255],[0,0,65,255],[0,0,67,255],[0,0,69,255],[0,0,71,255],[0,0,73,255],[0,0,75,255],[0,0,77,255],[0,0,79,255],[0,0,81,255],[0,0,83,255],[0,0,84,255],[0,0,86,255],[0,0,88,255],[0,0,90,255],[0,0,92,255],[0,0,94,255],[0,0,96,255],[0,0,98,255],[0,0,100,255],[0,0,102,255],[0,0,104,255],[0,0,106,255],[0,0,108,255],[0,0,110,255],[0,0,112,255],[0,0,114,255],[0,0,116,255],[0,0,117,255],[0,0,119,255],[0,0,121,255],[0,0,123,255],[0,0,125,255],[0,0,127,255],[0,0,129,255],[0,0,131,255],[0,0,133,255],[0,0,135,255],[0,0,137,255],[0,0,139,255],[0,0,141,255],[0,0,143,255],[0,0,145,255],[0,0,147,255],[0,0,149,255],[0,0,151,255],[0,0,153,255],[0,0,155,255],[0,0,157,255],[0,0,159,255],[0,0,161,255],[0,0,163,255],[0,0,165,255],[0,0,167,255],[3,0,169,255],[6,0,171,255],[9,0,173,255],[12,0,175,255],[15,0,177,255],[18,0,179,255],[21,0,181,255],[24,0,183,255],[26,0,184,255],[29,0,186,255],[32,0,188,255],[35,0,190,255],[38,0,192,255],[41,0,194,255],[44,0,196,255],[47,0,198,255],[50,0,200,255],[52,0,197,255],[55,0,194,255],[57,0,191,255],[59,0,188,255],[62,0,185,255],[64,0,182,255],[66,0,179,255],[69,0,176,255],[71,0,174,255],[74,0,171,255],[76,0,168,255],[78,0,165,255],[81,0,162,255],[83,0,159,255],[85,0,156,255],[88,0,153,255],[90,0,150,255],[93,2,144,255],[96,4,138,255],[99,6,132,255],[102,8,126,255],[105,9,121,255],[108,11,115,255],[111,13,109,255],[114,15,103,255],[116,17,97,255],[119,19,91,255],[122,21,85,255],[125,23,79,255],[128,24,74,255],[131,26,68,255],[134,28,62,255],[137,30,56,255],[140,32,50,255],[143,34,47,255],[146,36,44,255],[149,38,41,255],[152,40,38,255],[155,41,35,255],[158,43,32,255],[161,45,29,255],[164,47,26,255],[166,49,24,255],[169,51,21,255],[172,53,18,255],[175,55,15,255],[178,56,12,255],[181,58,9,255],[184,60,6,255],[187,62,3,255],[190,64,0,255],[194,66,0,255],[198,68,0,255],[201,70,0,255],[205,72,0,255],[209,73,0,255],[213,75,0,255],[217,77,0,255],[221,79,0,255],[224,81,0,255],[228,83,0,255],[232,85,0,255],[236,87,0,255],[240,88,0,255],[244,90,0,255],[247,92,0,255],[251,94,0,255],[255,96,0,255],[255,98,3,255],[255,100,6,255],[255,102,9,255],[255,104,12,255],[255,105,15,255],[255,107,18,255],[255,109,21,255],[255,111,24,255],[255,113,26,255],[255,115,29,255],[255,117,32,255],[255,119,35,255],[255,120,38,255],[255,122,41,255],[255,124,44,255],[255,126,47,255],[255,128,50,255],[255,130,53,255],[255,132,56,255],[255,134,59,255],[255,136,62,255],[255,137,65,255],[255,139,68,255],[255,141,71,255],[255,143,74,255],[255,145,76,255],[255,147,79,255],[255,149,82,255],[255,151,85,255],[255,152,88,255],[255,154,91,255],[255,156,94,255],[255,158,97,255],[255,160,100,255],[255,162,103,255],[255,164,106,255],[255,166,109,255],[255,168,112,255],[255,169,115,255],[255,171,118,255],[255,173,121,255],[255,175,124,255],[255,177,126,255],[255,179,129,255],[255,181,132,255],[255,183,135,255],[255,184,138,255],[255,186,141,255],[255,188,144,255],[255,190,147,255],[255,192,150,255],[255,194,153,255],[255,196,156,255],[255,198,159,255],[255,200,162,255],[255,201,165,255],[255,203,168,255],[255,205,171,255],[255,207,174,255],[255,209,176,255],[255,211,179,255],[255,213,182,255],[255,215,185,255],[255,216,188,255],[255,218,191,255],[255,220,194,255],[255,222,197,255],[255,224,200,255],[255,226,203,255],[255,228,206,255],[255,229,210,255],[255,231,213,255],[255,233,216,255],[255,235,219,255],[255,237,223,255],[255,239,226,255],[255,240,229,255],[255,242,232,255],[255,244,236,255],[255,246,239,255],[255,248,242,255],[255,250,245,255],[255,251,249,255],[255,253,252,255],[255,255,255,255]]},pet20Step:{name:"PET 20 Step",numColors:256,colors:[[0,0,0,255],[0,0,0,255],[0,0,0,255],[0,0,0,255],[0,0,0,255],[0,0,0,255],[0,0,0,255],[0,0,0,255],[0,0,0,255],[0,0,0,255],[0,0,0,255],[0,0,0,255],[0,0,0,255],[96,0,80,255],[96,0,80,255],[96,0,80,255],[96,0,80,255],[96,0,80,255],[96,0,80,255],[96,0,80,255],[96,0,80,255],[96,0,80,255],[96,0,80,255],[96,0,80,255],[96,0,80,255],[96,0,80,255],[48,48,80,255],[48,48,80,255],[48,48,80,255],[48,48,80,255],[48,48,80,255],[48,48,80,255],[48,48,80,255],[48,48,80,255],[48,48,80,255],[48,48,80,255],[48,48,80,255],[48,48,80,255],[48,48,80,255],[48,48,112,255],[48,48,112,255],[48,48,112,255],[48,48,112,255],[48,48,112,255],[48,48,112,255],[48,48,112,255],[48,48,112,255],[48,48,112,255],[48,48,112,255],[48,48,112,255],[48,48,112,255],[80,80,128,255],[80,80,128,255],[80,80,128,255],[80,80,128,255],[80,80,128,255],[80,80,128,255],[80,80,128,255],[80,80,128,255],[80,80,128,255],[80,80,128,255],[80,80,128,255],[80,80,128,255],[80,80,128,255],[96,96,176,255],[96,96,176,255],[96,96,176,255],[96,96,176,255],[96,96,176,255],[96,96,176,255],[96,96,176,255],[96,96,176,255],[96,96,176,255],[96,96,176,255],[96,96,176,255],[96,96,176,255],[96,96,176,255],[112,112,192,255],[112,112,192,255],[112,112,192,255],[112,112,192,255],[112,112,192,255],[112,112,192,255],[112,112,192,255],[112,112,192,255],[112,112,192,255],[112,112,192,255],[112,112,192,255],[112,112,192,255],[112,112,192,255],[128,128,224,255],[128,128,224,255],[128,128,224,255],[128,128,224,255],[128,128,224,255],[128,128,224,255],[128,128,224,255],[128,128,224,255],[128,128,224,255],[128,128,224,255],[128,128,224,255],[128,128,224,255],[48,96,48,255],[48,96,48,255],[48,96,48,255],[48,96,48,255],[48,96,48,255],[48,96,48,255],[48,96,48,255],[48,96,48,255],[48,96,48,255],[48,96,48,255],[48,96,48,255],[48,96,48,255],[48,96,48,255],[48,144,48,255],[48,144,48,255],[48,144,48,255],[48,144,48,255],[48,144,48,255],[48,144,48,255],[48,144,48,255],[48,144,48,255],[48,144,48,255],[48,144,48,255],[48,144,48,255],[48,144,48,255],[48,144,48,255],[80,192,80,255],[80,192,80,255],[80,192,80,255],[80,192,80,255],[80,192,80,255],[80,192,80,255],[80,192,80,255],[80,192,80,255],[80,192,80,255],[80,192,80,255],[80,192,80,255],[80,192,80,255],[80,192,80,255],[64,224,64,255],[64,224,64,255],[64,224,64,255],[64,224,64,255],[64,224,64,255],[64,224,64,255],[64,224,64,255],[64,224,64,255],[64,224,64,255],[64,224,64,255],[64,224,64,255],[64,224,64,255],[224,224,80,255],[224,224,80,255],[224,224,80,255],[224,224,80,255],[224,224,80,255],[224,224,80,255],[224,224,80,255],[224,224,80,255],[224,224,80,255],[224,224,80,255],[224,224,80,255],[224,224,80,255],[224,224,80,255],[208,208,96,255],[208,208,96,255],[208,208,96,255],[208,208,96,255],[208,208,96,255],[208,208,96,255],[208,208,96,255],[208,208,96,255],[208,208,96,255],[208,208,96,255],[208,208,96,255],[208,208,96,255],[208,208,96,255],[208,176,64,255],[208,176,64,255],[208,176,64,255],[208,176,64,255],[208,176,64,255],[208,176,64,255],[208,176,64,255],[208,176,64,255],[208,176,64,255],[208,176,64,255],[208,176,64,255],[208,176,64,255],[208,176,64,255],[208,144,0,255],[208,144,0,255],[208,144,0,255],[208,144,0,255],[208,144,0,255],[208,144,0,255],[208,144,0,255],[208,144,0,255],[208,144,0,255],[208,144,0,255],[208,144,0,255],[208,144,0,255],[192,96,0,255],[192,96,0,255],[192,96,0,255],[192,96,0,255],[192,96,0,255],[192,96,0,255],[192,96,0,255],[192,96,0,255],[192,96,0,255],[192,96,0,255],[192,96,0,255],[192,96,0,255],[192,96,0,255],[176,48,0,255],[176,48,0,255],[176,48,0,255],[176,48,0,255],[176,48,0,255],[176,48,0,255],[176,48,0,255],[176,48,0,255],[176,48,0,255],[176,48,0,255],[176,48,0,255],[176,48,0,255],[176,48,0,255],[255,0,0,255],[255,0,0,255],[255,0,0,255],[255,0,0,255],[255,0,0,255],[255,0,0,255],[255,0,0,255],[255,0,0,255],[255,0,0,255],[255,0,0,255],[255,0,0,255],[255,0,0,255],[255,0,0,255],[255,255,255,255],[255,255,255,255],[255,255,255,255],[255,255,255,255],[255,255,255,255],[255,255,255,255],[255,255,255,255],[255,255,255,255],[255,255,255,255],[255,255,255,255],[255,255,255,255],[255,255,255,255],[255,255,255,255]]},gray:{name:"Gray",numColors:256,gamma:1,segmentedData:{red:[[0,0,0],[1,1,1]],green:[[0,0,0],[1,1,1]],blue:[[0,0,0],[1,1,1]]}},jet:{name:"Jet",numColors:256,gamma:1,segmentedData:{red:[[0,0,0],[.35,0,0],[.66,1,1],[.89,1,1],[1,.5,.5]],green:[[0,0,0],[.125,0,0],[.375,1,1],[.64,1,1],[.91,0,0],[1,0,0]],blue:[[0,.5,.5],[.11,1,1],[.34,1,1],[.65,0,0],[1,0,0]]}},hsv:{name:"HSV",numColors:256,gamma:1,segmentedData:{red:[[0,1,1],[.15873,1,1],[.174603,.96875,.96875],[.333333,.03125,.03125],[.349206,0,0],[.666667,0,0],[.68254,.03125,.03125],[.84127,.96875,.96875],[.857143,1,1],[1,1,1]],green:[[0,0,0],[.15873,.9375,.9375],[.174603,1,1],[.507937,1,1],[.666667,.0625,.0625],[.68254,0,0],[1,0,0]],blue:[[0,0,0],[.333333,0,0],[.349206,.0625,.0625],[.507937,1,1],[.84127,1,1],[.857143,.9375,.9375],[1,.09375,.09375]]}},hot:{name:"Hot",numColors:256,gamma:1,segmentedData:{red:[[0,.0416,.0416],[.365079,1,1],[1,1,1]],green:[[0,0,0],[.365079,0,0],[.746032,1,1],[1,1,1]],blue:[[0,0,0],[.746032,0,0],[1,1,1]]}},cool:{name:"Cool",numColors:256,gamma:1,segmentedData:{red:[[0,0,0],[1,1,1]],green:[[0,1,1],[1,0,0]],blue:[[0,1,1],[1,1,1]]}},spring:{name:"Spring",numColors:256,gamma:1,segmentedData:{red:[[0,1,1],[1,1,1]],green:[[0,0,0],[1,1,1]],blue:[[0,1,1],[1,0,0]]}},summer:{name:"Summer",numColors:256,gamma:1,segmentedData:{red:[[0,0,0],[1,1,1]],green:[[0,.5,.5],[1,1,1]],blue:[[0,.4,.4],[1,.4,.4]]}},autumn:{name:"Autumn",numColors:256,gamma:1,segmentedData:{red:[[0,1,1],[1,1,1]],green:[[0,0,0],[1,1,1]],blue:[[0,0,0],[1,0,0]]}},winter:{name:"Winter",numColors:256,gamma:1,segmentedData:{red:[[0,0,0],[1,0,0]],green:[[0,0,0],[1,1,1]],blue:[[0,1,1],[1,.5,.5]]}},bone:{name:"Bone",numColors:256,gamma:1,segmentedData:{red:[[0,0,0],[.746032,.652778,.652778],[1,1,1]],green:[[0,0,0],[.365079,.319444,.319444],[.746032,.777778,.777778],[1,1,1]],blue:[[0,0,0],[.365079,.444444,.444444],[1,1,1]]}},copper:{name:"Copper",numColors:256,gamma:1,segmentedData:{red:[[0,0,0],[.809524,1,1],[1,1,1]],green:[[0,0,0],[1,.7812,.7812]],blue:[[0,0,0],[1,.4975,.4975]]}},spectral:{name:"Spectral",numColors:256,gamma:1,segmentedData:{red:[[0,0,0],[.05,.4667,.4667],[.1,.5333,.5333],[.15,0,0],[.2,0,0],[.25,0,0],[.3,0,0],[.35,0,0],[.4,0,0],[.45,0,0],[.5,0,0],[.55,0,0],[.6,0,0],[.65,.7333,.7333],[.7,.9333,.9333],[.75,1,1],[.8,1,1],[.85,1,1],[.9,.8667,.8667],[.95,.8,.8],[1,.8,.8]],green:[[0,0,0],[.05,0,0],[.1,0,0],[.15,0,0],[.2,0,0],[.25,.4667,.4667],[.3,.6,.6],[.35,.6667,.6667],[.4,.6667,.6667],[.45,.6,.6],[.5,.7333,.7333],[.55,.8667,.8667],[.6,1,1],[.65,1,1],[.7,.9333,.9333],[.75,.8,.8],[.8,.6,.6],[.85,0,0],[.9,0,0],[.95,0,0],[1,.8,.8]],blue:[[0,0,0],[.05,.5333,.5333],[.1,.6,.6],[.15,.6667,.6667],[.2,.8667,.8667],[.25,.8667,.8667],[.3,.8667,.8667],[.35,.6667,.6667],[.4,.5333,.5333],[.45,0,0],[.5,0,0],[.55,0,0],[.6,0,0],[.65,0,0],[.7,0,0],[.75,0,0],[.8,0,0],[.85,0,0],[.9,0,0],[.95,0,0],[1,.8,.8]]}},coolwarm:{name:"CoolWarm",numColors:256,gamma:1,segmentedData:{red:[[0,.2298057,.2298057],[.03125,.26623388,.26623388],[.0625,.30386891,.30386891],[.09375,.342804478,.342804478],[.125,.38301334,.38301334],[.15625,.424369608,.424369608],[.1875,.46666708,.46666708],[.21875,.509635204,.509635204],[.25,.552953156,.552953156],[.28125,.596262162,.596262162],[.3125,.639176211,.639176211],[.34375,.681291281,.681291281],[.375,.722193294,.722193294],[.40625,.761464949,.761464949],[.4375,.798691636,.798691636],[.46875,.833466556,.833466556],[.5,.865395197,.865395197],[.53125,.897787179,.897787179],[.5625,.924127593,.924127593],[.59375,.944468518,.944468518],[.625,.958852946,.958852946],[.65625,.96732803,.96732803],[.6875,.969954137,.969954137],[.71875,.966811177,.966811177],[.75,.958003065,.958003065],[.78125,.943660866,.943660866],[.8125,.923944917,.923944917],[.84375,.89904617,.89904617],[.875,.869186849,.869186849],[.90625,.834620542,.834620542],[.9375,.795631745,.795631745],[.96875,.752534934,.752534934],[1,.705673158,.705673158]],green:[[0,.298717966,.298717966],[.03125,.353094838,.353094838],[.0625,.406535296,.406535296],[.09375,.458757618,.458757618],[.125,.50941904,.50941904],[.15625,.558148092,.558148092],[.1875,.604562568,.604562568],[.21875,.648280772,.648280772],[.25,.688929332,.688929332],[.28125,.726149107,.726149107],[.3125,.759599947,.759599947],[.34375,.788964712,.788964712],[.375,.813952739,.813952739],[.40625,.834302879,.834302879],[.4375,.849786142,.849786142],[.46875,.860207984,.860207984],[.5,.86541021,.86541021],[.53125,.848937047,.848937047],[.5625,.827384882,.827384882],[.59375,.800927443,.800927443],[.625,.769767752,.769767752],[.65625,.734132809,.734132809],[.6875,.694266682,.694266682],[.71875,.650421156,.650421156],[.75,.602842431,.602842431],[.78125,.551750968,.551750968],[.8125,.49730856,.49730856],[.84375,.439559467,.439559467],[.875,.378313092,.378313092],[.90625,.312874446,.312874446],[.9375,.24128379,.24128379],[.96875,.157246067,.157246067],[1,.01555616,.01555616]],blue:[[0,.753683153,.753683153],[.03125,.801466763,.801466763],[.0625,.84495867,.84495867],[.09375,.883725899,.883725899],[.125,.917387822,.917387822],[.15625,.945619588,.945619588],[.1875,.968154911,.968154911],[.21875,.98478814,.98478814],[.25,.995375608,.995375608],[.28125,.999836203,.999836203],[.3125,.998151185,.998151185],[.34375,.990363227,.990363227],[.375,.976574709,.976574709],[.40625,.956945269,.956945269],[.4375,.931688648,.931688648],[.46875,.901068838,.901068838],[.5,.865395561,.865395561],[.53125,.820880546,.820880546],[.5625,.774508472,.774508472],[.59375,.726736146,.726736146],[.625,.678007945,.678007945],[.65625,.628751763,.628751763],[.6875,.579375448,.579375448],[.71875,.530263762,.530263762],[.75,.481775914,.481775914],[.78125,.434243684,.434243684],[.8125,.387970225,.387970225],[.84375,.343229596,.343229596],[.875,.300267182,.300267182],[.90625,.259301199,.259301199],[.9375,.220525627,.220525627],[.96875,.184115123,.184115123],[1,.150232812,.150232812]]}},blues:{name:"Blues",numColors:256,gamma:1,segmentedData:{red:[[0,.9686274528503418,.9686274528503418],[.125,.8705882430076599,.8705882430076599],[.25,.7764706015586853,.7764706015586853],[.375,.6196078658103943,.6196078658103943],[.5,.41960784792900085,.41960784792900085],[.625,.25882354378700256,.25882354378700256],[.75,.12941177189350128,.12941177189350128],[.875,.0313725508749485,.0313725508749485],[1,.0313725508749485,.0313725508749485]],green:[[0,.9843137264251709,.9843137264251709],[.125,.9215686321258545,.9215686321258545],[.25,.8588235378265381,.8588235378265381],[.375,.7921568751335144,.7921568751335144],[.5,.6823529601097107,.6823529601097107],[.625,.572549045085907,.572549045085907],[.75,.4431372582912445,.4431372582912445],[.875,.3176470696926117,.3176470696926117],[1,.1882352977991104,.1882352977991104]],blue:[[0,1,1],[.125,.9686274528503418,.9686274528503418],[.25,.9372549057006836,.9372549057006836],[.375,.8823529481887817,.8823529481887817],[.5,.8392156958580017,.8392156958580017],[.625,.7764706015586853,.7764706015586853],[.75,.7098039388656616,.7098039388656616],[.875,.6117647290229797,.6117647290229797],[1,.41960784792900085,.41960784792900085]]}}}},function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t,r){if(e>1)throw new Error("HSVToRGB expects hue < 1");var n=[];if(0===t)return n[0]=r,n[1]=r,n[2]=r,n;var a=Math.floor(6*e),i=6*e-a,o=r*(1-t),l=r*(1-t*i),u=r*(1-t*(1-i));switch(a){case 0:case 6:n[0]=r,n[1]=u,n[2]=o;break;case 1:n[0]=l,n[1]=r,n[2]=o;break;case 2:n[0]=o,n[1]=r,n[2]=u;break;case 3:n[0]=o,n[1]=l,n[2]=r;break;case 4:n[0]=u,n[1]=o,n[2]=r;break;case 5:n[0]=r,n[1]=o,n[2]=l}return n}function i(e,t){var r=void 0;return r=e<t.Range[0]?t.MaxIndex+l+1.5:e>t.Range[1]?t.MaxIndex+u+1.5:(e+t.Shift)*t.Scale,Math.floor(r)}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),l=0,u=1,d=function(){function e(){n(this,e),this.NumberOfColors=256,this.Ramp="linear",this.TableRange=[0,255],this.HueRange=[0,.66667],this.SaturationRange=[1,1],this.ValueRange=[1,1],this.AlphaRange=[1,1],this.NaNColor=[128,0,0,255],this.BelowRangeColor=[0,0,0,255],this.UseBelowRangeColor=!0,this.AboveRangeColor=[255,255,255,255],this.UseAboveRangeColor=!0,this.InputRange=[0,255],this.Table=[]}return o(e,[{key:"setNumberOfTableValues",value:function(e){this.NumberOfColors=e}},{key:"setRamp",value:function(e){this.Ramp=e}},{key:"setTableRange",value:function(e,t){this.TableRange[0]=e,this.TableRange[1]=t}},{key:"setHueRange",value:function(e,t){this.HueRange[0]=e,this.HueRange[1]=t}},{key:"setSaturationRange",value:function(e,t){this.SaturationRange[0]=e,this.SaturationRange[1]=t}},{key:"setValueRange",value:function(e,t){this.ValueRange[0]=e,this.ValueRange[1]=t}},{key:"setRange",value:function(e,t){this.InputRange[0]=e,this.InputRange[1]=t}},{key:"setAlphaRange",value:function(e,t){this.AlphaRange[0]=e,this.AlphaRange[1]=t}},{key:"getColor",value:function(e){return this.mapValue(e)}},{key:"build",value:function(e){if(!(this.Table.length>1)||e){this.Table=[];var t=this.NumberOfColors-1,r=void 0,n=void 0,i=void 0,o=void 0;t?(r=(this.HueRange[1]-this.HueRange[0])/t,n=(this.SaturationRange[1]-this.SaturationRange[0])/t,i=(this.ValueRange[1]-this.ValueRange[0])/t,o=(this.AlphaRange[1]-this.AlphaRange[0])/t):r=n=i=o=0;for(var l=0;l<=t;l++){var u=this.HueRange[0]+l*r,d=this.SaturationRange[0]+l*n,s=this.ValueRange[0]+l*i,f=this.AlphaRange[0]+l*o,c=a(u,d,s),m=[];switch(this.Ramp){case"scurve":m[0]=Math.floor(127.5*(1+Math.cos((1-c[0])*Math.PI))),m[1]=Math.floor(127.5*(1+Math.cos((1-c[1])*Math.PI))),m[2]=Math.floor(127.5*(1+Math.cos((1-c[2])*Math.PI))),m[3]=Math.floor(255*f);break;case"linear":m[0]=Math.floor(255*c[0]+.5),m[1]=Math.floor(255*c[1]+.5),m[2]=Math.floor(255*c[2]+.5),m[3]=Math.floor(255*f+.5);break;case"sqrt":m[0]=Math.floor(255*Math.sqrt(c[0])+.5),m[1]=Math.floor(255*Math.sqrt(c[1])+.5),m[2]=Math.floor(255*Math.sqrt(c[2])+.5),m[3]=Math.floor(255*Math.sqrt(f)+.5);break;default:throw new Error("Invalid Ramp value ("+this.Ramp+")")}this.Table.push(m)}this.buildSpecialColors()}}},{key:"buildSpecialColors",value:function(){var e=this.NumberOfColors,t=e+l,r=e+u,n=e+2;this.UseBelowRangeColor||0===e?this.Table[t]=this.BelowRangeColor:this.Table[t]=this.Table[0],this.UseAboveRangeColor||0===e?this.Table[r]=this.AboveRangeColor:this.Table[r]=this.Table[e-1],this.Table[n]=this.NaNColor}},{key:"mapValue",value:function(e){var t=this.getIndex(e);if(t<0)return this.NaNColor;if(0===t){if(this.UseBelowRangeColor&&e<this.TableRange[0])return this.BelowRangeColor}else if(t===this.NumberOfColors-1&&this.UseAboveRangeColor&&e>this.TableRange[1])return this.AboveRangeColor;return this.Table[t]}},{key:"getIndex",value:function(e){var t={};if(t.Range=[],t.MaxIndex=this.NumberOfColors-1,t.Shift=-this.TableRange[0],this.TableRange[1]<=this.TableRange[0]?t.Scale=Number.MAX_VALUE:t.Scale=t.MaxIndex/(this.TableRange[1]-this.TableRange[0]),t.Range[0]=this.TableRange[0],t.Range[1]=this.TableRange[1],isNaN(e))return-1;var r=i(e,t);return r===this.NumberOfColors+l?r=0:r===this.NumberOfColors+u&&(r=this.NumberOfColors-1),r}},{key:"setTableValue",value:function(e,t){if(5===arguments.length&&(t=Array.prototype.slice.call(arguments,1)),e<0)throw new Error("Can't set the table value for negative index ("+e+")");e>=this.NumberOfColors&&new Error("Index "+e+" is greater than the number of colors "+this.NumberOfColors),this.Table[e]=t,0!==e&&e!==this.NumberOfColors-1||this.buildSpecialColors()}}]),e}();t.default=d},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t,r){var n=(0,a.default)(),i=e.getPixelData();e.stats.lastGetPixelDataTime=(0,a.default)()-n;var o=i.length,l=e.minPixelValue,u=0,d=0,s=void 0;if(n=(0,a.default)(),i instanceof Int16Array)if(l<0)for(;d<o;)s=t[i[d++]+-l],r[u++]=s,r[u++]=s,r[u++]=s,r[u++]=255;else for(;d<o;)s=t[i[d++]],r[u++]=s,r[u++]=s,r[u++]=s,r[u++]=255;else if(i instanceof Uint16Array)for(;d<o;)s=t[i[d++]],r[u++]=s,r[u++]=s,r[u++]=s,r[u++]=255;else if(l<0)for(;d<o;)s=t[i[d++]+-l],r[u++]=s,r[u++]=s,r[u++]=s,r[u++]=255;else for(;d<o;)s=t[i[d++]],r[u++]=s,r[u++]=s,r[u++]=s,r[u++]=255;e.stats.lastStoredPixelDataToCanvasImageDataTime=(0,a.default)()-n};var n=r(1),a=function(e){return e&&e.__esModule?e:{default:e}}(n)},function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}();t.Transform=function(){function e(){n(this,e),this.reset()}return a(e,[{key:"reset",value:function(){this.m=[1,0,0,1,0,0]}},{key:"clone",value:function(){var t=new e;return t.m[0]=this.m[0],t.m[1]=this.m[1],t.m[2]=this.m[2],t.m[3]=this.m[3],t.m[4]=this.m[4],t.m[5]=this.m[5],t}},{key:"multiply",value:function(e){var t=this.m[0]*e.m[0]+this.m[2]*e.m[1],r=this.m[1]*e.m[0]+this.m[3]*e.m[1],n=this.m[0]*e.m[2]+this.m[2]*e.m[3],a=this.m[1]*e.m[2]+this.m[3]*e.m[3],i=this.m[0]*e.m[4]+this.m[2]*e.m[5]+this.m[4],o=this.m[1]*e.m[4]+this.m[3]*e.m[5]+this.m[5];this.m[0]=t,this.m[1]=r,this.m[2]=n,this.m[3]=a,this.m[4]=i,this.m[5]=o}},{key:"invert",value:function(){var e=1/(this.m[0]*this.m[3]-this.m[1]*this.m[2]),t=this.m[3]*e,r=-this.m[1]*e,n=-this.m[2]*e,a=this.m[0]*e,i=e*(this.m[2]*this.m[5]-this.m[3]*this.m[4]),o=e*(this.m[1]*this.m[4]-this.m[0]*this.m[5]);this.m[0]=t,this.m[1]=r,this.m[2]=n,this.m[3]=a,this.m[4]=i,this.m[5]=o}},{key:"rotate",value:function(e){var t=Math.cos(e),r=Math.sin(e),n=this.m[0]*t+this.m[2]*r,a=this.m[1]*t+this.m[3]*r,i=this.m[0]*-r+this.m[2]*t,o=this.m[1]*-r+this.m[3]*t;this.m[0]=n,this.m[1]=a,this.m[2]=i,this.m[3]=o}},{key:"translate",value:function(e,t){this.m[4]+=this.m[0]*e+this.m[2]*t,this.m[5]+=this.m[1]*e+this.m[3]*t}},{key:"scale",value:function(e,t){this.m[0]*=e,this.m[1]*=e,this.m[2]*=t,this.m[3]*=t}},{key:"transformPoint",value:function(e,t){var r=e,n=t;return e=r*this.m[0]+n*this.m[2]+this.m[4],t=r*this.m[1]+n*this.m[3]+this.m[5],{x:e,y:t}}}]),e}()},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t,r){return void 0!==e.cachedLut&&e.cachedLut.windowCenter===t.voi.windowCenter&&e.cachedLut.windowWidth===t.voi.windowWidth&&(0,i.default)(e.cachedLut.modalityLUT,t.modalityLUT)&&(0,i.default)(e.cachedLut.voiLUT,t.voiLUT)&&e.cachedLut.invert===t.invert&&!0!==r?e.cachedLut.lutArray:((0,l.default)(e,t.voi.windowWidth,t.voi.windowCenter,t.invert,t.modalityLUT,t.voiLUT),e.cachedLut.windowWidth=t.voi.windowWidth,e.cachedLut.windowCenter=t.voi.windowCenter,e.cachedLut.invert=t.invert,e.cachedLut.voiLUT=t.voiLUT,e.cachedLut.modalityLUT=t.modalityLUT,e.cachedLut.lutArray)};var a=r(44),i=n(a),o=r(18),l=n(o)},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function a(){return{maximumSizeInBytes:p,cacheSizeInBytes:b,numberOfImagesCached:h.length}}function i(){function e(e,t){return e.timeStamp>t.timeStamp?-1:e.timeStamp<t.timeStamp?1:0}if(!(b<=p)){for(h.sort(e);b>p;){var t=h[h.length-1];b-=t.sizeInBytes,delete g[t.imageId],h.pop(),(0,v.default)(c.default,"cornerstonewebgltextureremoved",{imageId:t.imageId})}var r=a();(0,v.default)(c.default,"cornerstonewebgltexturecachefull",r)}}function o(e){if(void 0===e)throw new Error("setMaximumSizeBytes: parameter numBytes must not be undefined");if(void 0===e.toFixed)throw new Error("setMaximumSizeBytes: parameter numBytes must be a number");p=e,i()}function l(e,t){var r=e.imageId;if(void 0===e)throw new Error("putImageTexture: image must not be undefined");if(void 0===r)throw new Error("putImageTexture: imageId must not be undefined");if(void 0===t)throw new Error("putImageTexture: imageTexture must not be undefined");if(!0===Object.prototype.hasOwnProperty.call(g,r))throw new Error("putImageTexture: imageId already in cache");var n={imageId:r,imageTexture:t,timeStamp:new Date,sizeInBytes:t.sizeInBytes};if(g[r]=n,h.push(n),void 0===t.sizeInBytes)throw new Error("putImageTexture: imageTexture.sizeInBytes must not be undefined");if(void 0===t.sizeInBytes.toFixed)throw new Error("putImageTexture: imageTexture.sizeInBytes is not a number");b+=n.sizeInBytes,i()}function u(e){if(void 0===e)throw new Error("getImageTexture: imageId must not be undefined");var t=g[e];if(void 0!==t)return t.timeStamp=new Date,t.imageTexture}function d(e){if(void 0===e)throw new Error("removeImageTexture: imageId must not be undefined");var t=g[e];if(void 0===t)throw new Error("removeImageTexture: imageId must not be undefined");return h.splice(h.indexOf(t),1),b-=t.sizeInBytes,delete g[e],t.imageTexture}function s(){for(;h.length>0;){var e=h.pop();delete g[e.imageId]}b=0}Object.defineProperty(t,"__esModule",{value:!0});var f=r(16),c=n(f),m=r(2),v=n(m),g={},h=[],p=268435456,b=0;t.default={purgeCache:s,getImageTexture:u,putImageTexture:l,removeImageTexture:d,setMaximumSizeBytes:o}},function(e,t,r){"use strict";function n(e,t,r){var n=e.createShader(r);if(e.shaderSource(n,t),e.compileShader(n),!e.getShaderParameter(n,e.COMPILE_STATUS)&&!e.isContextLost()){var a=e.getShaderInfoLog(n);console.error("Could not compile shader:\n"+a)}return n}function a(e,t,r){var n=e.createProgram();if(e.attachShader(n,t),e.attachShader(n,r),e.linkProgram(n),!e.getProgramParameter(n,e.LINK_STATUS)&&!e.isContextLost()){var a=e.getProgramInfoLog(n);console.error("WebGL program filed to link:\n"+a)}return n}Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t,r){return a(e,n(e,t,e.VERTEX_SHADER),n(e,r,e.FRAGMENT_SHADER))}},function(e,t,r){"use strict";function n(e,t){if(void 0===e)throw new Error("renderWebImage: enabledElement parameter must not be undefined");var r=e.image;if(void 0===r)throw new Error("renderWebImage: image must be loaded before it can be drawn");if(e.viewport.voi.windowWidth===e.image.windowWidth&&e.viewport.voi.windowCenter===e.image.windowCenter&&!1===e.viewport.invert){var n=e.canvas.getContext("2d");n.setTransform(1,0,0,1,0,0),n.fillStyle="black",n.fillRect(0,0,e.canvas.width,e.canvas.height),n.imageSmoothingEnabled=!e.viewport.pixelReplication,n.mozImageSmoothingEnabled=n.imageSmoothingEnabled,(0,i.default)(e,n),n.drawImage(r.getImage(),0,0,r.width,r.height,0,0,r.width,r.height)}else(0,o.renderColorImage)(e,t)}Object.defineProperty(t,"__esModule",{value:!0}),t.renderWebImage=n;var a=r(4),i=function(e){return e&&e.__esModule?e:{default:e}}(a),o=r(8)},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function a(e,t){t.width!==e.clientWidth&&(t.width=e.clientWidth,t.style.width=e.clientWidth+"px"),t.height!==e.clientHeight&&(t.height=e.clientHeight,t.style.height=e.clientHeight+"px")}function i(e,t,r){var n=e.viewport.scale,a=(0,g.default)(e),i=Math.round(a.width*n),o=Math.round(a.height*n),l=e.viewport.translation.x,u=e.viewport.translation.y;return i===t&&o<=r||i<=t&&o===r&&0===l&&0===u}function o(e,t,r){var n=e.viewport.scale,a=e.canvas.width,i=e.canvas.height,o=a/t,l=i/r,u=Math.sqrt(o*l);e.viewport.scale=u*n}Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){var r=(0,l.getEnabledElement)(e),n=r.canvas.width,u=r.canvas.height;a(e,r.canvas);var s={element:e};if((0,m.default)(e,"cornerstoneelementresized",s),void 0!==r.image)return!0===t?void(0,d.default)(e):void(i(r,n,u)?(0,d.default)(e):(o(r,n,u),(0,f.default)(e)))};var l=r(0),u=r(37),d=n(u),s=r(5),f=n(s),c=r(2),m=n(c),v=r(38),g=n(v)},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t=(0,a.getEnabledElement)(e),r=(0,u.default)(t),n=t.canvas.height/r.height,i=t.canvas.width/r.width;t.viewport.scale=Math.min(i,n),t.viewport.translation.x=0,t.viewport.translation.y=0,(0,o.default)(e)};var a=r(0),i=r(5),o=n(i),l=r(38),u=n(l)},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return 0===e.viewport.rotation||180===e.viewport.rotation?{width:e.image.width,height:e.image.height}:{width:e.image.height,height:e.image.width}}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t,r,a,i){if(void 0===e)throw new Error("getStoredPixels: parameter element must not be undefined");t=Math.round(t),r=Math.round(r);for(var o=(0,n.getEnabledElement)(e),l=[],u=0,d=o.image.getPixelData(),s=0;s<i;s++)for(var f=0;f<a;f++){var c=(s+r)*o.image.columns+(f+t);l[u++]=d[c]}return l};var n=r(0)},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function a(e){if(void 0===e)throw new Error("setMaximumSizeBytes: parameter numBytes must not be undefined");if(void 0===e.toFixed)throw new Error("setMaximumSizeBytes: parameter numBytes must be a number");p=e,(0,h.default)(v.default,"cornerstoneimagecachemaximumsizechanged"),i()}function i(){function e(e,t){return e.timeStamp>t.timeStamp?-1:e.timeStamp<t.timeStamp?1:0}if(!(b<=p)){for(y.sort(e);b>p;){var t=y[y.length-1],r=t.imageId;u(r),(0,h.default)(v.default,"cornerstoneimagecachepromiseremoved",{imageId:r})}var n=d();(0,h.default)(v.default,"cornerstoneimagecachefull",n)}}function o(e,t){if(void 0===e)throw new Error("putImageLoadObject: imageId must not be undefined");if(void 0===t.promise)throw new Error("putImageLoadObject: imageLoadObject.promise must not be undefined");if(!0===w.hasOwnProperty(e))throw new Error("putImageLoadObject: imageId already in cache");if(t.cancelFn&&"function"!=typeof t.cancelFn)throw new Error("putImageLoadObject: imageLoadObject.cancelFn must be a function");var r={loaded:!1,imageId:e,sharedCacheKey:void 0,imageLoadObject:t,timeStamp:Date.now(),sizeInBytes:0};w[e]=r,y.push(r),t.promise.then(function(e){if(-1!==y.indexOf(r)){if(r.loaded=!0,r.image=e,void 0===e.sizeInBytes)throw new Error("putImageLoadObject: image.sizeInBytes must not be undefined");if(void 0===e.sizeInBytes.toFixed)throw new Error("putImageLoadObject: image.sizeInBytes is not a number");r.sizeInBytes=e.sizeInBytes,b+=r.sizeInBytes;var t={action:"addImage",image:r};(0,h.default)(v.default,"cornerstoneimagecachechanged",t),r.sharedCacheKey=e.sharedCacheKey,i()}},function(){var t=w[e];y.splice(y.indexOf(t),1),delete w[e]})}function l(e){if(void 0===e)throw new Error("getImageLoadObject: imageId must not be undefined");var t=w[e];if(void 0!==t)return t.timeStamp=Date.now(),t.imageLoadObject}function u(e){if(void 0===e)throw new Error("removeImageLoadObject: imageId must not be undefined");var t=w[e];if(void 0===t)throw new Error("removeImageLoadObject: imageId was not present in imageCache");y.splice(y.indexOf(t),1),b-=t.sizeInBytes;var r={action:"deleteImage",image:t};(0,h.default)(v.default,"cornerstoneimagecachechanged",r),s(t.imageLoadObject),delete w[e]}function d(){return{maximumSizeInBytes:p,cacheSizeInBytes:b,numberOfImagesCached:y.length}}function s(e){e.promise.then(function(){e.decache&&e.decache()},function(){e.decache&&e.decache()})}function f(){for(;y.length>0;){u(y[0].imageId)}}function c(e,t){var r=w[e];r&&r.imageLoadObject.promise.then(function(e){var n=t-e.sizeInBytes;e.sizeInBytes=t,r.sizeInBytes=t,b+=n;var a={action:"changeImageSize",image:e};(0,h.default)(v.default,"cornerstoneimagecachechanged",a)})}Object.defineProperty(t,"__esModule",{value:!0}),t.cachedImages=void 0,t.setMaximumSizeBytes=a,t.putImageLoadObject=o,t.getImageLoadObject=l,t.removeImageLoadObject=u,t.getCacheInfo=d,t.purgeCache=f,t.changeImageIdCacheSize=c;var m=r(16),v=n(m),g=r(2),h=n(g),p=1073741824,b=0,w={},y=t.cachedImages=[];t.default={imageCache:w,cachedImages:y,setMaximumSizeBytes:a,putImageLoadObject:o,getImageLoadObject:l,removeImageLoadObject:u,getCacheInfo:d,purgeCache:f,changeImageIdCacheSize:c}},function(e,t,r){"use strict";function n(e,t){if(e.color&&!e.falseColor)throw new Error("Color transforms are not implemented yet");var r=e.minPixelValue,n=0,a=0,o=e.width*e.height,l=e.origPixelData||e.getPixelData(),u=new Uint8Array(4*o),d=void 0,s=void 0;if(e.color=!0,e.falseColor=!0,e.origPixelData=l,t instanceof i.default.LookupTable)for(t.build();a<o;)d=l[a++],s=t.mapValue(d),u[n++]=s[0],u[n++]=s[1],u[n++]=s[2],u[n++]=s[3];else if(r<0)for(;a<o;)d=l[a++],u[n++]=t[d+-r][0],u[n++]=t[d+-r][1],u[n++]=t[d+-r][2],u[n++]=t[d+-r][3];else for(;a<o;)d=l[a++],u[n++]=t[d][0],u[n++]=t[d][1],u[n++]=t[d][2],u[n++]=t[d][3];e.rgba=!0,e.cachedLut=void 0,e.render=void 0,e.slope=1,e.intercept=0,e.minPixelValue=0,e.maxPixelValue=255,e.windowWidth=255,e.windowCenter=128,e.getPixelData=function(){return u}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=n;var a=r(7),i=function(e){return e&&e.__esModule?e:{default:e}}(a)},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var a=r(6);Object.defineProperty(t,"drawImage",{enumerable:!0,get:function(){return n(a).default}});var i=r(18);Object.defineProperty(t,"generateLut",{enumerable:!0,get:function(){return n(i).default}});var o=r(3);Object.defineProperty(t,"getDefaultViewport",{enumerable:!0,get:function(){return n(o).default}});var l=r(19);Object.defineProperty(t,"requestAnimationFrame",{enumerable:!0,get:function(){return n(l).default}});var u=r(20);Object.defineProperty(t,"storedPixelDataToCanvasImageData",{enumerable:!0,get:function(){return n(u).default}});var d=r(21);Object.defineProperty(t,"storedColorPixelDataToCanvasImageData",{enumerable:!0,get:function(){return n(d).default}});var s=r(22);Object.defineProperty(t,"storedPixelDataToCanvasImageDataColorLUT",{enumerable:!0,get:function(){return n(s).default}});var f=r(23);Object.defineProperty(t,"storedPixelDataToCanvasImageDataPseudocolorLUT",{enumerable:!0,get:function(){return n(f).default}});var c=r(43);Object.defineProperty(t,"internal",{enumerable:!0,get:function(){return n(c).default}});var m=r(10);Object.defineProperty(t,"renderLabelMapImage",{enumerable:!0,get:function(){return m.renderLabelMapImage}});var v=r(14);Object.defineProperty(t,"renderPseudoColorImage",{enumerable:!0,get:function(){return v.renderPseudoColorImage}});var g=r(8);Object.defineProperty(t,"renderColorImage",{enumerable:!0,get:function(){return g.renderColorImage}});var h=r(17);Object.defineProperty(t,"renderGrayscaleImage",{enumerable:!0,get:function(){return h.renderGrayscaleImage}});var p=r(35);Object.defineProperty(t,"renderWebImage",{enumerable:!0,get:function(){return p.renderWebImage}});var b=r(55);Object.defineProperty(t,"canvasToPixel",{enumerable:!0,get:function(){return n(b).default}});var w=r(56);Object.defineProperty(t,"disable",{enumerable:!0,get:function(){return n(w).default}});var y=r(57);Object.defineProperty(t,"displayImage",{enumerable:!0,get:function(){return n(y).default}});var I=r(59);Object.defineProperty(t,"draw",{enumerable:!0,get:function(){return n(I).default}});var _=r(60);Object.defineProperty(t,"drawInvalidated",{enumerable:!0,get:function(){return n(_).default}});var P=r(61);Object.defineProperty(t,"enable",{enumerable:!0,get:function(){return n(P).default}});var E=r(65);Object.defineProperty(t,"getElementData",{enumerable:!0,get:function(){return E.getElementData}}),Object.defineProperty(t,"removeElementData",{enumerable:!0,get:function(){return E.removeElementData}});var C=r(0);Object.defineProperty(t,"getEnabledElement",{enumerable:!0,get:function(){return C.getEnabledElement}}),Object.defineProperty(t,"addEnabledElement",{enumerable:!0,get:function(){return C.addEnabledElement}}),Object.defineProperty(t,"getEnabledElementsByImageId",{enumerable:!0,get:function(){return C.getEnabledElementsByImageId}}),Object.defineProperty(t,"getEnabledElements",{enumerable:!0,get:function(){return C.getEnabledElements}});var x=r(25);Object.defineProperty(t,"addLayer",{enumerable:!0,get:function(){return x.addLayer}}),Object.defineProperty(t,"removeLayer",{enumerable:!0,get:function(){return x.removeLayer}}),Object.defineProperty(t,"getLayer",{enumerable:!0,get:function(){return x.getLayer}}),Object.defineProperty(t,"getLayers",{enumerable:!0,get:function(){return x.getLayers}}),Object.defineProperty(t,"getVisibleLayers",{enumerable:!0,get:function(){return x.getVisibleLayers}}),Object.defineProperty(t,"setActiveLayer",{enumerable:!0,get:function(){return x.setActiveLayer}}),Object.defineProperty(t,"getActiveLayer",{enumerable:!0,get:function(){return x.getActiveLayer}}),Object.defineProperty(t,"setLayerImage",{enumerable:!0,get:function(){return x.setLayerImage}});var T=r(37);Object.defineProperty(t,"fitToWindow",{enumerable:!0,get:function(){return n(T).default}});var L=r(66);Object.defineProperty(t,"getDefaultViewportForImage",{enumerable:!0,get:function(){return n(L).default}});var O=r(67);Object.defineProperty(t,"getImage",{enumerable:!0,get:function(){return n(O).default}});var M=r(68);Object.defineProperty(t,"getPixels",{enumerable:!0,get:function(){return n(M).default}});var j=r(39);Object.defineProperty(t,"getStoredPixels",{enumerable:!0,get:function(){return n(j).default}});var R=r(69);Object.defineProperty(t,"getViewport",{enumerable:!0,get:function(){return n(R).default}});var D=r(70);Object.defineProperty(t,"loadImage",{enumerable:!0,get:function(){return D.loadImage}}),Object.defineProperty(t,"loadAndCacheImage",{enumerable:!0,get:function(){return D.loadAndCacheImage}}),Object.defineProperty(t,"registerImageLoader",{enumerable:!0,get:function(){return D.registerImageLoader}}),Object.defineProperty(t,"registerUnknownImageLoader",{enumerable:!0,get:function(){return D.registerUnknownImageLoader}});var S=r(71);Object.defineProperty(t,"invalidate",{enumerable:!0,get:function(){return n(S).default}});var A=r(72);Object.defineProperty(t,"invalidateImageId",{enumerable:!0,get:function(){return n(A).default}});var U=r(73);Object.defineProperty(t,"pageToPixel",{enumerable:!0,get:function(){return n(U).default}});var V=r(74);Object.defineProperty(t,"pixelToCanvas",{enumerable:!0,get:function(){return n(V).default}});var B=r(75);Object.defineProperty(t,"reset",{enumerable:!0,get:function(){return n(B).default}});var F=r(36);Object.defineProperty(t,"resize",{enumerable:!0,get:function(){return n(F).default}});var k=r(4);Object.defineProperty(t,"setToPixelCoordinateSystem",{enumerable:!0,get:function(){return n(k).default}});var z=r(76);Object.defineProperty(t,"setViewport",{enumerable:!0,get:function(){return n(z).default}});var W=r(5);Object.defineProperty(t,"updateImage",{enumerable:!0,get:function(){return n(W).default}});var N=r(41);Object.defineProperty(t,"pixelDataToFalseColorData",{enumerable:!0,get:function(){return n(N).default}});var G=r(77);Object.defineProperty(t,"rendering",{enumerable:!0,get:function(){return n(G).default}});var H=r(40);Object.defineProperty(t,"imageCache",{enumerable:!0,get:function(){return n(H).default}});var X=r(78);Object.defineProperty(t,"metaData",{enumerable:!0,get:function(){return n(X).default}});var q=r(15);Object.defineProperty(t,"webGL",{enumerable:!0,get:function(){return n(q).default}});var Y=r(7);Object.defineProperty(t,"colors",{enumerable:!0,get:function(){return n(Y).default}});var K=r(79);Object.defineProperty(t,"convertImageToFalseColorImage",{enumerable:!0,get:function(){return K.convertImageToFalseColorImage}}),Object.defineProperty(t,"convertToFalseColorImage",{enumerable:!0,get:function(){return K.convertToFalseColorImage}}),Object.defineProperty(t,"restoreImage",{enumerable:!0,get:function(){return K.restoreImage}});var J=r(16);Object.defineProperty(t,"events",{enumerable:!0,get:function(){return n(J).default}});var Q=r(2);Object.defineProperty(t,"triggerEvent",{enumerable:!0,get:function(){return n(Q).default}})},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var a=r(6),i=n(a),o=r(18),l=n(o),u=r(3),d=n(u),s=r(19),f=n(s),c=r(20),m=n(c),v=r(30),g=n(v),h=r(21),p=n(h),b=r(22),w=n(b),y=r(23),I=n(y),_=r(9),P=n(_),E=r(24),C=n(E),x=r(31);t.default={drawImage:i.default,generateLut:l.default,getDefaultViewport:d.default,requestAnimationFrame:f.default,storedPixelDataToCanvasImageData:m.default,storedPixelDataToCanvasImageDataRGBA:g.default,storedPixelDataToCanvasImageDataColorLUT:w.default,storedPixelDataToCanvasImageDataPseudocolorLUT:I.default,storedColorPixelDataToCanvasImageData:p.default,getTransform:P.default,calculateTransform:C.default,Transform:x.Transform}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){return!e&&!t||!(!e||!t)&&e.id===t.id}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t,r,n,i){var o=e.maxPixelValue,l=e.minPixelValue,u=Math.min(l,0);if(void 0===e.cachedLut){var d=o-u+1;e.cachedLut={},e.cachedLut.lutArray=new Uint8ClampedArray(d)}var s=e.cachedLut.lutArray,f=(0,a.default)(t,r,i);if(!0===n)for(var c=l;c<=o;c++)s[c+-u]=255-f(c);else for(var m=l;m<=o;m++)s[m+-u]=f(m);return s};var n=r(27),a=function(e){return e&&e.__esModule?e:{default:e}}(n)},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t,r){var n=(0,a.default)(),i=e.getPixelData();e.stats.lastGetPixelDataTime=(0,a.default)()-n;var o=e.minPixelValue,l=0,u=0,d=i.length;if(n=(0,a.default)(),o<0)for(;u<d;)r[l++]=t[i[u++]+-o],r[l++]=t[i[u++]+-o],r[l++]=t[i[u++]+-o],r[l++]=i[u++];else for(;u<d;)r[l++]=t[i[u++]],r[l++]=t[i[u++]],r[l++]=t[i[u++]],r[l++]=i[u++];e.stats.lastStoredPixelDataToCanvasImageDataTime=(0,a.default)()-n};var n=r(1),a=function(e){return e&&e.__esModule?e:{default:e}}(n)},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function a(){return C}function i(){for(var e in w.shaders){var t=w.shaders[e];t.attributes={},t.uniforms={},t.vert=y.vertexShader,t.program=(0,E.default)(x,t.vert,t.frag),t.attributes.texCoordLocation=x.getAttribLocation(t.program,"a_texCoord"),x.enableVertexAttribArray(t.attributes.texCoordLocation),t.attributes.positionLocation=x.getAttribLocation(t.program,"a_position"),x.enableVertexAttribArray(t.attributes.positionLocation),t.uniforms.resolutionLocation=x.getUniformLocation(t.program,"u_resolution")}}function o(){!0!==O&&s(C)&&(g(),i(),t.isWebGLInitialized=O=!0)}function l(e,t,r){e.bufferData(e.ARRAY_BUFFER,new Float32Array([t,r,0,r,t,0,0,0]),e.STATIC_DRAW)}function u(e){e.preventDefault(),console.warn("WebGL Context Lost!")}function d(e){e.preventDefault(),t.isWebGLInitialized=O=!1,_.default.purgeCache(),o()}function s(e){x=null;try{var t={preserveDrawingBuffer:!0};x=e.getContext("webgl",t)||e.getContext("experimental-webgl",t),e.removeEventListener("webglcontextlost",u,!1),e.addEventListener("webglcontextlost",u,!1),e.removeEventListener("webglcontextrestored",d,!1),e.addEventListener("webglcontextrestored",d,!1)}catch(e){throw new Error("Error creating WebGL context")}return x||(console.error("Unable to initialize WebGL. Your browser may not support it."),x=null),x}function f(e){if(e.color)return"rgb";var t="int";return e.minPixelValue>=0&&(t="u"+t),e.maxPixelValue>255?t+="16":t+="8",t}function c(e){var t=f(e);return w.shaders.hasOwnProperty(t)?w.shaders[t]:w.shaders.rgb}function m(e){var t={uint8:x.LUMINANCE,int8:x.LUMINANCE_ALPHA,uint16:x.LUMINANCE_ALPHA,int16:x.RGB,rgb:x.RGB},r={int8:1,uint16:2,int16:3,rgb:3},n=f(e),a=t[n],i=x.createTexture();x.bindTexture(x.TEXTURE_2D,i),x.texParameteri(x.TEXTURE_2D,x.TEXTURE_MIN_FILTER,x.NEAREST),x.texParameteri(x.TEXTURE_2D,x.TEXTURE_MAG_FILTER,x.NEAREST),x.texParameteri(x.TEXTURE_2D,x.TEXTURE_WRAP_S,x.CLAMP_TO_EDGE),x.texParameteri(x.TEXTURE_2D,x.TEXTURE_WRAP_T,x.CLAMP_TO_EDGE),x.pixelStorei(x.UNPACK_ALIGNMENT,1);var o=w.dataUtilities[n].storedPixelDataToImageData(e,e.width,e.height);return x.texImage2D(x.TEXTURE_2D,0,a,e.width,e.height,0,a,x.UNSIGNED_BYTE,o),{texture:i,sizeInBytes:e.width*e.height*r[n]}}function v(e){var t=_.default.getImageTexture(e.imageId);return t||(t=m(e),_.default.putImageTexture(e,t)),t.texture}function g(){L=x.createBuffer(),x.bindBuffer(x.ARRAY_BUFFER,L),x.bufferData(x.ARRAY_BUFFER,new Float32Array([1,1,0,1,1,0,0,0]),x.STATIC_DRAW),T=x.createBuffer(),x.bindBuffer(x.ARRAY_BUFFER,T),x.bufferData(x.ARRAY_BUFFER,new Float32Array([1,1,0,1,1,0,0,0]),x.STATIC_DRAW)}function h(e,t,r,n,a){x.clearColor(1,0,0,1),x.viewport(0,0,n,a),x.clear(x.COLOR_BUFFER_BIT|x.DEPTH_BUFFER_BIT),x.useProgram(e.program),x.bindBuffer(x.ARRAY_BUFFER,T),x.vertexAttribPointer(e.attributes.texCoordLocation,2,x.FLOAT,!1,0,0),x.bindBuffer(x.ARRAY_BUFFER,L),x.vertexAttribPointer(e.attributes.positionLocation,2,x.FLOAT,!1,0,0);for(var i in t){var o=x.getUniformLocation(e.program,i);if(o){var u=t[i],d=u.type,s=u.value;"i"===d?x.uniform1i(o,s):"f"===d?x.uniform1f(o,s):"2f"===d&&x.uniform2f(o,s[0],s[1])}}l(x,n,a),x.activeTexture(x.TEXTURE0),x.bindTexture(x.TEXTURE_2D,r),x.drawArrays(x.TRIANGLE_STRIP,0,4)}function p(e){var t=e.image;C.width=t.width,C.height=t.height;var r=e.viewport,n=c(t),a=v(t);return h(n,{u_resolution:{type:"2f",value:[t.width,t.height]},wc:{type:"f",value:r.voi.windowCenter},ww:{type:"f",value:r.voi.windowWidth},slope:{type:"f",value:t.slope},intercept:{type:"f",value:t.intercept},minPixelValue:{type:"f",value:t.minPixelValue},invert:{type:"i",value:r.invert?1:0}},a,t.width,t.height),C}function b(){var e={failIfMajorPerformanceCaveat:!0};try{var t=document.createElement("canvas");return Boolean(window.WebGLRenderingContext)&&(t.getContext("webgl",e)||t.getContext("experimental-webgl",e))}catch(e){return!1}}Object.defineProperty(t,"__esModule",{value:!0}),t.isWebGLInitialized=void 0,t.getRenderCanvas=a,t.initRenderer=o,t.render=p,t.isWebGLAvailable=b;var w=r(48),y=r(54),I=r(33),_=n(I),P=r(34),E=n(P),C=document.createElement("canvas"),x=void 0,T=void 0,L=void 0,O=!1;t.isWebGLInitialized=O},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.dataUtilities=t.shaders=void 0;var n=r(49),a=r(50),i=r(51),o=r(52),l=r(53),u={int16:n.int16Shader,int8:a.int8Shader,rgb:i.rgbShader,uint16:o.uint16Shader,uint8:l.uint8Shader},d={int16:n.int16DataUtilities,int8:a.int8DataUtilities,rgb:i.rgbDataUtilities,uint16:o.uint16DataUtilities,uint8:l.uint8DataUtilities};t.shaders=u,t.dataUtilities=d},function(e,t,r){"use strict";function n(e){for(var t=e.getPixelData(),r=new Uint8Array(e.width*e.height*3),n=0,a=0;a<t.length;a++){var i=Math.abs(t[a]);r[n++]=255&i,r[n++]=i>>8,r[n++]=t[a]<0?0:1}return r}Object.defineProperty(t,"__esModule",{value:!0});var a={};t.int16DataUtilities={storedPixelDataToImageData:n};a.frag="precision mediump float;uniform sampler2D u_image;uniform float ww;uniform float wc;uniform float slope;uniform float intercept;uniform int invert;varying vec2 v_texCoord;void main() {vec4 color = texture2D(u_image, v_texCoord);float intensity = color.r*256.0 + color.g*65536.0;if (color.b == 0.0)intensity = -intensity;intensity = intensity * slope + intercept;float center0 = wc - 0.5;float width0 = max(ww, 1.0);intensity = (intensity - center0) / width0 + 0.5;intensity = clamp(intensity, 0.0, 1.0);gl_FragColor = vec4(intensity, intensity, intensity, 1.0);if (invert == 1)gl_FragColor.rgb = 1.0 - gl_FragColor.rgb;}",t.int16Shader=a},function(e,t,r){"use strict";function n(e){for(var t=e.getPixelData(),r=new Uint8Array(e.width*e.height*2),n=0,a=0;a<t.length;a++)r[n++]=t[a],r[n++]=t[a]<0?0:1;return r}Object.defineProperty(t,"__esModule",{value:!0});var a={};t.int8DataUtilities={storedPixelDataToImageData:n};a.frag="precision mediump float;uniform sampler2D u_image;uniform float ww;uniform float wc;uniform float slope;uniform float intercept;uniform int invert;varying vec2 v_texCoord;void main() {vec4 color = texture2D(u_image, v_texCoord);float intensity = color.r*256.;if (color.a == 0.0)intensity = -intensity;intensity = intensity * slope + intercept;float center0 = wc - 0.5;float width0 = max(ww, 1.0);intensity = (intensity - center0) / width0 + 0.5;intensity = clamp(intensity, 0.0, 1.0);gl_FragColor = vec4(intensity, intensity, intensity, 1.0);if (invert == 1)gl_FragColor.rgb = 1.0 - gl_FragColor.rgb;}",t.int8Shader=a},function(e,t,r){"use strict";function n(e){var t=e.minPixelValue,r=0,n=0,a=e.width*e.height*4,i=e.width*e.height*3,o=e.getPixelData(),l=new Uint8Array(i);if(t<0)for(;n<a;)l[r++]=o[n++]+-t,l[r++]=o[n++]+-t,l[r++]=o[n++]+-t,n+=1;else for(;n<a;)l[r++]=o[n++],l[r++]=o[n++],l[r++]=o[n++],n+=1;return l}Object.defineProperty(t,"__esModule",{value:!0});var a={};t.rgbDataUtilities={storedPixelDataToImageData:n};a.frag="precision mediump float;uniform sampler2D u_image;uniform float ww;uniform float wc;uniform float slope;uniform float intercept;uniform float minPixelValue;uniform int invert;varying vec2 v_texCoord;void main() {vec3 color = texture2D(u_image, v_texCoord).xyz;color = color * 256.0 * slope + intercept;float center0 = wc - 0.5 - minPixelValue;float width0 = max(ww, 1.0);color = (color - center0) / width0 + 0.5;gl_FragColor = vec4(color, 1);if (invert == 1)gl_FragColor.rgb = 1. - gl_FragColor.rgb;}",t.rgbShader=a},function(e,t,r){"use strict";function n(e){for(var t=e.getPixelData(),r=new Uint8Array(e.width*e.height*2),n=0,a=0;a<t.length;a++){var i=t[a];r[n++]=255&i,r[n++]=i>>8}return r}Object.defineProperty(t,"__esModule",{value:!0});var a={};t.uint16DataUtilities={storedPixelDataToImageData:n};a.frag="precision mediump float;uniform sampler2D u_image;uniform float ww;uniform float wc;uniform float slope;uniform float intercept;uniform int invert;varying vec2 v_texCoord;void main() {vec4 color = texture2D(u_image, v_texCoord);float intensity = color.r*256.0 + color.a*65536.0;intensity = intensity * slope + intercept;float center0 = wc - 0.5;float width0 = max(ww, 1.0);intensity = (intensity - center0) / width0 + 0.5;intensity = clamp(intensity, 0.0, 1.0);gl_FragColor = vec4(intensity, intensity, intensity, 1.0);if (invert == 1)gl_FragColor.rgb = 1.0 - gl_FragColor.rgb;}",t.uint16Shader=a},function(e,t,r){"use strict";function n(e){return e.getPixelData()}Object.defineProperty(t,"__esModule",{value:!0});var a={};t.uint8DataUtilities={storedPixelDataToImageData:n};a.frag="precision mediump float;uniform sampler2D u_image;uniform float ww;uniform float wc;uniform float slope;uniform float intercept;uniform int invert;varying vec2 v_texCoord;void main() {vec4 color = texture2D(u_image, v_texCoord);float intensity = color.r*256.0;intensity = intensity * slope + intercept;float center0 = wc - 0.5;float width0 = max(ww, 1.0);intensity = (intensity - center0) / width0 + 0.5;intensity = clamp(intensity, 0.0, 1.0);gl_FragColor = vec4(intensity, intensity, intensity, 1.0);if (invert == 1)gl_FragColor.rgb = 1.0 - gl_FragColor.rgb;}",t.uint8Shader=a},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.vertexShader="attribute vec2 a_position;attribute vec2 a_texCoord;uniform vec2 u_resolution;varying vec2 v_texCoord;void main() {vec2 zeroToOne = a_position / u_resolution;vec2 zeroToTwo = zeroToOne * 2.0;vec2 clipSpace = zeroToTwo - 1.0;gl_Position = vec4(clipSpace * vec2(1, -1), 0, 1);v_texCoord = a_texCoord;}"},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){var r=(0,n.getEnabledElement)(e),a=(0,i.default)(r);return a.invert(),a.transformPoint(t.x,t.y)};var n=r(0),a=r(9),i=function(e){return e&&e.__esModule?e:{default:e}}(a)},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){if(void 0===e)throw new Error("disable: element must not be undefined");for(var t=(0,n.getEnabledElements)(),r=0;r<t.length;r++)if(t[r].element===e){var a={element:e};(0,i.default)(e,"cornerstoneelementdisabled",a),t[r].element.removeChild(t[r].canvas),t[r].canvas=void 0,t.splice(r,1);break}};var n=r(0),a=r(2),i=function(e){return e&&e.__esModule?e:{default:e}}(a)},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t,r){if(void 0===e)throw new Error("displayImage: parameter element must not be undefined");if(void 0===t)throw new Error("displayImage: parameter image must not be undefined");var n=(0,a.getEnabledElement)(e),i=n.image;if(n.image=t,n.layers&&n.layers.length&&(0,f.setLayerImage)(e,t),void 0===n.viewport&&(n.viewport=(0,o.default)(n.canvas,t)),r)for(var l in r)null!==r[l]&&(n.viewport[l]=r[l]);var d=void 0;if(void 0!==n.lastImageTimeStamp){d=(1e3/((0,s.default)()-n.lastImageTimeStamp)).toFixed()}n.lastImageTimeStamp=(0,s.default)();var c={viewport:n.viewport,element:n.element,image:n.image,oldImage:i,enabledElement:n,frameRate:d};(0,m.default)(n.element,"cornerstonenewimage",c),(0,u.default)(e)};var a=r(0),i=r(3),o=n(i),l=r(5),u=n(l),d=r(1),s=n(d),f=r(25),c=r(2),m=n(c)},function(e,t,r){"use strict";function n(){return Math.floor(65536*(1+Math.random())).toString(16).substring(1)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){return n()+n()+"-"+n()+"-"+n()+"-"+n()+"-"+n()+n()+n()}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t=(0,n.getEnabledElement)(e);if(void 0===t.image)throw new Error("draw: image has not been loaded yet");(0,i.default)(t)};var n=r(0),a=r(6),i=function(e){return e&&e.__esModule?e:{default:e}}(a)},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){for(var e=(0,n.getEnabledElements)(),t=0;t<e.length;t++){var r=e[t];!0===r.invalid&&(0,i.default)(r,!0)}};var n=r(0),a=r(6),i=function(e){return e&&e.__esModule?e:{default:e}}(a)},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function a(e){return void 0!==e.image||e.layers.length>0}Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){function r(e){if(void 0!==o.canvas){var t={enabledElement:o,timestamp:e};(0,g.default)(o.element,"cornerstoneprerender",t),o.needsRedraw&&a(o)&&(0,d.default)(o,o.invalid),(0,f.default)(r)}}if(void 0===e)throw new Error("enable: parameter element cannot be undefined");t&&t.renderer&&"webgl"===t.renderer.toLowerCase()&&(m.default.renderer.isWebGLAvailable()?(m.default.renderer.initRenderer(),t.renderer="webgl"):(console.error("WebGL not available, falling back to Canvas renderer"),delete t.renderer));var n=(0,p.default)(e),o={element:e,canvas:n,image:void 0,invalid:!1,needsRedraw:!0,options:t,layers:[],data:{},renderingTools:{}};(0,i.addEnabledElement)(o),(0,l.default)(e,!0),r()};var i=r(0),o=r(36),l=n(o),u=r(62),d=n(u),s=r(19),f=n(s),c=r(15),m=n(c),v=r(2),g=n(v),h=r(64),p=n(h)},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){var r=e.image,n=e.element,a=e.layers||[];if(e.canvas&&(e.image||a.length)){var o=(0,i.default)();if(r.stats={lastGetPixelDataTime:-1,lastStoredPixelDataToCanvasImageDataTime:-1,lastPutImageDataTime:-1,lastRenderTime:-1,lastLutGenerateTime:-1},a&&a.length)(0,l.default)(e,t);else if(r){var c=r.render;c||(c=e.viewport.colormap&&""!==e.viewport.colormap&&!0===e.image.labelmap?f.renderLabelMapImage:e.viewport.colormap&&""!==e.viewport.colormap?s.renderPseudoColorImage:r.color?u.renderColorImage:d.renderGrayscaleImage),c(e,t)}var v=(0,i.default)()-o,g={viewport:e.viewport,element:n,image:r,enabledElement:e,canvasContext:e.canvas.getContext("2d"),renderTimeInMs:v};r.stats.lastRenderTime=v,e.invalid=!1,e.needsRedraw=!1,(0,m.default)(n,"cornerstoneimagerendered",g)}};var a=r(1),i=n(a),o=r(63),l=n(o),u=r(8),d=r(17),s=r(14),f=r(10),c=r(2),m=n(c)},function(e,t,r){"use strict";function n(e,t){return m[t]/m[e]}function a(e,t){e.forEach(function(e){if(e!==t&&e.viewport&&t.viewport){m[e.layerId]||(m[e.layerId]=e.viewport.scale);var r=n(t.layerId,e.layerId);e.viewport.scale=t.viewport.scale*r,e.viewport.rotation=t.viewport.rotation,e.viewport.translation={x:t.viewport.translation.x/r,y:t.viewport.translation.y/r},e.viewport.hflip=t.viewport.hflip,e.viewport.vflip=t.viewport.vflip}})}function i(e,t,r){t.forEach(function(t,n){if(t.image){e.save(),t.canvas=e.canvas,(0,c.default)(t,e);var a=t.viewport.colormap||t.options.colormap,i=t.viewport.labelmap,o=t.invalid||r;if(a&&""!==a&&!0===i)(0,s.addLabelMapLayer)(t,o);else if(a&&""!==a)(0,d.addPseudoColorLayer)(t,o);else if(!0===t.image.color)(0,u.addColorLayer)(t,o);else{var f=0===n;(0,l.addGrayscaleLayer)(t,o,f)}t.options&&t.options.opacity?e.globalAlpha=t.options.opacity:e.globalAlpha=1,t.options&&t.options.fillStyle&&(e.fillStyle=t.options.fillStyle),e.imageSmoothingEnabled=!t.viewport.pixelReplication,e.mozImageSmoothingEnabled=e.imageSmoothingEnabled;var m=t.image,v=m.width,g=m.height;e.drawImage(t.canvas,0,0,v,g,0,0,v,g),e.restore(),t.invalid=!1}})}Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){var r=e.element,n=(0,o.getLayers)(r),l=(0,o.getActiveLayer)(r),u=(0,o.getVisibleLayers)(r),d=!e.lastSyncViewportsState&&e.syncViewports;e.lastSyncViewportsState=e.syncViewports,d&&n.forEach(function(e){e.viewport&&(m[e.layerId]=e.viewport.scale)}),!0===e.syncViewports&&a(u,l);var s=e.canvas.getContext("2d");s.setTransform(1,0,0,1,0,0),s.fillStyle="black",s.fillRect(0,0,e.canvas.width,e.canvas.height),i(s,u,t)};var o=r(25),l=r(17),u=r(8),d=r(14),s=r(10),f=r(4),c=function(e){return e&&e.__esModule?e:{default:e}}(f),m={}},function(e,t,r){"use strict";function n(e){var t=document.createElement("canvas");return t.style.display="block",t.classList.add(i),e.appendChild(t),t}function a(e){var t="canvas."+i;return e.querySelector(t)||n(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=a;var i="cornerstone-canvas"},function(e,t,r){"use strict";function n(e,t){var r=(0,i.getEnabledElement)(e);return!1===r.data.hasOwnProperty(t)&&(r.data[t]={}),r.data[t]}function a(e,t){delete(0,i.getEnabledElement)(e).data[t]}Object.defineProperty(t,"__esModule",{value:!0}),t.getElementData=n,t.removeElementData=a;var i=r(0)},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){var r=(0,n.getEnabledElement)(e);return(0,i.default)(r.canvas,t)};var n=r(0),a=r(3),i=function(e){return e&&e.__esModule?e:{default:e}}(a)},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return(0,n.getEnabledElement)(e).image};var n=r(0)},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t,r,n,i){var l=(0,o.default)(e,t,r,n,i),d=(0,a.getEnabledElement)(e),s=(0,u.default)(d.image.slope,d.image.intercept,d.viewport.modalityLUT);return l.map(s)};var a=r(0),i=r(39),o=n(i),l=r(26),u=n(l)},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t=(0,n.getEnabledElement)(e),r=t.viewport;if(void 0!==r)return Object.assign({},r)};var n=r(0)},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function a(e,t){var r=e.indexOf(":"),n=e.substring(0,r),a=v[n];if(void 0===a||null===a){if(void 0!==g)return g(e);throw new Error("loadImageFromImageLoader: no image loader for imageId")}var i=a(e,t);return i.promise.then(function(e){(0,m.default)(f.default,"cornerstoneimageloaded",{image:e})},function(t){var r={imageId:e,error:t};(0,m.default)(f.default,"cornerstoneimageloadfailed",r)}),i}function i(e,t){if(void 0===e)throw new Error("loadImage: parameter imageId must not be undefined");var r=(0,d.getImageLoadObject)(e);return void 0!==r?r.promise:a(e,t).promise}function o(e,t){if(void 0===e)throw new Error("loadAndCacheImage: parameter imageId must not be undefined");var r=(0,d.getImageLoadObject)(e);return void 0!==r?r.promise:(r=a(e,t),(0,d.putImageLoadObject)(e,r),r.promise)}function l(e,t){v[e]=t}function u(e){var t=g;return g=e,t}Object.defineProperty(t,"__esModule",{value:!0}),t.loadImage=i,t.loadAndCacheImage=o,t.registerImageLoader=l,t.registerUnknownImageLoader=u;var d=r(40),s=r(16),f=n(s),c=r(2),m=n(c),v={},g=void 0},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t=(0,n.getEnabledElement)(e);t.invalid=!0,t.needsRedraw=!0;var r={element:e};(0,i.default)(e,"cornerstoneinvalidated",r)};var n=r(0),a=r(2),i=function(e){return e&&e.__esModule?e:{default:e}}(a)},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){(0,n.getEnabledElementsByImageId)(e).forEach(function(e){(0,i.default)(e,!0)})};var n=r(0),a=r(6),i=function(e){return e&&e.__esModule?e:{default:e}}(a)},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t,r){var a=(0,n.getEnabledElement)(e);if(void 0===a.image)throw new Error("image has not been loaded yet");var o=e.getBoundingClientRect(),l=t-o.left-window.pageXOffset,u=r-o.top-window.pageYOffset,d={x:l,y:u},s=(0,i.default)(a);return s.invert(),s.transformPoint(d.x,d.y)};var n=r(0),a=r(9),i=function(e){return e&&e.__esModule?e:{default:e}}(a)},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){var r=(0,n.getEnabledElement)(e);return(0,i.default)(r).transformPoint(t.x,t.y)};var n=r(0),a=r(9),i=function(e){return e&&e.__esModule?e:{default:e}}(a)},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t=(0,a.getEnabledElement)(e);t.viewport=(0,o.default)(t.canvas,t.image),(0,u.default)(e)};var a=r(0),i=r(3),o=n(i),l=r(5),u=n(l)},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){var r=(0,o.getEnabledElement)(e);if(void 0===r.viewport&&(r.viewport=(0,i.default)(r.canvas)),t)for(var n in t)null!==t[n]&&(r.viewport[n]=t[n]);r.viewport.voi.windowWidth&&(r.viewport.voi.windowWidth=Math.max(t.voi.windowWidth,d)),r.viewport.scale&&(r.viewport.scale=Math.max(t.scale,s)),r.viewport.rotation%=360,r.viewport.rotation<0&&(r.viewport.rotation+=360),r.image&&(0,u.default)(e)};var a=r(3),i=n(a),o=r(0),l=r(5),u=n(l),d=1e-6,s=1e-4},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(8),a=r(17),i=r(35),o=r(14),l=r(10);t.default={colorImage:n.renderColorImage,grayscaleImage:a.renderGrayscaleImage,webImage:i.renderWebImage,pseudoColorImage:o.renderPseudoColorImage,labelMapImage:l.renderLabelMapImage}},function(e,t,r){"use strict";function n(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=void 0;for(r=0;r<o.length&&!(o[r].priority<=t);r++);o.splice(r,0,{priority:t,provider:e})}function a(e){for(var t=0;t<o.length;t++)if(o[t].provider===e){o.splice(t,1);break}}function i(e,t){for(var r=0;r<o.length;r++){var n=o[r].provider(e,t);if(void 0!==n)return n}}Object.defineProperty(t,"__esModule",{value:!0}),t.addProvider=n,t.removeProvider=a;var o=[];t.default={addProvider:n,removeProvider:a,get:i}},function(e,t,r){"use strict";function n(e){for(var t=Number.MAX_VALUE,r=Number.MIN_VALUE,n=e.length,a=void 0,i=0;i<n;i++)a=e[i],t=t<a?t:a,r=r>a?r:a;return{minPixelValue:t,maxPixelValue:r}}function a(e){if(e.restore)return e.restore;var t=e.color,r=e.rgba,n=e.cachedLut,a=e.slope,i=e.windowWidth,o=e.windowCenter,l=e.minPixelValue,u=e.maxPixelValue;return function(){if(e.color=t,e.rgba=r,e.cachedLut=n,e.slope=a,e.windowWidth=i,e.windowCenter=o,e.minPixelValue=l,e.maxPixelValue=u,e.origPixelData){var d=e.origPixelData;e.getPixelData=function(){return d}}e.origPixelData=void 0,e.colormapId=void 0,e.falseColor=void 0}}function i(e){return e&&"string"==typeof e&&(e=(0,c.getColormap)(e)),e}function o(e){return!(!e.restore||"function"!=typeof e.restore)&&(e.restore(),!0)}function l(e,t){if(e.color&&!e.falseColor)throw new Error("Color transforms are not implemented yet");t=i(t);var r=t.getId();if(e.colormapId===r)return!1;if(o(e),r){var l=e.minPixelValue||0,u=e.maxPixelValue||255;e.restore=a(e);var d=t.createLookupTable();d.setTableRange(l,u),(0,f.default)(e,d);var s=n(e.getPixelData());e.minPixelValue=s.minPixelValue,e.maxPixelValue=s.maxPixelValue,e.windowWidth=255,e.windowCenter=128,e.colormapId=r}return!0}function u(e,t){return l((0,d.getEnabledElement)(e).image,t)}Object.defineProperty(t,"__esModule",{value:!0}),t.restoreImage=t.convertToFalseColorImage=t.convertImageToFalseColorImage=void 0;var d=r(0),s=r(41),f=function(e){return e&&e.__esModule?e:{default:e}}(s),c=r(28);t.convertImageToFalseColorImage=l,t.convertToFalseColorImage=u,t.restoreImage=o}])});
-//# sourceMappingURL=cornerstone.min.js.map
\ No newline at end of file
+(function webpackUniversalModuleDefinition(root,factory){if(typeof exports==='object'&&typeof module==='object')module.exports=factory();else if(typeof define==='function'&&define.amd)define("cornerstone-core",[],factory);else if(typeof exports==='object')exports["cornerstone-core"]=factory();else root["cornerstone"]=factory()})(typeof self!=='undefined'?self:this,function(){return(function(modules){var installedModules={};function __webpack_require__(moduleId){if(installedModules[moduleId]){return installedModules[moduleId].exports}var module=installedModules[moduleId]={i:moduleId,l:false,exports:{}};modules[moduleId].call(module.exports,module,module.exports,__webpack_require__);module.l=true;return module.exports}__webpack_require__.m=modules;__webpack_require__.c=installedModules;__webpack_require__.d=function(exports,name,getter){if(!__webpack_require__.o(exports,name)){Object.defineProperty(exports,name,{configurable:false,enumerable:true,get:getter})}};__webpack_require__.n=function(module){var getter=module&&module.__esModule?function getDefault(){return module['default']}:function getModuleExports(){return module};__webpack_require__.d(getter,'a',getter);return getter};__webpack_require__.o=function(object,property){return Object.prototype.hasOwnProperty.call(object,property)};__webpack_require__.p="";return __webpack_require__(__webpack_require__.s=42)})([(function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.getEnabledElement=getEnabledElement;exports.addEnabledElement=addEnabledElement;exports.getEnabledElementsByImageId=getEnabledElementsByImageId;exports.getEnabledElements=getEnabledElements;var enabledElements=[];function getEnabledElement(element){if(element===undefined){throw new Error('getEnabledElement: parameter element must not be undefined');}for(var i=0;i<enabledElements.length;i++){if(enabledElements[i].element===element){return enabledElements[i]}}throw new Error('element not enabled');}function addEnabledElement(enabledElement){if(enabledElement===undefined){throw new Error('getEnabledElement: enabledElement element must not be undefined');}enabledElements.push(enabledElement)}function getEnabledElementsByImageId(imageId){var ees=[];enabledElements.forEach(function(enabledElement){if(enabledElement.image&&enabledElement.image.imageId===imageId){ees.push(enabledElement)}});return ees}function getEnabledElements(){return enabledElements}}),(function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.default=function(){if(window.performance){return performance.now()}return Date.now()}}),(function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.default=triggerEvent;function triggerEvent(el,type){var detail=arguments.length>2&&arguments[2]!==undefined?arguments[2]:null;var event=void 0;if(typeof window.CustomEvent==='function'){event=new CustomEvent(type,{detail:detail,cancelable:true})}else{event=document.createEvent('CustomEvent');event.initCustomEvent(type,true,true,detail)}return el.dispatchEvent(event)}}),(function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.default=function(canvas,image){if(canvas===undefined){throw new Error('getDefaultViewport: parameter canvas must not be undefined');}if(image===undefined){return{scale:1,translation:{x:0,y:0},voi:{windowWidth:undefined,windowCenter:undefined},invert:false,pixelReplication:false,rotation:0,hflip:false,vflip:false,modalityLUT:undefined,voiLUT:undefined,colormap:undefined,labelmap:false}}var verticalScale=canvas.height/image.rows;var horizontalScale=canvas.width/image.columns;var scale=Math.min(horizontalScale,verticalScale);return{scale:scale,translation:{x:0,y:0},voi:{windowWidth:image.windowWidth,windowCenter:image.windowCenter},invert:image.invert,pixelReplication:false,rotation:0,hflip:false,vflip:false,modalityLUT:image.modalityLUT,voiLUT:image.voiLUT,colormap:image.colormap,labelmap:Boolean(image.labelmap)}}}),(function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.default=function(enabledElement,context,scale){if(enabledElement===undefined){throw new Error('setToPixelCoordinateSystem: parameter enabledElement must not be undefined');}if(context===undefined){throw new Error('setToPixelCoordinateSystem: parameter context must not be undefined');}var transform=(0,_calculateTransform2.default)(enabledElement,scale);context.setTransform(transform.m[0],transform.m[1],transform.m[2],transform.m[3],transform.m[4],transform.m[5])};var _calculateTransform=__webpack_require__(24);var _calculateTransform2=_interopRequireDefault(_calculateTransform);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}}),(function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.default=function(element){var invalidated=arguments.length>1&&arguments[1]!==undefined?arguments[1]:false;var enabledElement=(0,_enabledElements.getEnabledElement)(element);if(enabledElement.image===undefined&&!enabledElement.layers.length){throw new Error('updateImage: image has not been loaded yet');}(0,_drawImage2.default)(enabledElement,invalidated)};var _enabledElements=__webpack_require__(0);var _drawImage=__webpack_require__(6);var _drawImage2=_interopRequireDefault(_drawImage);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}}),(function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.default=function(enabledElement){var invalidated=arguments.length>1&&arguments[1]!==undefined?arguments[1]:false;enabledElement.needsRedraw=true;if(invalidated){enabledElement.invalid=true}}}),(function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _colormap=__webpack_require__(28);var _lookupTable=__webpack_require__(29);var _lookupTable2=_interopRequireDefault(_lookupTable);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}exports.default={getColormap:_colormap.getColormap,getColormapsList:_colormap.getColormapsList,LookupTable:_lookupTable2.default}}),(function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.renderColorImage=renderColorImage;exports.addColorLayer=addColorLayer;var _now=__webpack_require__(1);var _now2=_interopRequireDefault(_now);var _generateColorLut=__webpack_require__(45);var _generateColorLut2=_interopRequireDefault(_generateColorLut);var _storedColorPixelDataToCanvasImageData=__webpack_require__(21);var _storedColorPixelDataToCanvasImageData2=_interopRequireDefault(_storedColorPixelDataToCanvasImageData);var _storedRGBAPixelDataToCanvasImageData=__webpack_require__(46);var _storedRGBAPixelDataToCanvasImageData2=_interopRequireDefault(_storedRGBAPixelDataToCanvasImageData);var _setToPixelCoordinateSystem=__webpack_require__(4);var _setToPixelCoordinateSystem2=_interopRequireDefault(_setToPixelCoordinateSystem);var _index=__webpack_require__(15);var _index2=_interopRequireDefault(_index);var _doesImageNeedToBeRendered=__webpack_require__(13);var _doesImageNeedToBeRendered2=_interopRequireDefault(_doesImageNeedToBeRendered);var _initializeRenderCanvas=__webpack_require__(11);var _initializeRenderCanvas2=_interopRequireDefault(_initializeRenderCanvas);var _saveLastRendered=__webpack_require__(12);var _saveLastRendered2=_interopRequireDefault(_saveLastRendered);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function getLut(image,viewport){if(image.cachedLut!==undefined&&image.cachedLut.windowCenter===viewport.voi.windowCenter&&image.cachedLut.windowWidth===viewport.voi.windowWidth&&image.cachedLut.invert===viewport.invert){return image.cachedLut.lutArray}(0,_generateColorLut2.default)(image,viewport.voi.windowWidth,viewport.voi.windowCenter,viewport.invert);image.cachedLut.windowWidth=viewport.voi.windowWidth;image.cachedLut.windowCenter=viewport.voi.windowCenter;image.cachedLut.invert=viewport.invert;return image.cachedLut.lutArray}function getRenderCanvas(enabledElement,image,invalidated){if(!enabledElement.renderingTools.renderCanvas){enabledElement.renderingTools.renderCanvas=document.createElement('canvas')}var renderCanvas=enabledElement.renderingTools.renderCanvas;if(enabledElement.viewport.voi.windowWidth===255&&enabledElement.viewport.voi.windowCenter===128&&enabledElement.viewport.invert===false&&image.getCanvas&&image.getCanvas()){return image.getCanvas()}if((0,_doesImageNeedToBeRendered2.default)(enabledElement,image)===false&&invalidated!==true){return renderCanvas}if(renderCanvas.width!==image.width||renderCanvas.height!==image.height){(0,_initializeRenderCanvas2.default)(enabledElement,image)}var start=(0,_now2.default)();var colorLut=getLut(image,enabledElement.viewport);image.stats=image.stats||{};image.stats.lastLutGenerateTime=(0,_now2.default)()-start;var renderCanvasData=enabledElement.renderingTools.renderCanvasData;var renderCanvasContext=enabledElement.renderingTools.renderCanvasContext;if(image.rgba){(0,_storedRGBAPixelDataToCanvasImageData2.default)(image,colorLut,renderCanvasData.data)}else{(0,_storedColorPixelDataToCanvasImageData2.default)(image,colorLut,renderCanvasData.data)}start=(0,_now2.default)();renderCanvasContext.putImageData(renderCanvasData,0,0);image.stats.lastPutImageDataTime=(0,_now2.default)()-start;return renderCanvas}function renderColorImage(enabledElement,invalidated){if(enabledElement===undefined){throw new Error('renderColorImage: enabledElement parameter must not be undefined');}var image=enabledElement.image;if(image===undefined){throw new Error('renderColorImage: image must be loaded before it can be drawn');}var context=enabledElement.canvas.getContext('2d');context.setTransform(1,0,0,1,0,0);context.fillStyle='black';context.fillRect(0,0,enabledElement.canvas.width,enabledElement.canvas.height);context.imageSmoothingEnabled=!enabledElement.viewport.pixelReplication;context.mozImageSmoothingEnabled=context.imageSmoothingEnabled;(0,_setToPixelCoordinateSystem2.default)(enabledElement,context);var renderCanvas=void 0;if(enabledElement.options&&enabledElement.options.renderer&&enabledElement.options.renderer.toLowerCase()==='webgl'){renderCanvas=_index2.default.renderer.render(enabledElement)}else{renderCanvas=getRenderCanvas(enabledElement,image,invalidated)}context.drawImage(renderCanvas,0,0,image.width,image.height,0,0,image.width,image.height);enabledElement.renderingTools=(0,_saveLastRendered2.default)(enabledElement)}function addColorLayer(layer,invalidated){if(layer===undefined){throw new Error('addColorLayer: layer parameter must not be undefined');}var image=layer.image;if(image===undefined){throw new Error('addColorLayer: image must be loaded before it can be drawn');}image.rgba=true;layer.canvas=getRenderCanvas(layer,image,invalidated);var context=layer.canvas.getContext('2d');context.imageSmoothingEnabled=!layer.viewport.pixelReplication;context.mozImageSmoothingEnabled=context.imageSmoothingEnabled;layer.renderingTools=(0,_saveLastRendered2.default)(layer)}}),(function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.default=function(enabledElement){return(0,_calculateTransform2.default)(enabledElement)};var _calculateTransform=__webpack_require__(24);var _calculateTransform2=_interopRequireDefault(_calculateTransform);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}}),(function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.renderLabelMapImage=renderLabelMapImage;exports.addLabelMapLayer=addLabelMapLayer;var _setToPixelCoordinateSystem=__webpack_require__(4);var _setToPixelCoordinateSystem2=_interopRequireDefault(_setToPixelCoordinateSystem);var _now=__webpack_require__(1);var _now2=_interopRequireDefault(_now);var _initializeRenderCanvas=__webpack_require__(11);var _initializeRenderCanvas2=_interopRequireDefault(_initializeRenderCanvas);var _saveLastRendered=__webpack_require__(12);var _saveLastRendered2=_interopRequireDefault(_saveLastRendered);var _doesImageNeedToBeRendered=__webpack_require__(13);var _doesImageNeedToBeRendered2=_interopRequireDefault(_doesImageNeedToBeRendered);var _storedPixelDataToCanvasImageDataColorLUT=__webpack_require__(22);var _storedPixelDataToCanvasImageDataColorLUT2=_interopRequireDefault(_storedPixelDataToCanvasImageDataColorLUT);var _index=__webpack_require__(7);var _index2=_interopRequireDefault(_index);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function getRenderCanvas(enabledElement,image,invalidated){if(!enabledElement.renderingTools.renderCanvas){enabledElement.renderingTools.renderCanvas=document.createElement('canvas')}var renderCanvas=enabledElement.renderingTools.renderCanvas;var colormap=enabledElement.viewport.colormap||enabledElement.options.colormap;if(colormap&&typeof colormap==='string'){colormap=_index2.default.getColormap(colormap)}if(!colormap){throw new Error('renderLabelMapImage: colormap not found.');}var colormapId=colormap.getId();if((0,_doesImageNeedToBeRendered2.default)(enabledElement,image)===false&&invalidated!==true&&enabledElement.renderingTools.colormapId===colormapId){return renderCanvas}if(renderCanvas.width!==image.width||renderCanvas.height!==image.height){(0,_initializeRenderCanvas2.default)(enabledElement,image)}var start=(0,_now2.default)();if(!enabledElement.renderingTools.colorLut||invalidated||enabledElement.renderingTools.colormapId!==colormapId){enabledElement.renderingTools.colorLut=colormap.createLookupTable();enabledElement.renderingTools.colormapId=colormapId}image.stats=image.stats||{};image.stats.lastLutGenerateTime=(0,_now2.default)()-start;var colorLut=enabledElement.renderingTools.colorLut;var renderCanvasData=enabledElement.renderingTools.renderCanvasData;var renderCanvasContext=enabledElement.renderingTools.renderCanvasContext;(0,_storedPixelDataToCanvasImageDataColorLUT2.default)(image,colorLut,renderCanvasData.data);start=(0,_now2.default)();renderCanvasContext.putImageData(renderCanvasData,0,0);image.stats.lastPutImageDataTime=(0,_now2.default)()-start;return renderCanvas}function renderLabelMapImage(enabledElement,invalidated){if(enabledElement===undefined){throw new Error('renderLabelMapImage: enabledElement parameter must not be undefined');}var image=enabledElement.image;if(image===undefined){throw new Error('renderLabelMapImage: image must be loaded before it can be drawn');}var context=enabledElement.canvas.getContext('2d');context.setTransform(1,0,0,1,0,0);context.fillStyle='black';context.fillRect(0,0,enabledElement.canvas.width,enabledElement.canvas.height);context.imageSmoothingEnabled=!enabledElement.viewport.pixelReplication;context.mozImageSmoothingEnabled=context.imageSmoothingEnabled;(0,_setToPixelCoordinateSystem2.default)(enabledElement,context);var renderCanvas=getRenderCanvas(enabledElement,image,invalidated);var width=image.width,height=image.height;context.drawImage(renderCanvas,0,0,width,height,0,0,width,height);enabledElement.renderingTools=(0,_saveLastRendered2.default)(enabledElement)}function addLabelMapLayer(layer,invalidated){if(layer===undefined){throw new Error('addLabelMapLayer: layer parameter must not be undefined');}var image=layer.image;if(image===undefined){throw new Error('addLabelMapLayer: image must be loaded before it can be drawn');}layer.canvas=getRenderCanvas(layer,image,invalidated);var context=layer.canvas.getContext('2d');context.imageSmoothingEnabled=!layer.viewport.pixelReplication;context.mozImageSmoothingEnabled=context.imageSmoothingEnabled;layer.renderingTools=(0,_saveLastRendered2.default)(layer)}}),(function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.default=function(enabledElement,image){var renderCanvas=enabledElement.renderingTools.renderCanvas;renderCanvas.width=image.width;renderCanvas.height=image.height;var canvasContext=renderCanvas.getContext('2d');canvasContext.fillStyle='white';canvasContext.fillRect(0,0,renderCanvas.width,renderCanvas.height);var renderCanvasData=canvasContext.getImageData(0,0,image.width,image.height);enabledElement.renderingTools.renderCanvasContext=canvasContext;enabledElement.renderingTools.renderCanvasData=renderCanvasData}}),(function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.default=function(enabledElement){var imageId=enabledElement.image.imageId;var viewport=enabledElement.viewport;enabledElement.renderingTools.lastRenderedImageId=imageId;enabledElement.renderingTools.lastRenderedViewport={windowCenter:viewport.voi.windowCenter,windowWidth:viewport.voi.windowWidth,invert:viewport.invert,rotation:viewport.rotation,hflip:viewport.hflip,vflip:viewport.vflip,modalityLUT:viewport.modalityLUT,voiLUT:viewport.voiLUT,colormap:viewport.colormap};return enabledElement.renderingTools}}),(function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.default=function(enabledElement,image){var lastRenderedImageId=enabledElement.renderingTools.lastRenderedImageId;var lastRenderedViewport=enabledElement.renderingTools.lastRenderedViewport;return image.imageId!==lastRenderedImageId||!lastRenderedViewport||lastRenderedViewport.windowCenter!==enabledElement.viewport.voi.windowCenter||lastRenderedViewport.windowWidth!==enabledElement.viewport.voi.windowWidth||lastRenderedViewport.invert!==enabledElement.viewport.invert||lastRenderedViewport.rotation!==enabledElement.viewport.rotation||lastRenderedViewport.hflip!==enabledElement.viewport.hflip||lastRenderedViewport.vflip!==enabledElement.viewport.vflip||lastRenderedViewport.modalityLUT!==enabledElement.viewport.modalityLUT||lastRenderedViewport.voiLUT!==enabledElement.viewport.voiLUT||lastRenderedViewport.colormap!==enabledElement.viewport.colormap}}),(function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.renderPseudoColorImage=renderPseudoColorImage;exports.addPseudoColorLayer=addPseudoColorLayer;var _setToPixelCoordinateSystem=__webpack_require__(4);var _setToPixelCoordinateSystem2=_interopRequireDefault(_setToPixelCoordinateSystem);var _now=__webpack_require__(1);var _now2=_interopRequireDefault(_now);var _initializeRenderCanvas=__webpack_require__(11);var _initializeRenderCanvas2=_interopRequireDefault(_initializeRenderCanvas);var _getLut=__webpack_require__(32);var _getLut2=_interopRequireDefault(_getLut);var _saveLastRendered=__webpack_require__(12);var _saveLastRendered2=_interopRequireDefault(_saveLastRendered);var _doesImageNeedToBeRendered=__webpack_require__(13);var _doesImageNeedToBeRendered2=_interopRequireDefault(_doesImageNeedToBeRendered);var _storedPixelDataToCanvasImageDataPseudocolorLUT=__webpack_require__(23);var _storedPixelDataToCanvasImageDataPseudocolorLUT2=_interopRequireDefault(_storedPixelDataToCanvasImageDataPseudocolorLUT);var _index=__webpack_require__(7);var _index2=_interopRequireDefault(_index);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function getRenderCanvas(enabledElement,image,invalidated){if(!enabledElement.renderingTools.renderCanvas){enabledElement.renderingTools.renderCanvas=document.createElement('canvas')}var renderCanvas=enabledElement.renderingTools.renderCanvas;var colormap=enabledElement.viewport.colormap||enabledElement.options.colormap;if(colormap&&typeof colormap==='string'){colormap=_index2.default.getColormap(colormap)}if(!colormap){throw new Error('renderPseudoColorImage: colormap not found.');}var colormapId=colormap.getId();if((0,_doesImageNeedToBeRendered2.default)(enabledElement,image)===false&&invalidated!==true&&enabledElement.renderingTools.colormapId===colormapId){return renderCanvas}if(renderCanvas.width!==image.width||renderCanvas.height!==image.height){(0,_initializeRenderCanvas2.default)(enabledElement,image)}var start=(0,_now2.default)();if(!enabledElement.renderingTools.colorLut||invalidated||enabledElement.renderingTools.colormapId!==colormapId){colormap.setNumberOfColors(256);enabledElement.renderingTools.colorLut=colormap.createLookupTable();enabledElement.renderingTools.colormapId=colormapId}var lut=(0,_getLut2.default)(image,enabledElement.viewport,invalidated);image.stats=image.stats||{};image.stats.lastLutGenerateTime=(0,_now2.default)()-start;var colorLut=enabledElement.renderingTools.colorLut;var renderCanvasData=enabledElement.renderingTools.renderCanvasData;var renderCanvasContext=enabledElement.renderingTools.renderCanvasContext;(0,_storedPixelDataToCanvasImageDataPseudocolorLUT2.default)(image,lut,colorLut,renderCanvasData.data);start=(0,_now2.default)();renderCanvasContext.putImageData(renderCanvasData,0,0);image.stats.lastPutImageDataTime=(0,_now2.default)()-start;return renderCanvas}function renderPseudoColorImage(enabledElement,invalidated){if(enabledElement===undefined){throw new Error('drawImage: enabledElement parameter must not be undefined');}var image=enabledElement.image;if(image===undefined){throw new Error('drawImage: image must be loaded before it can be drawn');}var context=enabledElement.canvas.getContext('2d');context.setTransform(1,0,0,1,0,0);context.fillStyle='black';context.fillRect(0,0,enabledElement.canvas.width,enabledElement.canvas.height);context.imageSmoothingEnabled=!enabledElement.viewport.pixelReplication;context.mozImageSmoothingEnabled=context.imageSmoothingEnabled;(0,_setToPixelCoordinateSystem2.default)(enabledElement,context);var renderCanvas=getRenderCanvas(enabledElement,image,invalidated);var width=image.width,height=image.height;context.drawImage(renderCanvas,0,0,width,height,0,0,width,height);enabledElement.renderingTools=(0,_saveLastRendered2.default)(enabledElement)}function addPseudoColorLayer(layer,invalidated){if(layer===undefined){throw new Error('addPseudoColorLayer: layer parameter must not be undefined');}var image=layer.image;if(image===undefined){throw new Error('addPseudoColorLayer: image must be loaded before it can be drawn');}layer.canvas=getRenderCanvas(layer,image,invalidated);var context=layer.canvas.getContext('2d');context.imageSmoothingEnabled=!layer.viewport.pixelReplication;context.mozImageSmoothingEnabled=context.imageSmoothingEnabled;layer.renderingTools=(0,_saveLastRendered2.default)(layer)}}),(function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _renderer=__webpack_require__(47);var _createProgramFromString=__webpack_require__(34);var _createProgramFromString2=_interopRequireDefault(_createProgramFromString);var _textureCache=__webpack_require__(33);var _textureCache2=_interopRequireDefault(_textureCache);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var mod={createProgramFromString:_createProgramFromString2.default,renderer:{render:_renderer.render,initRenderer:_renderer.initRenderer,getRenderCanvas:_renderer.getRenderCanvas,isWebGLAvailable:_renderer.isWebGLAvailable},textureCache:_textureCache2.default};Object.defineProperty(mod,'isWebGLInitialized',{enumerable:true,configurable:false,get:function get(){return _renderer.isWebGLInitialized}});exports.default=mod}),(function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor}}();function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function");}}var EventTarget=function(){function EventTarget(){_classCallCheck(this,EventTarget);this.listeners={};this.namespaces={}}_createClass(EventTarget,[{key:'addEventNamespaceListener',value:function addEventNamespaceListener(type,callback){if(type.indexOf('.')<=0){return}this.namespaces[type]=callback;this.addEventListener(type.split('.')[0],callback)}},{key:'removeEventNamespaceListener',value:function removeEventNamespaceListener(type){if(type.indexOf('.')<=0||!this.namespaces[type]){return}this.removeEventListener(type.split('.')[0],this.namespaces[type]);delete this.namespaces[type]}},{key:'addEventListener',value:function addEventListener(type,callback){if(type.indexOf('.')>0){this.addEventNamespaceListener(type,callback);return}if(!(type in this.listeners)){this.listeners[type]=[]}this.listeners[type].push(callback)}},{key:'removeEventListener',value:function removeEventListener(type,callback){if(type.indexOf('.')>0){this.removeEventNamespaceListener(type);return}if(!(type in this.listeners)){return}var stack=this.listeners[type];for(var i=0,l=stack.length;i<l;i++){if(stack[i]===callback){stack.splice(i,1);return}}}},{key:'dispatchEvent',value:function dispatchEvent(event){if(!(event.type in this.listeners)){return true}var stack=this.listeners[event.type];for(var i=0,l=stack.length;i<l;i++){stack[i].call(this,event)}return!event.defaultPrevented}}]);return EventTarget}();var events=new EventTarget();exports.default=events}),(function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.renderGrayscaleImage=renderGrayscaleImage;exports.addGrayscaleLayer=addGrayscaleLayer;var _storedPixelDataToCanvasImageData=__webpack_require__(20);var _storedPixelDataToCanvasImageData2=_interopRequireDefault(_storedPixelDataToCanvasImageData);var _storedPixelDataToCanvasImageDataRGBA=__webpack_require__(30);var _storedPixelDataToCanvasImageDataRGBA2=_interopRequireDefault(_storedPixelDataToCanvasImageDataRGBA);var _setToPixelCoordinateSystem=__webpack_require__(4);var _setToPixelCoordinateSystem2=_interopRequireDefault(_setToPixelCoordinateSystem);var _now=__webpack_require__(1);var _now2=_interopRequireDefault(_now);var _index=__webpack_require__(15);var _index2=_interopRequireDefault(_index);var _getLut=__webpack_require__(32);var _getLut2=_interopRequireDefault(_getLut);var _doesImageNeedToBeRendered=__webpack_require__(13);var _doesImageNeedToBeRendered2=_interopRequireDefault(_doesImageNeedToBeRendered);var _initializeRenderCanvas=__webpack_require__(11);var _initializeRenderCanvas2=_interopRequireDefault(_initializeRenderCanvas);var _saveLastRendered=__webpack_require__(12);var _saveLastRendered2=_interopRequireDefault(_saveLastRendered);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function getRenderCanvas(enabledElement,image,invalidated){var useAlphaChannel=arguments.length>3&&arguments[3]!==undefined?arguments[3]:true;if(!enabledElement.renderingTools.renderCanvas){enabledElement.renderingTools.renderCanvas=document.createElement('canvas')}var renderCanvas=enabledElement.renderingTools.renderCanvas;if((0,_doesImageNeedToBeRendered2.default)(enabledElement,image)===false&&invalidated!==true){return renderCanvas}if(renderCanvas.width!==image.width||renderCanvas.height!==image.height){(0,_initializeRenderCanvas2.default)(enabledElement,image)}var start=(0,_now2.default)();var lut=(0,_getLut2.default)(image,enabledElement.viewport,invalidated);image.stats=image.stats||{};image.stats.lastLutGenerateTime=(0,_now2.default)()-start;var renderCanvasData=enabledElement.renderingTools.renderCanvasData;var renderCanvasContext=enabledElement.renderingTools.renderCanvasContext;if(useAlphaChannel){(0,_storedPixelDataToCanvasImageData2.default)(image,lut,renderCanvasData.data)}else{(0,_storedPixelDataToCanvasImageDataRGBA2.default)(image,lut,renderCanvasData.data)}start=(0,_now2.default)();renderCanvasContext.putImageData(renderCanvasData,0,0);image.stats.lastPutImageDataTime=(0,_now2.default)()-start;return renderCanvas}function renderGrayscaleImage(enabledElement,invalidated){if(enabledElement===undefined){throw new Error('drawImage: enabledElement parameter must not be undefined');}var image=enabledElement.image;if(image===undefined){throw new Error('drawImage: image must be loaded before it can be drawn');}var context=enabledElement.canvas.getContext('2d');context.setTransform(1,0,0,1,0,0);context.fillStyle='black';context.fillRect(0,0,enabledElement.canvas.width,enabledElement.canvas.height);context.imageSmoothingEnabled=!enabledElement.viewport.pixelReplication;context.mozImageSmoothingEnabled=context.imageSmoothingEnabled;(0,_setToPixelCoordinateSystem2.default)(enabledElement,context);var renderCanvas=void 0;if(enabledElement.options&&enabledElement.options.renderer&&enabledElement.options.renderer.toLowerCase()==='webgl'){renderCanvas=_index2.default.renderer.render(enabledElement)}else{renderCanvas=getRenderCanvas(enabledElement,image,invalidated)}context.drawImage(renderCanvas,0,0,image.width,image.height,0,0,image.width,image.height);enabledElement.renderingTools=(0,_saveLastRendered2.default)(enabledElement)}function addGrayscaleLayer(layer,invalidated){var useAlphaChannel=arguments.length>2&&arguments[2]!==undefined?arguments[2]:false;if(layer===undefined){throw new Error('addGrayscaleLayer: layer parameter must not be undefined');}var image=layer.image;if(image===undefined){throw new Error('addGrayscaleLayer: image must be loaded before it can be drawn');}layer.canvas=getRenderCanvas(layer,image,invalidated,useAlphaChannel);var context=layer.canvas.getContext('2d');context.imageSmoothingEnabled=!layer.viewport.pixelReplication;context.mozImageSmoothingEnabled=context.imageSmoothingEnabled;layer.renderingTools=(0,_saveLastRendered2.default)(layer)}}),(function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.default=function(image,windowWidth,windowCenter,invert,modalityLUT,voiLUT){var maxPixelValue=image.maxPixelValue;var minPixelValue=image.minPixelValue;var offset=Math.min(minPixelValue,0);if(image.cachedLut===undefined){var length=maxPixelValue-offset+1;image.cachedLut={};image.cachedLut.lutArray=new Uint8ClampedArray(length)}var lut=image.cachedLut.lutArray;var mlutfn=(0,_getModalityLUT2.default)(image.slope,image.intercept,modalityLUT);var vlutfn=(0,_getVOILut2.default)(windowWidth,windowCenter,voiLUT);if(invert===true){for(var storedValue=minPixelValue;storedValue<=maxPixelValue;storedValue++){lut[storedValue+ -offset]=255-vlutfn(mlutfn(storedValue))}}else{for(var _storedValue=minPixelValue;_storedValue<=maxPixelValue;_storedValue++){lut[_storedValue+ -offset]=vlutfn(mlutfn(_storedValue))}}return lut};var _getModalityLUT=__webpack_require__(26);var _getModalityLUT2=_interopRequireDefault(_getModalityLUT);var _getVOILut=__webpack_require__(27);var _getVOILut2=_interopRequireDefault(_getVOILut);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}}),(function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.default=function(callback){return window.requestAnimationFrame(callback)||window.webkitRequestAnimationFrame(callback)||window.mozRequestAnimationFrame(callback)||window.oRequestAnimationFrame(callback)||window.msRequestAnimationFrame(callback)||requestFrame(callback)};function requestFrame(callback){window.setTimeout(callback,1000/60)}}),(function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.default=function(image,lut,canvasImageDataData){var start=(0,_now2.default)();var pixelData=image.getPixelData();image.stats.lastGetPixelDataTime=(0,_now2.default)()-start;var numPixels=pixelData.length;var minPixelValue=image.minPixelValue;var canvasImageDataIndex=3;var storedPixelDataIndex=0;start=(0,_now2.default)();if(pixelData instanceof Int16Array){if(minPixelValue<0){while(storedPixelDataIndex<numPixels){canvasImageDataData[canvasImageDataIndex]=lut[pixelData[storedPixelDataIndex++]+ -minPixelValue];canvasImageDataIndex+=4}}else{while(storedPixelDataIndex<numPixels){canvasImageDataData[canvasImageDataIndex]=lut[pixelData[storedPixelDataIndex++]];canvasImageDataIndex+=4}}}else if(pixelData instanceof Uint16Array){while(storedPixelDataIndex<numPixels){canvasImageDataData[canvasImageDataIndex]=lut[pixelData[storedPixelDataIndex++]];canvasImageDataIndex+=4}}else if(minPixelValue<0){while(storedPixelDataIndex<numPixels){canvasImageDataData[canvasImageDataIndex]=lut[pixelData[storedPixelDataIndex++]+ -minPixelValue];canvasImageDataIndex+=4}}else{while(storedPixelDataIndex<numPixels){canvasImageDataData[canvasImageDataIndex]=lut[pixelData[storedPixelDataIndex++]];canvasImageDataIndex+=4}}image.stats.lastStoredPixelDataToCanvasImageDataTime=(0,_now2.default)()-start};var _now=__webpack_require__(1);var _now2=_interopRequireDefault(_now);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}}),(function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.default=function(image,lut,canvasImageDataData){var start=(0,_now2.default)();var pixelData=image.getPixelData();image.stats.lastGetPixelDataTime=(0,_now2.default)()-start;var minPixelValue=image.minPixelValue;var canvasImageDataIndex=0;var storedPixelDataIndex=0;var numPixels=pixelData.length;start=(0,_now2.default)();if(minPixelValue<0){while(storedPixelDataIndex<numPixels){canvasImageDataData[canvasImageDataIndex++]=lut[pixelData[storedPixelDataIndex++]+ -minPixelValue];canvasImageDataData[canvasImageDataIndex++]=lut[pixelData[storedPixelDataIndex++]+ -minPixelValue];canvasImageDataData[canvasImageDataIndex]=lut[pixelData[storedPixelDataIndex]+ -minPixelValue];storedPixelDataIndex+=2;canvasImageDataIndex+=2}}else{while(storedPixelDataIndex<numPixels){canvasImageDataData[canvasImageDataIndex++]=lut[pixelData[storedPixelDataIndex++]];canvasImageDataData[canvasImageDataIndex++]=lut[pixelData[storedPixelDataIndex++]];canvasImageDataData[canvasImageDataIndex]=lut[pixelData[storedPixelDataIndex]];storedPixelDataIndex+=2;canvasImageDataIndex+=2}}image.stats.lastStoredPixelDataToCanvasImageDataTime=(0,_now2.default)()-start};var _now=__webpack_require__(1);var _now2=_interopRequireDefault(_now);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}}),(function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _index=__webpack_require__(7);var _index2=_interopRequireDefault(_index);var _now=__webpack_require__(1);var _now2=_interopRequireDefault(_now);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function storedPixelDataToCanvasImageDataColorLUT(image,colorLut,canvasImageDataData){var start=(0,_now2.default)();var pixelData=image.getPixelData();image.stats.lastGetPixelDataTime=(0,_now2.default)()-start;var numPixels=pixelData.length;var minPixelValue=image.minPixelValue;var canvasImageDataIndex=0;var storedPixelDataIndex=0;var rgba=void 0;var clut=void 0;start=(0,_now2.default)();if(colorLut instanceof _index2.default.LookupTable){clut=colorLut.Table}else{clut=colorLut}if(minPixelValue<0){while(storedPixelDataIndex<numPixels){rgba=clut[pixelData[storedPixelDataIndex++]+ -minPixelValue];canvasImageDataData[canvasImageDataIndex++]=rgba[0];canvasImageDataData[canvasImageDataIndex++]=rgba[1];canvasImageDataData[canvasImageDataIndex++]=rgba[2];canvasImageDataData[canvasImageDataIndex++]=rgba[3]}}else{while(storedPixelDataIndex<numPixels){rgba=clut[pixelData[storedPixelDataIndex++]];canvasImageDataData[canvasImageDataIndex++]=rgba[0];canvasImageDataData[canvasImageDataIndex++]=rgba[1];canvasImageDataData[canvasImageDataIndex++]=rgba[2];canvasImageDataData[canvasImageDataIndex++]=rgba[3]}}image.stats.lastStoredPixelDataToCanvasImageDataTime=(0,_now2.default)()-start}exports.default=storedPixelDataToCanvasImageDataColorLUT}),(function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _index=__webpack_require__(7);var _index2=_interopRequireDefault(_index);var _now=__webpack_require__(1);var _now2=_interopRequireDefault(_now);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function storedPixelDataToCanvasImageDataPseudocolorLUT(image,grayscaleLut,colorLut,canvasImageDataData){var start=(0,_now2.default)();var pixelData=image.getPixelData();image.stats.lastGetPixelDataTime=(0,_now2.default)()-start;var numPixels=pixelData.length;var minPixelValue=image.minPixelValue;var canvasImageDataIndex=0;var storedPixelDataIndex=0;var grayscale=void 0;var rgba=void 0;var clut=void 0;start=(0,_now2.default)();if(colorLut instanceof _index2.default.LookupTable){clut=colorLut.Table}else{clut=colorLut}if(minPixelValue<0){while(storedPixelDataIndex<numPixels){grayscale=grayscaleLut[pixelData[storedPixelDataIndex++]+ -minPixelValue];rgba=clut[grayscale];canvasImageDataData[canvasImageDataIndex++]=rgba[0];canvasImageDataData[canvasImageDataIndex++]=rgba[1];canvasImageDataData[canvasImageDataIndex++]=rgba[2];canvasImageDataData[canvasImageDataIndex++]=rgba[3]}}else{while(storedPixelDataIndex<numPixels){grayscale=grayscaleLut[pixelData[storedPixelDataIndex++]];rgba=clut[grayscale];canvasImageDataData[canvasImageDataIndex++]=rgba[0];canvasImageDataData[canvasImageDataIndex++]=rgba[1];canvasImageDataData[canvasImageDataIndex++]=rgba[2];canvasImageDataData[canvasImageDataIndex++]=rgba[3]}}image.stats.lastStoredPixelDataToCanvasImageDataTime=(0,_now2.default)()-start}exports.default=storedPixelDataToCanvasImageDataPseudocolorLUT}),(function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.default=function(enabledElement,scale){var transform=new _transform.Transform();transform.translate(enabledElement.canvas.width/2,enabledElement.canvas.height/2);var angle=enabledElement.viewport.rotation;if(angle!==0){transform.rotate(angle*Math.PI/180)}var widthScale=enabledElement.viewport.scale;var heightScale=enabledElement.viewport.scale;if(enabledElement.image.rowPixelSpacing<enabledElement.image.columnPixelSpacing){widthScale*=enabledElement.image.columnPixelSpacing/enabledElement.image.rowPixelSpacing}else if(enabledElement.image.columnPixelSpacing<enabledElement.image.rowPixelSpacing){heightScale*=enabledElement.image.rowPixelSpacing/enabledElement.image.columnPixelSpacing}transform.scale(widthScale,heightScale);if(angle!==0){transform.rotate(-angle*Math.PI/180)}transform.translate(enabledElement.viewport.translation.x,enabledElement.viewport.translation.y);if(angle!==0){transform.rotate(angle*Math.PI/180)}if(scale!==undefined){transform.scale(scale,scale)}if(enabledElement.viewport.hflip){transform.scale(-1,1)}if(enabledElement.viewport.vflip){transform.scale(1,-1)}transform.translate(-enabledElement.image.width/2,-enabledElement.image.height/2);return transform};var _transform=__webpack_require__(31)}),(function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.rescaleImage=rescaleImage;exports.addLayer=addLayer;exports.removeLayer=removeLayer;exports.getLayer=getLayer;exports.getLayers=getLayers;exports.getVisibleLayers=getVisibleLayers;exports.setActiveLayer=setActiveLayer;exports.setLayerImage=setLayerImage;exports.getActiveLayer=getActiveLayer;var _guid=__webpack_require__(58);var _guid2=_interopRequireDefault(_guid);var _enabledElements=__webpack_require__(0);var _getDefaultViewport=__webpack_require__(3);var _getDefaultViewport2=_interopRequireDefault(_getDefaultViewport);var _updateImage=__webpack_require__(5);var _updateImage2=_interopRequireDefault(_updateImage);var _triggerEvent=__webpack_require__(2);var _triggerEvent2=_interopRequireDefault(_triggerEvent);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function triggerEventForLayer(eventName,enabledElement,layerId){var element=enabledElement.element;var eventData={viewport:enabledElement.viewport,element:enabledElement.element,image:enabledElement.image,enabledElement:enabledElement,layerId:layerId};(0,_triggerEvent2.default)(element,eventName,eventData)}function rescaleImage(baseLayer,targetLayer){if(baseLayer.layerId===targetLayer.layerId){throw new Error('rescaleImage: both arguments represent the same layer');}var baseImage=baseLayer.image;var targetImage=targetLayer.image;if(!baseImage.imageId||!targetImage.imageId){return}var colRelative=targetImage.columnPixelSpacing*targetImage.width/(baseImage.columnPixelSpacing*baseImage.width);var viewportRatio=targetLayer.viewport.scale/baseLayer.viewport.scale*colRelative;targetLayer.viewport.scale=baseLayer.viewport.scale*viewportRatio}function addLayer(element,image,options){var layerId=(0,_guid2.default)();var enabledElement=(0,_enabledElements.getEnabledElement)(element);var layers=enabledElement.layers;var viewport=void 0;if(image){viewport=(0,_getDefaultViewport2.default)(enabledElement.canvas,image);if(options&&options.viewport){viewport=Object.assign(viewport,options.viewport)}}if(enabledElement.syncViewports!==false){enabledElement.syncViewports=true}var newLayer={image:image,layerId:layerId,viewport:viewport,options:options||{},renderingTools:{}};if(layers.length&&image){rescaleImage(layers[0],newLayer)}layers.push(newLayer);triggerEventForLayer('cornerstonelayeradded',enabledElement,layerId);if(layers.length===1&&image){setActiveLayer(element,layerId)}return layerId}function removeLayer(element,layerId){var enabledElement=(0,_enabledElements.getEnabledElement)(element);var layers=enabledElement.layers;var index=enabledElement.layers.findIndex(function(layer){return layer.layerId===layerId});if(index!==-1){layers.splice(index,1);if(layerId===enabledElement.activeLayerId&&layers.length){setActiveLayer(element,layers[0].layerId)}triggerEventForLayer('cornerstonelayerremoved',enabledElement,layerId)}}function getLayer(element,layerId){var enabledElement=(0,_enabledElements.getEnabledElement)(element);return enabledElement.layers.find(function(layer){return layer.layerId===layerId})}function getLayers(element){var enabledElement=(0,_enabledElements.getEnabledElement)(element);return enabledElement.layers}function getVisibleLayers(element){var enabledElement=(0,_enabledElements.getEnabledElement)(element);return enabledElement.layers.filter(function(layer){return layer.options&&layer.options.visible!==false&&layer.options.opacity!==0})}function setActiveLayer(element,layerId){var enabledElement=(0,_enabledElements.getEnabledElement)(element);if(enabledElement.activeLayerId===layerId){return}var index=enabledElement.layers.findIndex(function(layer){return layer.layerId===layerId});if(index===-1){throw new Error('setActiveLayer: layer not found in layers array');}var layer=enabledElement.layers[index];if(!layer.image){throw new Error('setActiveLayer: layer with undefined image cannot be set as active.');}enabledElement.activeLayerId=layerId;enabledElement.image=layer.image;enabledElement.viewport=layer.viewport;(0,_updateImage2.default)(element);triggerEventForLayer('cornerstoneactivelayerchanged',enabledElement,layerId)}function setLayerImage(element,image,layerId){var enabledElement=(0,_enabledElements.getEnabledElement)(element);var baseLayer=enabledElement.layers[0];var layer=void 0;if(layerId){layer=getLayer(element,layerId)}else{layer=getActiveLayer(element)}if(!layer){throw new Error('setLayerImage: Layer not found');}layer.image=image;if(!image){layer.viewport=undefined;return}if(!layer.viewport){var defaultViewport=(0,_getDefaultViewport2.default)(enabledElement.canvas,image);if(layer.options&&layer.options.viewport){layer.viewport=Object.assign(defaultViewport,layer.options.viewport)}if(baseLayer.layerId!==layerId){rescaleImage(baseLayer,layer)}}}function getActiveLayer(element){var enabledElement=(0,_enabledElements.getEnabledElement)(element);return enabledElement.layers.find(function(layer){return layer.layerId===enabledElement.activeLayerId})}}),(function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.default=function(slope,intercept,modalityLUT){if(modalityLUT){return generateNonLinearModalityLUT(modalityLUT)}return generateLinearModalityLUT(slope,intercept)};function generateLinearModalityLUT(slope,intercept){return function(storedPixelValue){return storedPixelValue*slope+intercept}}function generateNonLinearModalityLUT(modalityLUT){var minValue=modalityLUT.lut[0];var maxValue=modalityLUT.lut[modalityLUT.lut.length-1];var maxValueMapped=modalityLUT.firstValueMapped+modalityLUT.lut.length;return function(storedPixelValue){if(storedPixelValue<modalityLUT.firstValueMapped){return minValue}else if(storedPixelValue>=maxValueMapped){return maxValue}return modalityLUT.lut[storedPixelValue]}}}),(function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.default=function(windowWidth,windowCenter,voiLUT){if(voiLUT){return generateNonLinearVOILUT(voiLUT)}return generateLinearVOILUT(windowWidth,windowCenter)};function _toConsumableArray(arr){if(Array.isArray(arr)){for(var i=0,arr2=Array(arr.length);i<arr.length;i++){arr2[i]=arr[i]}return arr2}else{return Array.from(arr)}}function generateLinearVOILUT(windowWidth,windowCenter){return function(modalityLutValue){return((modalityLutValue-windowCenter)/windowWidth+0.5)*255.0}}function generateNonLinearVOILUT(voiLUT){var bitsPerEntry=Math.max.apply(Math,_toConsumableArray(voiLUT.lut)).toString(2).length;var shift=bitsPerEntry-8;var minValue=voiLUT.lut[0]>>shift;var maxValue=voiLUT.lut[voiLUT.lut.length-1]>>shift;var maxValueMapped=voiLUT.firstValueMapped+voiLUT.lut.length-1;return function(modalityLutValue){if(modalityLutValue<voiLUT.firstValueMapped){return minValue}else if(modalityLutValue>=maxValueMapped){return maxValue}return voiLUT.lut[modalityLutValue-voiLUT.firstValueMapped]>>shift}}}),(function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.getColormapsList=getColormapsList;exports.getColormap=getColormap;var _lookupTable=__webpack_require__(29);var _lookupTable2=_interopRequireDefault(_lookupTable);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var COLOR_TRANSPARENT=[0,0,0,0];var colormapsData={hotIron:{name:'Hot Iron',numOfColors:256,colors:[[0,0,0,255],[2,0,0,255],[4,0,0,255],[6,0,0,255],[8,0,0,255],[10,0,0,255],[12,0,0,255],[14,0,0,255],[16,0,0,255],[18,0,0,255],[20,0,0,255],[22,0,0,255],[24,0,0,255],[26,0,0,255],[28,0,0,255],[30,0,0,255],[32,0,0,255],[34,0,0,255],[36,0,0,255],[38,0,0,255],[40,0,0,255],[42,0,0,255],[44,0,0,255],[46,0,0,255],[48,0,0,255],[50,0,0,255],[52,0,0,255],[54,0,0,255],[56,0,0,255],[58,0,0,255],[60,0,0,255],[62,0,0,255],[64,0,0,255],[66,0,0,255],[68,0,0,255],[70,0,0,255],[72,0,0,255],[74,0,0,255],[76,0,0,255],[78,0,0,255],[80,0,0,255],[82,0,0,255],[84,0,0,255],[86,0,0,255],[88,0,0,255],[90,0,0,255],[92,0,0,255],[94,0,0,255],[96,0,0,255],[98,0,0,255],[100,0,0,255],[102,0,0,255],[104,0,0,255],[106,0,0,255],[108,0,0,255],[110,0,0,255],[112,0,0,255],[114,0,0,255],[116,0,0,255],[118,0,0,255],[120,0,0,255],[122,0,0,255],[124,0,0,255],[126,0,0,255],[128,0,0,255],[130,0,0,255],[132,0,0,255],[134,0,0,255],[136,0,0,255],[138,0,0,255],[140,0,0,255],[142,0,0,255],[144,0,0,255],[146,0,0,255],[148,0,0,255],[150,0,0,255],[152,0,0,255],[154,0,0,255],[156,0,0,255],[158,0,0,255],[160,0,0,255],[162,0,0,255],[164,0,0,255],[166,0,0,255],[168,0,0,255],[170,0,0,255],[172,0,0,255],[174,0,0,255],[176,0,0,255],[178,0,0,255],[180,0,0,255],[182,0,0,255],[184,0,0,255],[186,0,0,255],[188,0,0,255],[190,0,0,255],[192,0,0,255],[194,0,0,255],[196,0,0,255],[198,0,0,255],[200,0,0,255],[202,0,0,255],[204,0,0,255],[206,0,0,255],[208,0,0,255],[210,0,0,255],[212,0,0,255],[214,0,0,255],[216,0,0,255],[218,0,0,255],[220,0,0,255],[222,0,0,255],[224,0,0,255],[226,0,0,255],[228,0,0,255],[230,0,0,255],[232,0,0,255],[234,0,0,255],[236,0,0,255],[238,0,0,255],[240,0,0,255],[242,0,0,255],[244,0,0,255],[246,0,0,255],[248,0,0,255],[250,0,0,255],[252,0,0,255],[254,0,0,255],[255,0,0,255],[255,2,0,255],[255,4,0,255],[255,6,0,255],[255,8,0,255],[255,10,0,255],[255,12,0,255],[255,14,0,255],[255,16,0,255],[255,18,0,255],[255,20,0,255],[255,22,0,255],[255,24,0,255],[255,26,0,255],[255,28,0,255],[255,30,0,255],[255,32,0,255],[255,34,0,255],[255,36,0,255],[255,38,0,255],[255,40,0,255],[255,42,0,255],[255,44,0,255],[255,46,0,255],[255,48,0,255],[255,50,0,255],[255,52,0,255],[255,54,0,255],[255,56,0,255],[255,58,0,255],[255,60,0,255],[255,62,0,255],[255,64,0,255],[255,66,0,255],[255,68,0,255],[255,70,0,255],[255,72,0,255],[255,74,0,255],[255,76,0,255],[255,78,0,255],[255,80,0,255],[255,82,0,255],[255,84,0,255],[255,86,0,255],[255,88,0,255],[255,90,0,255],[255,92,0,255],[255,94,0,255],[255,96,0,255],[255,98,0,255],[255,100,0,255],[255,102,0,255],[255,104,0,255],[255,106,0,255],[255,108,0,255],[255,110,0,255],[255,112,0,255],[255,114,0,255],[255,116,0,255],[255,118,0,255],[255,120,0,255],[255,122,0,255],[255,124,0,255],[255,126,0,255],[255,128,4,255],[255,130,8,255],[255,132,12,255],[255,134,16,255],[255,136,20,255],[255,138,24,255],[255,140,28,255],[255,142,32,255],[255,144,36,255],[255,146,40,255],[255,148,44,255],[255,150,48,255],[255,152,52,255],[255,154,56,255],[255,156,60,255],[255,158,64,255],[255,160,68,255],[255,162,72,255],[255,164,76,255],[255,166,80,255],[255,168,84,255],[255,170,88,255],[255,172,92,255],[255,174,96,255],[255,176,100,255],[255,178,104,255],[255,180,108,255],[255,182,112,255],[255,184,116,255],[255,186,120,255],[255,188,124,255],[255,190,128,255],[255,192,132,255],[255,194,136,255],[255,196,140,255],[255,198,144,255],[255,200,148,255],[255,202,152,255],[255,204,156,255],[255,206,160,255],[255,208,164,255],[255,210,168,255],[255,212,172,255],[255,214,176,255],[255,216,180,255],[255,218,184,255],[255,220,188,255],[255,222,192,255],[255,224,196,255],[255,226,200,255],[255,228,204,255],[255,230,208,255],[255,232,212,255],[255,234,216,255],[255,236,220,255],[255,238,224,255],[255,240,228,255],[255,242,232,255],[255,244,236,255],[255,246,240,255],[255,248,244,255],[255,250,248,255],[255,252,252,255],[255,255,255,255]]},pet:{name:'PET',numColors:256,colors:[[0,0,0,255],[0,2,1,255],[0,4,3,255],[0,6,5,255],[0,8,7,255],[0,10,9,255],[0,12,11,255],[0,14,13,255],[0,16,15,255],[0,18,17,255],[0,20,19,255],[0,22,21,255],[0,24,23,255],[0,26,25,255],[0,28,27,255],[0,30,29,255],[0,32,31,255],[0,34,33,255],[0,36,35,255],[0,38,37,255],[0,40,39,255],[0,42,41,255],[0,44,43,255],[0,46,45,255],[0,48,47,255],[0,50,49,255],[0,52,51,255],[0,54,53,255],[0,56,55,255],[0,58,57,255],[0,60,59,255],[0,62,61,255],[0,65,63,255],[0,67,65,255],[0,69,67,255],[0,71,69,255],[0,73,71,255],[0,75,73,255],[0,77,75,255],[0,79,77,255],[0,81,79,255],[0,83,81,255],[0,85,83,255],[0,87,85,255],[0,89,87,255],[0,91,89,255],[0,93,91,255],[0,95,93,255],[0,97,95,255],[0,99,97,255],[0,101,99,255],[0,103,101,255],[0,105,103,255],[0,107,105,255],[0,109,107,255],[0,111,109,255],[0,113,111,255],[0,115,113,255],[0,117,115,255],[0,119,117,255],[0,121,119,255],[0,123,121,255],[0,125,123,255],[0,128,125,255],[1,126,127,255],[3,124,129,255],[5,122,131,255],[7,120,133,255],[9,118,135,255],[11,116,137,255],[13,114,139,255],[15,112,141,255],[17,110,143,255],[19,108,145,255],[21,106,147,255],[23,104,149,255],[25,102,151,255],[27,100,153,255],[29,98,155,255],[31,96,157,255],[33,94,159,255],[35,92,161,255],[37,90,163,255],[39,88,165,255],[41,86,167,255],[43,84,169,255],[45,82,171,255],[47,80,173,255],[49,78,175,255],[51,76,177,255],[53,74,179,255],[55,72,181,255],[57,70,183,255],[59,68,185,255],[61,66,187,255],[63,64,189,255],[65,63,191,255],[67,61,193,255],[69,59,195,255],[71,57,197,255],[73,55,199,255],[75,53,201,255],[77,51,203,255],[79,49,205,255],[81,47,207,255],[83,45,209,255],[85,43,211,255],[86,41,213,255],[88,39,215,255],[90,37,217,255],[92,35,219,255],[94,33,221,255],[96,31,223,255],[98,29,225,255],[100,27,227,255],[102,25,229,255],[104,23,231,255],[106,21,233,255],[108,19,235,255],[110,17,237,255],[112,15,239,255],[114,13,241,255],[116,11,243,255],[118,9,245,255],[120,7,247,255],[122,5,249,255],[124,3,251,255],[126,1,253,255],[128,0,255,255],[130,2,252,255],[132,4,248,255],[134,6,244,255],[136,8,240,255],[138,10,236,255],[140,12,232,255],[142,14,228,255],[144,16,224,255],[146,18,220,255],[148,20,216,255],[150,22,212,255],[152,24,208,255],[154,26,204,255],[156,28,200,255],[158,30,196,255],[160,32,192,255],[162,34,188,255],[164,36,184,255],[166,38,180,255],[168,40,176,255],[170,42,172,255],[171,44,168,255],[173,46,164,255],[175,48,160,255],[177,50,156,255],[179,52,152,255],[181,54,148,255],[183,56,144,255],[185,58,140,255],[187,60,136,255],[189,62,132,255],[191,64,128,255],[193,66,124,255],[195,68,120,255],[197,70,116,255],[199,72,112,255],[201,74,108,255],[203,76,104,255],[205,78,100,255],[207,80,96,255],[209,82,92,255],[211,84,88,255],[213,86,84,255],[215,88,80,255],[217,90,76,255],[219,92,72,255],[221,94,68,255],[223,96,64,255],[225,98,60,255],[227,100,56,255],[229,102,52,255],[231,104,48,255],[233,106,44,255],[235,108,40,255],[237,110,36,255],[239,112,32,255],[241,114,28,255],[243,116,24,255],[245,118,20,255],[247,120,16,255],[249,122,12,255],[251,124,8,255],[253,126,4,255],[255,128,0,255],[255,130,4,255],[255,132,8,255],[255,134,12,255],[255,136,16,255],[255,138,20,255],[255,140,24,255],[255,142,28,255],[255,144,32,255],[255,146,36,255],[255,148,40,255],[255,150,44,255],[255,152,48,255],[255,154,52,255],[255,156,56,255],[255,158,60,255],[255,160,64,255],[255,162,68,255],[255,164,72,255],[255,166,76,255],[255,168,80,255],[255,170,85,255],[255,172,89,255],[255,174,93,255],[255,176,97,255],[255,178,101,255],[255,180,105,255],[255,182,109,255],[255,184,113,255],[255,186,117,255],[255,188,121,255],[255,190,125,255],[255,192,129,255],[255,194,133,255],[255,196,137,255],[255,198,141,255],[255,200,145,255],[255,202,149,255],[255,204,153,255],[255,206,157,255],[255,208,161,255],[255,210,165,255],[255,212,170,255],[255,214,174,255],[255,216,178,255],[255,218,182,255],[255,220,186,255],[255,222,190,255],[255,224,194,255],[255,226,198,255],[255,228,202,255],[255,230,206,255],[255,232,210,255],[255,234,214,255],[255,236,218,255],[255,238,222,255],[255,240,226,255],[255,242,230,255],[255,244,234,255],[255,246,238,255],[255,248,242,255],[255,250,246,255],[255,252,250,255],[255,255,255,255]]},hotMetalBlue:{name:'Hot Metal Blue',numColors:256,colors:[[0,0,0,255],[0,0,2,255],[0,0,4,255],[0,0,6,255],[0,0,8,255],[0,0,10,255],[0,0,12,255],[0,0,14,255],[0,0,16,255],[0,0,17,255],[0,0,19,255],[0,0,21,255],[0,0,23,255],[0,0,25,255],[0,0,27,255],[0,0,29,255],[0,0,31,255],[0,0,33,255],[0,0,35,255],[0,0,37,255],[0,0,39,255],[0,0,41,255],[0,0,43,255],[0,0,45,255],[0,0,47,255],[0,0,49,255],[0,0,51,255],[0,0,53,255],[0,0,55,255],[0,0,57,255],[0,0,59,255],[0,0,61,255],[0,0,63,255],[0,0,65,255],[0,0,67,255],[0,0,69,255],[0,0,71,255],[0,0,73,255],[0,0,75,255],[0,0,77,255],[0,0,79,255],[0,0,81,255],[0,0,83,255],[0,0,84,255],[0,0,86,255],[0,0,88,255],[0,0,90,255],[0,0,92,255],[0,0,94,255],[0,0,96,255],[0,0,98,255],[0,0,100,255],[0,0,102,255],[0,0,104,255],[0,0,106,255],[0,0,108,255],[0,0,110,255],[0,0,112,255],[0,0,114,255],[0,0,116,255],[0,0,117,255],[0,0,119,255],[0,0,121,255],[0,0,123,255],[0,0,125,255],[0,0,127,255],[0,0,129,255],[0,0,131,255],[0,0,133,255],[0,0,135,255],[0,0,137,255],[0,0,139,255],[0,0,141,255],[0,0,143,255],[0,0,145,255],[0,0,147,255],[0,0,149,255],[0,0,151,255],[0,0,153,255],[0,0,155,255],[0,0,157,255],[0,0,159,255],[0,0,161,255],[0,0,163,255],[0,0,165,255],[0,0,167,255],[3,0,169,255],[6,0,171,255],[9,0,173,255],[12,0,175,255],[15,0,177,255],[18,0,179,255],[21,0,181,255],[24,0,183,255],[26,0,184,255],[29,0,186,255],[32,0,188,255],[35,0,190,255],[38,0,192,255],[41,0,194,255],[44,0,196,255],[47,0,198,255],[50,0,200,255],[52,0,197,255],[55,0,194,255],[57,0,191,255],[59,0,188,255],[62,0,185,255],[64,0,182,255],[66,0,179,255],[69,0,176,255],[71,0,174,255],[74,0,171,255],[76,0,168,255],[78,0,165,255],[81,0,162,255],[83,0,159,255],[85,0,156,255],[88,0,153,255],[90,0,150,255],[93,2,144,255],[96,4,138,255],[99,6,132,255],[102,8,126,255],[105,9,121,255],[108,11,115,255],[111,13,109,255],[114,15,103,255],[116,17,97,255],[119,19,91,255],[122,21,85,255],[125,23,79,255],[128,24,74,255],[131,26,68,255],[134,28,62,255],[137,30,56,255],[140,32,50,255],[143,34,47,255],[146,36,44,255],[149,38,41,255],[152,40,38,255],[155,41,35,255],[158,43,32,255],[161,45,29,255],[164,47,26,255],[166,49,24,255],[169,51,21,255],[172,53,18,255],[175,55,15,255],[178,56,12,255],[181,58,9,255],[184,60,6,255],[187,62,3,255],[190,64,0,255],[194,66,0,255],[198,68,0,255],[201,70,0,255],[205,72,0,255],[209,73,0,255],[213,75,0,255],[217,77,0,255],[221,79,0,255],[224,81,0,255],[228,83,0,255],[232,85,0,255],[236,87,0,255],[240,88,0,255],[244,90,0,255],[247,92,0,255],[251,94,0,255],[255,96,0,255],[255,98,3,255],[255,100,6,255],[255,102,9,255],[255,104,12,255],[255,105,15,255],[255,107,18,255],[255,109,21,255],[255,111,24,255],[255,113,26,255],[255,115,29,255],[255,117,32,255],[255,119,35,255],[255,120,38,255],[255,122,41,255],[255,124,44,255],[255,126,47,255],[255,128,50,255],[255,130,53,255],[255,132,56,255],[255,134,59,255],[255,136,62,255],[255,137,65,255],[255,139,68,255],[255,141,71,255],[255,143,74,255],[255,145,76,255],[255,147,79,255],[255,149,82,255],[255,151,85,255],[255,152,88,255],[255,154,91,255],[255,156,94,255],[255,158,97,255],[255,160,100,255],[255,162,103,255],[255,164,106,255],[255,166,109,255],[255,168,112,255],[255,169,115,255],[255,171,118,255],[255,173,121,255],[255,175,124,255],[255,177,126,255],[255,179,129,255],[255,181,132,255],[255,183,135,255],[255,184,138,255],[255,186,141,255],[255,188,144,255],[255,190,147,255],[255,192,150,255],[255,194,153,255],[255,196,156,255],[255,198,159,255],[255,200,162,255],[255,201,165,255],[255,203,168,255],[255,205,171,255],[255,207,174,255],[255,209,176,255],[255,211,179,255],[255,213,182,255],[255,215,185,255],[255,216,188,255],[255,218,191,255],[255,220,194,255],[255,222,197,255],[255,224,200,255],[255,226,203,255],[255,228,206,255],[255,229,210,255],[255,231,213,255],[255,233,216,255],[255,235,219,255],[255,237,223,255],[255,239,226,255],[255,240,229,255],[255,242,232,255],[255,244,236,255],[255,246,239,255],[255,248,242,255],[255,250,245,255],[255,251,249,255],[255,253,252,255],[255,255,255,255]]},pet20Step:{name:'PET 20 Step',numColors:256,colors:[[0,0,0,255],[0,0,0,255],[0,0,0,255],[0,0,0,255],[0,0,0,255],[0,0,0,255],[0,0,0,255],[0,0,0,255],[0,0,0,255],[0,0,0,255],[0,0,0,255],[0,0,0,255],[0,0,0,255],[96,0,80,255],[96,0,80,255],[96,0,80,255],[96,0,80,255],[96,0,80,255],[96,0,80,255],[96,0,80,255],[96,0,80,255],[96,0,80,255],[96,0,80,255],[96,0,80,255],[96,0,80,255],[96,0,80,255],[48,48,80,255],[48,48,80,255],[48,48,80,255],[48,48,80,255],[48,48,80,255],[48,48,80,255],[48,48,80,255],[48,48,80,255],[48,48,80,255],[48,48,80,255],[48,48,80,255],[48,48,80,255],[48,48,80,255],[48,48,112,255],[48,48,112,255],[48,48,112,255],[48,48,112,255],[48,48,112,255],[48,48,112,255],[48,48,112,255],[48,48,112,255],[48,48,112,255],[48,48,112,255],[48,48,112,255],[48,48,112,255],[80,80,128,255],[80,80,128,255],[80,80,128,255],[80,80,128,255],[80,80,128,255],[80,80,128,255],[80,80,128,255],[80,80,128,255],[80,80,128,255],[80,80,128,255],[80,80,128,255],[80,80,128,255],[80,80,128,255],[96,96,176,255],[96,96,176,255],[96,96,176,255],[96,96,176,255],[96,96,176,255],[96,96,176,255],[96,96,176,255],[96,96,176,255],[96,96,176,255],[96,96,176,255],[96,96,176,255],[96,96,176,255],[96,96,176,255],[112,112,192,255],[112,112,192,255],[112,112,192,255],[112,112,192,255],[112,112,192,255],[112,112,192,255],[112,112,192,255],[112,112,192,255],[112,112,192,255],[112,112,192,255],[112,112,192,255],[112,112,192,255],[112,112,192,255],[128,128,224,255],[128,128,224,255],[128,128,224,255],[128,128,224,255],[128,128,224,255],[128,128,224,255],[128,128,224,255],[128,128,224,255],[128,128,224,255],[128,128,224,255],[128,128,224,255],[128,128,224,255],[48,96,48,255],[48,96,48,255],[48,96,48,255],[48,96,48,255],[48,96,48,255],[48,96,48,255],[48,96,48,255],[48,96,48,255],[48,96,48,255],[48,96,48,255],[48,96,48,255],[48,96,48,255],[48,96,48,255],[48,144,48,255],[48,144,48,255],[48,144,48,255],[48,144,48,255],[48,144,48,255],[48,144,48,255],[48,144,48,255],[48,144,48,255],[48,144,48,255],[48,144,48,255],[48,144,48,255],[48,144,48,255],[48,144,48,255],[80,192,80,255],[80,192,80,255],[80,192,80,255],[80,192,80,255],[80,192,80,255],[80,192,80,255],[80,192,80,255],[80,192,80,255],[80,192,80,255],[80,192,80,255],[80,192,80,255],[80,192,80,255],[80,192,80,255],[64,224,64,255],[64,224,64,255],[64,224,64,255],[64,224,64,255],[64,224,64,255],[64,224,64,255],[64,224,64,255],[64,224,64,255],[64,224,64,255],[64,224,64,255],[64,224,64,255],[64,224,64,255],[224,224,80,255],[224,224,80,255],[224,224,80,255],[224,224,80,255],[224,224,80,255],[224,224,80,255],[224,224,80,255],[224,224,80,255],[224,224,80,255],[224,224,80,255],[224,224,80,255],[224,224,80,255],[224,224,80,255],[208,208,96,255],[208,208,96,255],[208,208,96,255],[208,208,96,255],[208,208,96,255],[208,208,96,255],[208,208,96,255],[208,208,96,255],[208,208,96,255],[208,208,96,255],[208,208,96,255],[208,208,96,255],[208,208,96,255],[208,176,64,255],[208,176,64,255],[208,176,64,255],[208,176,64,255],[208,176,64,255],[208,176,64,255],[208,176,64,255],[208,176,64,255],[208,176,64,255],[208,176,64,255],[208,176,64,255],[208,176,64,255],[208,176,64,255],[208,144,0,255],[208,144,0,255],[208,144,0,255],[208,144,0,255],[208,144,0,255],[208,144,0,255],[208,144,0,255],[208,144,0,255],[208,144,0,255],[208,144,0,255],[208,144,0,255],[208,144,0,255],[192,96,0,255],[192,96,0,255],[192,96,0,255],[192,96,0,255],[192,96,0,255],[192,96,0,255],[192,96,0,255],[192,96,0,255],[192,96,0,255],[192,96,0,255],[192,96,0,255],[192,96,0,255],[192,96,0,255],[176,48,0,255],[176,48,0,255],[176,48,0,255],[176,48,0,255],[176,48,0,255],[176,48,0,255],[176,48,0,255],[176,48,0,255],[176,48,0,255],[176,48,0,255],[176,48,0,255],[176,48,0,255],[176,48,0,255],[255,0,0,255],[255,0,0,255],[255,0,0,255],[255,0,0,255],[255,0,0,255],[255,0,0,255],[255,0,0,255],[255,0,0,255],[255,0,0,255],[255,0,0,255],[255,0,0,255],[255,0,0,255],[255,0,0,255],[255,255,255,255],[255,255,255,255],[255,255,255,255],[255,255,255,255],[255,255,255,255],[255,255,255,255],[255,255,255,255],[255,255,255,255],[255,255,255,255],[255,255,255,255],[255,255,255,255],[255,255,255,255],[255,255,255,255]]},invertedGray:{name:'Inverted Gray',numColors:256,gamma:1,segmentedData:{red:[[1,1,1],[0,0,0]],green:[[1,1,1],[0,0,0]],blue:[[1,1,1],[0,0,0]]}},gray:{name:'Gray',numColors:256,gamma:1,segmentedData:{red:[[0,0,0],[1,1,1]],green:[[0,0,0],[1,1,1]],blue:[[0,0,0],[1,1,1]]}},jet:{name:'Jet',numColors:256,gamma:1,segmentedData:{red:[[0,0,0],[0.35,0,0],[0.66,1,1],[0.89,1,1],[1,0.5,0.5]],green:[[0,0,0],[0.125,0,0],[0.375,1,1],[0.64,1,1],[0.91,0,0],[1,0,0]],blue:[[0,0.5,0.5],[0.11,1,1],[0.34,1,1],[0.65,0,0],[1,0,0]]}},hsv:{name:'HSV',numColors:256,gamma:1,segmentedData:{red:[[0,1,1],[0.158730,1,1],[0.174603,0.968750,0.968750],[0.333333,0.031250,0.031250],[0.349206,0,0],[0.666667,0,0],[0.682540,0.031250,0.031250],[0.841270,0.968750,0.968750],[0.857143,1,1],[1,1,1]],green:[[0,0,0],[0.158730,0.937500,0.937500],[0.174603,1,1],[0.507937,1,1],[0.666667,0.062500,0.062500],[0.682540,0,0],[1,0,0]],blue:[[0,0,0],[0.333333,0,0],[0.349206,0.062500,0.062500],[0.507937,1,1],[0.841270,1,1],[0.857143,0.937500,0.937500],[1,0.09375,0.09375]]}},hot:{name:'Hot',numColors:256,gamma:1,segmentedData:{red:[[0,0.0416,0.0416],[0.365079,1,1],[1,1,1]],green:[[0,0,0],[0.365079,0,0],[0.746032,1,1],[1,1,1]],blue:[[0,0,0],[0.746032,0,0],[1,1,1]]}},cool:{name:'Cool',numColors:256,gamma:1,segmentedData:{red:[[0,0,0],[1,1,1]],green:[[0,1,1],[1,0,0]],blue:[[0,1,1],[1,1,1]]}},spring:{name:'Spring',numColors:256,gamma:1,segmentedData:{red:[[0,1,1],[1,1,1]],green:[[0,0,0],[1,1,1]],blue:[[0,1,1],[1,0,0]]}},summer:{name:'Summer',numColors:256,gamma:1,segmentedData:{red:[[0,0,0],[1,1,1]],green:[[0,0.5,0.5],[1,1,1]],blue:[[0,0.4,0.4],[1,0.4,0.4]]}},autumn:{name:'Autumn',numColors:256,gamma:1,segmentedData:{red:[[0,1,1],[1,1,1]],green:[[0,0,0],[1,1,1]],blue:[[0,0,0],[1,0,0]]}},winter:{name:'Winter',numColors:256,gamma:1,segmentedData:{red:[[0,0,0],[1,0,0]],green:[[0,0,0],[1,1,1]],blue:[[0,1,1],[1,0.5,0.5]]}},bone:{name:'Bone',numColors:256,gamma:1,segmentedData:{red:[[0,0,0],[0.746032,0.652778,0.652778],[1,1,1]],green:[[0,0,0],[0.365079,0.319444,0.319444],[0.746032,0.777778,0.777778],[1,1,1]],blue:[[0,0,0],[0.365079,0.444444,0.444444],[1,1,1]]}},copper:{name:'Copper',numColors:256,gamma:1,segmentedData:{red:[[0,0,0],[0.809524,1,1],[1,1,1]],green:[[0,0,0],[1,0.7812,0.7812]],blue:[[0,0,0],[1,0.4975,0.4975]]}},spectral:{name:'Spectral',numColors:256,gamma:1,segmentedData:{red:[[0,0,0],[0.05,0.4667,0.4667],[0.10,0.5333,0.5333],[0.15,0,0],[0.20,0,0],[0.25,0,0],[0.30,0,0],[0.35,0,0],[0.40,0,0],[0.45,0,0],[0.50,0,0],[0.55,0,0],[0.60,0,0],[0.65,0.7333,0.7333],[0.70,0.9333,0.9333],[0.75,1,1],[0.80,1,1],[0.85,1,1],[0.90,0.8667,0.8667],[0.95,0.80,0.80],[1,0.80,0.80]],green:[[0,0,0],[0.05,0,0],[0.10,0,0],[0.15,0,0],[0.20,0,0],[0.25,0.4667,0.4667],[0.30,0.6000,0.6000],[0.35,0.6667,0.6667],[0.40,0.6667,0.6667],[0.45,0.6000,0.6000],[0.50,0.7333,0.7333],[0.55,0.8667,0.8667],[0.60,1,1],[0.65,1,1],[0.70,0.9333,0.9333],[0.75,0.8000,0.8000],[0.80,0.6000,0.6000],[0.85,0,0],[0.90,0,0],[0.95,0,0],[1,0.80,0.80]],blue:[[0,0,0],[0.05,0.5333,0.5333],[0.10,0.6000,0.6000],[0.15,0.6667,0.6667],[0.20,0.8667,0.8667],[0.25,0.8667,0.8667],[0.30,0.8667,0.8667],[0.35,0.6667,0.6667],[0.40,0.5333,0.5333],[0.45,0,0],[0.5,0,0],[0.55,0,0],[0.60,0,0],[0.65,0,0],[0.70,0,0],[0.75,0,0],[0.80,0,0],[0.85,0,0],[0.90,0,0],[0.95,0,0],[1,0.80,0.80]]}},coolwarm:{name:'CoolWarm',numColors:256,gamma:1,segmentedData:{red:[[0,0.2298057,0.2298057],[0.03125,0.26623388,0.26623388],[0.0625,0.30386891,0.30386891],[0.09375,0.342804478,0.342804478],[0.125,0.38301334,0.38301334],[0.15625,0.424369608,0.424369608],[0.1875,0.46666708,0.46666708],[0.21875,0.509635204,0.509635204],[0.25,0.552953156,0.552953156],[0.28125,0.596262162,0.596262162],[0.3125,0.639176211,0.639176211],[0.34375,0.681291281,0.681291281],[0.375,0.722193294,0.722193294],[0.40625,0.761464949,0.761464949],[0.4375,0.798691636,0.798691636],[0.46875,0.833466556,0.833466556],[0.5,0.865395197,0.865395197],[0.53125,0.897787179,0.897787179],[0.5625,0.924127593,0.924127593],[0.59375,0.944468518,0.944468518],[0.625,0.958852946,0.958852946],[0.65625,0.96732803,0.96732803],[0.6875,0.969954137,0.969954137],[0.71875,0.966811177,0.966811177],[0.75,0.958003065,0.958003065],[0.78125,0.943660866,0.943660866],[0.8125,0.923944917,0.923944917],[0.84375,0.89904617,0.89904617],[0.875,0.869186849,0.869186849],[0.90625,0.834620542,0.834620542],[0.9375,0.795631745,0.795631745],[0.96875,0.752534934,0.752534934],[1,0.705673158,0.705673158]],green:[[0,0.298717966,0.298717966],[0.03125,0.353094838,0.353094838],[0.0625,0.406535296,0.406535296],[0.09375,0.458757618,0.458757618],[0.125,0.50941904,0.50941904],[0.15625,0.558148092,0.558148092],[0.1875,0.604562568,0.604562568],[0.21875,0.648280772,0.648280772],[0.25,0.688929332,0.688929332],[0.28125,0.726149107,0.726149107],[0.3125,0.759599947,0.759599947],[0.34375,0.788964712,0.788964712],[0.375,0.813952739,0.813952739],[0.40625,0.834302879,0.834302879],[0.4375,0.849786142,0.849786142],[0.46875,0.860207984,0.860207984],[0.5,0.86541021,0.86541021],[0.53125,0.848937047,0.848937047],[0.5625,0.827384882,0.827384882],[0.59375,0.800927443,0.800927443],[0.625,0.769767752,0.769767752],[0.65625,0.734132809,0.734132809],[0.6875,0.694266682,0.694266682],[0.71875,0.650421156,0.650421156],[0.75,0.602842431,0.602842431],[0.78125,0.551750968,0.551750968],[0.8125,0.49730856,0.49730856],[0.84375,0.439559467,0.439559467],[0.875,0.378313092,0.378313092],[0.90625,0.312874446,0.312874446],[0.9375,0.24128379,0.24128379],[0.96875,0.157246067,0.157246067],[1,0.01555616,0.01555616]],blue:[[0,0.753683153,0.753683153],[0.03125,0.801466763,0.801466763],[0.0625,0.84495867,0.84495867],[0.09375,0.883725899,0.883725899],[0.125,0.917387822,0.917387822],[0.15625,0.945619588,0.945619588],[0.1875,0.968154911,0.968154911],[0.21875,0.98478814,0.98478814],[0.25,0.995375608,0.995375608],[0.28125,0.999836203,0.999836203],[0.3125,0.998151185,0.998151185],[0.34375,0.990363227,0.990363227],[0.375,0.976574709,0.976574709],[0.40625,0.956945269,0.956945269],[0.4375,0.931688648,0.931688648],[0.46875,0.901068838,0.901068838],[0.5,0.865395561,0.865395561],[0.53125,0.820880546,0.820880546],[0.5625,0.774508472,0.774508472],[0.59375,0.726736146,0.726736146],[0.625,0.678007945,0.678007945],[0.65625,0.628751763,0.628751763],[0.6875,0.579375448,0.579375448],[0.71875,0.530263762,0.530263762],[0.75,0.481775914,0.481775914],[0.78125,0.434243684,0.434243684],[0.8125,0.387970225,0.387970225],[0.84375,0.343229596,0.343229596],[0.875,0.300267182,0.300267182],[0.90625,0.259301199,0.259301199],[0.9375,0.220525627,0.220525627],[0.96875,0.184115123,0.184115123],[1,0.150232812,0.150232812]]}},blues:{name:'Blues',numColors:256,gamma:1,segmentedData:{red:[[0,0.9686274528503418,0.9686274528503418],[0.125,0.87058824300765991,0.87058824300765991],[0.25,0.7764706015586853,0.7764706015586853],[0.375,0.61960786581039429,0.61960786581039429],[0.5,0.41960784792900085,0.41960784792900085],[0.625,0.25882354378700256,0.25882354378700256],[0.75,0.12941177189350128,0.12941177189350128],[0.875,0.031372550874948502,0.031372550874948502],[1,0.031372550874948502,0.031372550874948502]],green:[[0,0.9843137264251709,0.9843137264251709],[0.125,0.92156863212585449,0.92156863212585449],[0.25,0.85882353782653809,0.85882353782653809],[0.375,0.7921568751335144,0.7921568751335144],[0.5,0.68235296010971069,0.68235296010971069],[0.625,0.57254904508590698,0.57254904508590698],[0.75,0.44313725829124451,0.44313725829124451],[0.875,0.31764706969261169,0.31764706969261169],[1,0.18823529779911041,0.18823529779911041]],blue:[[0,1,1],[0.125,0.9686274528503418,0.9686274528503418],[0.25,0.93725490570068359,0.93725490570068359],[0.375,0.88235294818878174,0.88235294818878174],[0.5,0.83921569585800171,0.83921569585800171],[0.625,0.7764706015586853,0.7764706015586853],[0.75,0.70980393886566162,0.70980393886566162],[0.875,0.61176472902297974,0.61176472902297974],[1,0.41960784792900085,0.41960784792900085]]}}};function linspace(a,b,n){n=n===null?100:n;var increment=(b-a)/(n-1);var vector=[];while(n-->0){vector.push(a);a+=increment}vector[vector.length-1]=b;return vector}function getRank(array,elem){var left=0;var right=array.length-1;while(left<=right){var mid=left+Math.floor((right-left)/2);var midElem=array[mid];if(midElem===elem){return mid}else if(elem<midElem){right=mid-1}else{left=mid+1}}return left}function searchSorted(inputArray,values){var i=void 0;var indexes=[];var len=values.length;inputArray.sort(function(a,b){return a-b});for(i=0;i<len;i++){indexes[i]=getRank(inputArray,values[i])}return indexes}function makeMappingArray(N,data,gamma){var i=void 0;var x=[];var y0=[];var y1=[];var lut=[];gamma=gamma===null?1:gamma;for(i=0;i<data.length;i++){var element=data[i];x.push((N-1)*element[0]);y0.push(element[1]);y1.push(element[1])}var xLinSpace=linspace(0,1,N);for(i=0;i<N;i++){xLinSpace[i]=(N-1)*Math.pow(xLinSpace[i],gamma)}var xLinSpaceIndexes=searchSorted(x,xLinSpace);for(i=1;i<N-1;i++){var index=xLinSpaceIndexes[i];var colorPercent=(xLinSpace[i]-x[index-1])/(x[index]-x[index-1]);var colorDelta=y0[index]-y1[index-1];lut[i]=colorPercent*colorDelta+y1[index-1]}lut[0]=y1[0];lut[N-1]=y0[data.length-1];return lut}function createLinearSegmentedColormap(segmentedData,N,gamma){var i=void 0;var lut=[];N=N===null?256:N;gamma=gamma===null?1:gamma;var redLut=makeMappingArray(N,segmentedData.red,gamma);var greenLut=makeMappingArray(N,segmentedData.green,gamma);var blueLut=makeMappingArray(N,segmentedData.blue,gamma);for(i=0;i<N;i++){var red=Math.round(redLut[i]*255);var green=Math.round(greenLut[i]*255);var blue=Math.round(blueLut[i]*255);var rgba=[red,green,blue,255];lut.push(rgba)}return lut}function getColormapsList(){var colormaps=[];var keys=Object.keys(colormapsData);keys.forEach(function(key){if(colormapsData.hasOwnProperty(key)){var colormap=colormapsData[key];colormaps.push({id:key,name:colormap.name})}});colormaps.sort(function(a,b){var aName=a.name.toLowerCase();var bName=b.name.toLowerCase();if(aName===bName){return 0}return aName<bName?-1:1});return colormaps}function getColormap(id,colormapData){var colormap=colormapsData[id];if(!colormap){colormap=colormapsData[id]=colormapData||{name:'',colors:[]}}if(!colormap.colors&&colormap.segmentedData){colormap.colors=createLinearSegmentedColormap(colormap.segmentedData,colormap.numColors,colormap.gamma)}return{getId:function getId(){return id},getColorSchemeName:function getColorSchemeName(){return colormap.name},setColorSchemeName:function setColorSchemeName(name){colormap.name=name},getNumberOfColors:function getNumberOfColors(){return colormap.colors.length},setNumberOfColors:function setNumberOfColors(numColors){while(colormap.colors.length<numColors){colormap.colors.push(COLOR_TRANSPARENT)}colormap.colors.length=numColors},getColor:function getColor(index){if(this.isValidIndex(index)){return colormap.colors[index]}return COLOR_TRANSPARENT},getColorRepeating:function getColorRepeating(index){var numColors=colormap.colors.length;index=numColors?index%numColors:0;return this.getColor(index)},setColor:function setColor(index,rgba){if(this.isValidIndex(index)){colormap.colors[index]=rgba}},addColor:function addColor(rgba){colormap.colors.push(rgba)},insertColor:function insertColor(index,rgba){if(this.isValidIndex(index)){colormap.colors.splice(index,1,rgba)}},removeColor:function removeColor(index){if(this.isValidIndex(index)){colormap.colors.splice(index,1)}},clearColors:function clearColors(){colormap.colors=[]},buildLookupTable:function buildLookupTable(lut){if(!lut){return}var numColors=colormap.colors.length;lut.setNumberOfTableValues(numColors);for(var i=0;i<numColors;i++){lut.setTableValue(i,colormap.colors[i])}},createLookupTable:function createLookupTable(){var lut=new _lookupTable2.default();this.buildLookupTable(lut);return lut},isValidIndex:function isValidIndex(index){return index>=0&&index<colormap.colors.length}}}}),(function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor}}();function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function");}}var BELOW_RANGE_COLOR_INDEX=0;var ABOVE_RANGE_COLOR_INDEX=1;var NAN_COLOR_INDEX=2;function HSVToRGB(hue,sat,val){if(hue>1){throw new Error('HSVToRGB expects hue < 1');}var rgb=[];if(sat===0){rgb[0]=val;rgb[1]=val;rgb[2]=val;return rgb}var hueCase=Math.floor(hue*6);var frac=6*hue-hueCase;var lx=val*(1-sat);var ly=val*(1-sat*frac);var lz=val*(1-sat*(1-frac));switch(hueCase){case 0:case 6:rgb[0]=val;rgb[1]=lz;rgb[2]=lx;break;case 1:rgb[0]=ly;rgb[1]=val;rgb[2]=lx;break;case 2:rgb[0]=lx;rgb[1]=val;rgb[2]=lz;break;case 3:rgb[0]=lx;rgb[1]=ly;rgb[2]=val;break;case 4:rgb[0]=lz;rgb[1]=lx;rgb[2]=val;break;case 5:rgb[0]=val;rgb[1]=lx;rgb[2]=ly;break}return rgb}function linearIndexLookupMain(v,p){var dIndex=void 0;if(v<p.Range[0]){dIndex=p.MaxIndex+BELOW_RANGE_COLOR_INDEX+1.5}else if(v>p.Range[1]){dIndex=p.MaxIndex+ABOVE_RANGE_COLOR_INDEX+1.5}else{dIndex=(v+p.Shift)*p.Scale}return Math.floor(dIndex)}var LookupTable=function(){function LookupTable(){_classCallCheck(this,LookupTable);this.NumberOfColors=256;this.Ramp='linear';this.TableRange=[0,255];this.HueRange=[0,0.66667];this.SaturationRange=[1,1];this.ValueRange=[1,1];this.AlphaRange=[1,1];this.NaNColor=[128,0,0,255];this.BelowRangeColor=[0,0,0,255];this.UseBelowRangeColor=true;this.AboveRangeColor=[255,255,255,255];this.UseAboveRangeColor=true;this.InputRange=[0,255];this.Table=[]}_createClass(LookupTable,[{key:'setNumberOfTableValues',value:function setNumberOfTableValues(number){this.NumberOfColors=number}},{key:'setRamp',value:function setRamp(ramp){this.Ramp=ramp}},{key:'setTableRange',value:function setTableRange(start,end){this.TableRange[0]=start;this.TableRange[1]=end}},{key:'setHueRange',value:function setHueRange(start,end){this.HueRange[0]=start;this.HueRange[1]=end}},{key:'setSaturationRange',value:function setSaturationRange(start,end){this.SaturationRange[0]=start;this.SaturationRange[1]=end}},{key:'setValueRange',value:function setValueRange(start,end){this.ValueRange[0]=start;this.ValueRange[1]=end}},{key:'setRange',value:function setRange(start,end){this.InputRange[0]=start;this.InputRange[1]=end}},{key:'setAlphaRange',value:function setAlphaRange(start,end){this.AlphaRange[0]=start;this.AlphaRange[1]=end}},{key:'getColor',value:function getColor(scalar){return this.mapValue(scalar)}},{key:'build',value:function build(force){if(this.Table.length>1&&!force){return}this.Table=[];var maxIndex=this.NumberOfColors-1;var hinc=void 0,sinc=void 0,vinc=void 0,ainc=void 0;if(maxIndex){hinc=(this.HueRange[1]-this.HueRange[0])/maxIndex;sinc=(this.SaturationRange[1]-this.SaturationRange[0])/maxIndex;vinc=(this.ValueRange[1]-this.ValueRange[0])/maxIndex;ainc=(this.AlphaRange[1]-this.AlphaRange[0])/maxIndex}else{hinc=sinc=vinc=ainc=0.0}for(var i=0;i<=maxIndex;i++){var hue=this.HueRange[0]+i*hinc;var sat=this.SaturationRange[0]+i*sinc;var val=this.ValueRange[0]+i*vinc;var alpha=this.AlphaRange[0]+i*ainc;var rgb=HSVToRGB(hue,sat,val);var c_rgba=[];switch(this.Ramp){case'scurve':c_rgba[0]=Math.floor(127.5*(1.0+Math.cos((1.0-rgb[0])*Math.PI)));c_rgba[1]=Math.floor(127.5*(1.0+Math.cos((1.0-rgb[1])*Math.PI)));c_rgba[2]=Math.floor(127.5*(1.0+Math.cos((1.0-rgb[2])*Math.PI)));c_rgba[3]=Math.floor(alpha*255);break;case'linear':c_rgba[0]=Math.floor(rgb[0]*255+0.5);c_rgba[1]=Math.floor(rgb[1]*255+0.5);c_rgba[2]=Math.floor(rgb[2]*255+0.5);c_rgba[3]=Math.floor(alpha*255+0.5);break;case'sqrt':c_rgba[0]=Math.floor(Math.sqrt(rgb[0])*255+0.5);c_rgba[1]=Math.floor(Math.sqrt(rgb[1])*255+0.5);c_rgba[2]=Math.floor(Math.sqrt(rgb[2])*255+0.5);c_rgba[3]=Math.floor(Math.sqrt(alpha)*255+0.5);break;default:throw new Error('Invalid Ramp value ('+this.Ramp+')');}this.Table.push(c_rgba)}this.buildSpecialColors()}},{key:'buildSpecialColors',value:function buildSpecialColors(){var numberOfColors=this.NumberOfColors;var belowRangeColorIndex=numberOfColors+BELOW_RANGE_COLOR_INDEX;var aboveRangeColorIndex=numberOfColors+ABOVE_RANGE_COLOR_INDEX;var nanColorIndex=numberOfColors+NAN_COLOR_INDEX;if(this.UseBelowRangeColor||numberOfColors===0){this.Table[belowRangeColorIndex]=this.BelowRangeColor}else{this.Table[belowRangeColorIndex]=this.Table[0]}if(this.UseAboveRangeColor||numberOfColors===0){this.Table[aboveRangeColorIndex]=this.AboveRangeColor}else{this.Table[aboveRangeColorIndex]=this.Table[numberOfColors-1]}this.Table[nanColorIndex]=this.NaNColor}},{key:'mapValue',value:function mapValue(v){var index=this.getIndex(v);if(index<0){return this.NaNColor}else if(index===0){if(this.UseBelowRangeColor&&v<this.TableRange[0]){return this.BelowRangeColor}}else if(index===this.NumberOfColors-1){if(this.UseAboveRangeColor&&v>this.TableRange[1]){return this.AboveRangeColor}}return this.Table[index]}},{key:'getIndex',value:function getIndex(v){var p={};p.Range=[];p.MaxIndex=this.NumberOfColors-1;p.Shift=-this.TableRange[0];if(this.TableRange[1]<=this.TableRange[0]){p.Scale=Number.MAX_VALUE}else{p.Scale=p.MaxIndex/(this.TableRange[1]-this.TableRange[0])}p.Range[0]=this.TableRange[0];p.Range[1]=this.TableRange[1];if(isNaN(v)){return-1}var index=linearIndexLookupMain(v,p);if(index===this.NumberOfColors+BELOW_RANGE_COLOR_INDEX){index=0}else if(index===this.NumberOfColors+ABOVE_RANGE_COLOR_INDEX){index=this.NumberOfColors-1}return index}},{key:'setTableValue',value:function setTableValue(index,rgba){if(arguments.length===5){rgba=Array.prototype.slice.call(arguments,1)}if(index<0){throw new Error('Can\'t set the table value for negative index ('+index+')');}if(index>=this.NumberOfColors){new Error('Index '+index+' is greater than the number of colors '+this.NumberOfColors)}this.Table[index]=rgba;if(index===0||index===this.NumberOfColors-1){this.buildSpecialColors()}}}]);return LookupTable}();exports.default=LookupTable}),(function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.default=function(image,lut,canvasImageDataData){var start=(0,_now2.default)();var pixelData=image.getPixelData();image.stats.lastGetPixelDataTime=(0,_now2.default)()-start;var numPixels=pixelData.length;var minPixelValue=image.minPixelValue;var canvasImageDataIndex=0;var storedPixelDataIndex=0;var pixelValue=void 0;start=(0,_now2.default)();if(pixelData instanceof Int16Array){if(minPixelValue<0){while(storedPixelDataIndex<numPixels){pixelValue=lut[pixelData[storedPixelDataIndex++]+ -minPixelValue];canvasImageDataData[canvasImageDataIndex++]=pixelValue;canvasImageDataData[canvasImageDataIndex++]=pixelValue;canvasImageDataData[canvasImageDataIndex++]=pixelValue;canvasImageDataData[canvasImageDataIndex++]=255}}else{while(storedPixelDataIndex<numPixels){pixelValue=lut[pixelData[storedPixelDataIndex++]];canvasImageDataData[canvasImageDataIndex++]=pixelValue;canvasImageDataData[canvasImageDataIndex++]=pixelValue;canvasImageDataData[canvasImageDataIndex++]=pixelValue;canvasImageDataData[canvasImageDataIndex++]=255}}}else if(pixelData instanceof Uint16Array){while(storedPixelDataIndex<numPixels){pixelValue=lut[pixelData[storedPixelDataIndex++]];canvasImageDataData[canvasImageDataIndex++]=pixelValue;canvasImageDataData[canvasImageDataIndex++]=pixelValue;canvasImageDataData[canvasImageDataIndex++]=pixelValue;canvasImageDataData[canvasImageDataIndex++]=255}}else if(minPixelValue<0){while(storedPixelDataIndex<numPixels){pixelValue=lut[pixelData[storedPixelDataIndex++]+ -minPixelValue];canvasImageDataData[canvasImageDataIndex++]=pixelValue;canvasImageDataData[canvasImageDataIndex++]=pixelValue;canvasImageDataData[canvasImageDataIndex++]=pixelValue;canvasImageDataData[canvasImageDataIndex++]=255}}else{while(storedPixelDataIndex<numPixels){pixelValue=lut[pixelData[storedPixelDataIndex++]];canvasImageDataData[canvasImageDataIndex++]=pixelValue;canvasImageDataData[canvasImageDataIndex++]=pixelValue;canvasImageDataData[canvasImageDataIndex++]=pixelValue;canvasImageDataData[canvasImageDataIndex++]=255}}image.stats.lastStoredPixelDataToCanvasImageDataTime=(0,_now2.default)()-start};var _now=__webpack_require__(1);var _now2=_interopRequireDefault(_now);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}}),(function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor}}();function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function");}}var Transform=exports.Transform=function(){function Transform(){_classCallCheck(this,Transform);this.reset()}_createClass(Transform,[{key:"reset",value:function reset(){this.m=[1,0,0,1,0,0]}},{key:"clone",value:function clone(){var transform=new Transform();transform.m[0]=this.m[0];transform.m[1]=this.m[1];transform.m[2]=this.m[2];transform.m[3]=this.m[3];transform.m[4]=this.m[4];transform.m[5]=this.m[5];return transform}},{key:"multiply",value:function multiply(matrix){var m11=this.m[0]*matrix.m[0]+this.m[2]*matrix.m[1];var m12=this.m[1]*matrix.m[0]+this.m[3]*matrix.m[1];var m21=this.m[0]*matrix.m[2]+this.m[2]*matrix.m[3];var m22=this.m[1]*matrix.m[2]+this.m[3]*matrix.m[3];var dx=this.m[0]*matrix.m[4]+this.m[2]*matrix.m[5]+this.m[4];var dy=this.m[1]*matrix.m[4]+this.m[3]*matrix.m[5]+this.m[5];this.m[0]=m11;this.m[1]=m12;this.m[2]=m21;this.m[3]=m22;this.m[4]=dx;this.m[5]=dy}},{key:"invert",value:function invert(){var d=1/(this.m[0]*this.m[3]-this.m[1]*this.m[2]);var m0=this.m[3]*d;var m1=-this.m[1]*d;var m2=-this.m[2]*d;var m3=this.m[0]*d;var m4=d*(this.m[2]*this.m[5]-this.m[3]*this.m[4]);var m5=d*(this.m[1]*this.m[4]-this.m[0]*this.m[5]);this.m[0]=m0;this.m[1]=m1;this.m[2]=m2;this.m[3]=m3;this.m[4]=m4;this.m[5]=m5}},{key:"rotate",value:function rotate(rad){var c=Math.cos(rad);var s=Math.sin(rad);var m11=this.m[0]*c+this.m[2]*s;var m12=this.m[1]*c+this.m[3]*s;var m21=this.m[0]*-s+this.m[2]*c;var m22=this.m[1]*-s+this.m[3]*c;this.m[0]=m11;this.m[1]=m12;this.m[2]=m21;this.m[3]=m22}},{key:"translate",value:function translate(x,y){this.m[4]+=this.m[0]*x+this.m[2]*y;this.m[5]+=this.m[1]*x+this.m[3]*y}},{key:"scale",value:function scale(sx,sy){this.m[0]*=sx;this.m[1]*=sx;this.m[2]*=sy;this.m[3]*=sy}},{key:"transformPoint",value:function transformPoint(px,py){var x=px;var y=py;px=x*this.m[0]+y*this.m[2]+this.m[4];py=x*this.m[1]+y*this.m[3]+this.m[5];return{x:px,y:py}}}]);return Transform}()}),(function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.default=function(image,viewport,invalidated){if(image.cachedLut!==undefined&&image.cachedLut.windowCenter===viewport.voi.windowCenter&&image.cachedLut.windowWidth===viewport.voi.windowWidth&&(0,_lutMatches2.default)(image.cachedLut.modalityLUT,viewport.modalityLUT)&&(0,_lutMatches2.default)(image.cachedLut.voiLUT,viewport.voiLUT)&&image.cachedLut.invert===viewport.invert&&invalidated!==true){return image.cachedLut.lutArray}(0,_generateLut2.default)(image,viewport.voi.windowWidth,viewport.voi.windowCenter,viewport.invert,viewport.modalityLUT,viewport.voiLUT);image.cachedLut.windowWidth=viewport.voi.windowWidth;image.cachedLut.windowCenter=viewport.voi.windowCenter;image.cachedLut.invert=viewport.invert;image.cachedLut.voiLUT=viewport.voiLUT;image.cachedLut.modalityLUT=viewport.modalityLUT;return image.cachedLut.lutArray};var _lutMatches=__webpack_require__(44);var _lutMatches2=_interopRequireDefault(_lutMatches);var _generateLut=__webpack_require__(18);var _generateLut2=_interopRequireDefault(_generateLut);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}}),(function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _events=__webpack_require__(16);var _events2=_interopRequireDefault(_events);var _triggerEvent=__webpack_require__(2);var _triggerEvent2=_interopRequireDefault(_triggerEvent);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var imageCache={};var cachedImages=[];var maximumSizeInBytes=1024*1024*256;var cacheSizeInBytes=0;function getCacheInfo(){return{maximumSizeInBytes:maximumSizeInBytes,cacheSizeInBytes:cacheSizeInBytes,numberOfImagesCached:cachedImages.length}}function purgeCacheIfNecessary(){if(cacheSizeInBytes<=maximumSizeInBytes){return}function compare(a,b){if(a.timeStamp>b.timeStamp){return-1}if(a.timeStamp<b.timeStamp){return 1}return 0}cachedImages.sort(compare);while(cacheSizeInBytes>maximumSizeInBytes){var lastCachedImage=cachedImages[cachedImages.length-1];cacheSizeInBytes-=lastCachedImage.sizeInBytes;delete imageCache[lastCachedImage.imageId];cachedImages.pop();(0,_triggerEvent2.default)(_events2.default,'cornerstonewebgltextureremoved',{imageId:lastCachedImage.imageId})}var cacheInfo=getCacheInfo();(0,_triggerEvent2.default)(_events2.default,'cornerstonewebgltexturecachefull',cacheInfo)}function setMaximumSizeBytes(numBytes){if(numBytes===undefined){throw new Error('setMaximumSizeBytes: parameter numBytes must not be undefined');}if(numBytes.toFixed===undefined){throw new Error('setMaximumSizeBytes: parameter numBytes must be a number');}maximumSizeInBytes=numBytes;purgeCacheIfNecessary()}function putImageTexture(image,imageTexture){var imageId=image.imageId;if(image===undefined){throw new Error('putImageTexture: image must not be undefined');}if(imageId===undefined){throw new Error('putImageTexture: imageId must not be undefined');}if(imageTexture===undefined){throw new Error('putImageTexture: imageTexture must not be undefined');}if(Object.prototype.hasOwnProperty.call(imageCache,imageId)===true){throw new Error('putImageTexture: imageId already in cache');}var cachedImage={imageId:imageId,imageTexture:imageTexture,timeStamp:new Date(),sizeInBytes:imageTexture.sizeInBytes};imageCache[imageId]=cachedImage;cachedImages.push(cachedImage);if(imageTexture.sizeInBytes===undefined){throw new Error('putImageTexture: imageTexture.sizeInBytes must not be undefined');}if(imageTexture.sizeInBytes.toFixed===undefined){throw new Error('putImageTexture: imageTexture.sizeInBytes is not a number');}cacheSizeInBytes+=cachedImage.sizeInBytes;purgeCacheIfNecessary()}function getImageTexture(imageId){if(imageId===undefined){throw new Error('getImageTexture: imageId must not be undefined');}var cachedImage=imageCache[imageId];if(cachedImage===undefined){return}cachedImage.timeStamp=new Date();return cachedImage.imageTexture}function removeImageTexture(imageId){if(imageId===undefined){throw new Error('removeImageTexture: imageId must not be undefined');}var cachedImage=imageCache[imageId];if(cachedImage===undefined){throw new Error('removeImageTexture: imageId must not be undefined');}cachedImages.splice(cachedImages.indexOf(cachedImage),1);cacheSizeInBytes-=cachedImage.sizeInBytes;delete imageCache[imageId];return cachedImage.imageTexture}function purgeCache(){while(cachedImages.length>0){var removedCachedImage=cachedImages.pop();delete imageCache[removedCachedImage.imageId]}cacheSizeInBytes=0}exports.default={purgeCache:purgeCache,getImageTexture:getImageTexture,putImageTexture:putImageTexture,removeImageTexture:removeImageTexture,setMaximumSizeBytes:setMaximumSizeBytes}}),(function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.default=function(gl,vertexShaderSrc,fragShaderSrc){var vertexShader=compileShader(gl,vertexShaderSrc,gl.VERTEX_SHADER);var fragShader=compileShader(gl,fragShaderSrc,gl.FRAGMENT_SHADER);return createProgram(gl,vertexShader,fragShader)};function compileShader(gl,shaderSource,shaderType){var shader=gl.createShader(shaderType);gl.shaderSource(shader,shaderSource);gl.compileShader(shader);var success=gl.getShaderParameter(shader,gl.COMPILE_STATUS);if(!success&&!gl.isContextLost()){var infoLog=gl.getShaderInfoLog(shader);console.error("Could not compile shader:\n"+infoLog)}return shader}function createProgram(gl,vertexShader,fragmentShader){var program=gl.createProgram();gl.attachShader(program,vertexShader);gl.attachShader(program,fragmentShader);gl.linkProgram(program);var success=gl.getProgramParameter(program,gl.LINK_STATUS);if(!success&&!gl.isContextLost()){var infoLog=gl.getProgramInfoLog(program);console.error("WebGL program filed to link:\n"+infoLog)}return program}}),(function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.renderWebImage=renderWebImage;var _setToPixelCoordinateSystem=__webpack_require__(4);var _setToPixelCoordinateSystem2=_interopRequireDefault(_setToPixelCoordinateSystem);var _renderColorImage=__webpack_require__(8);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function renderWebImage(enabledElement,invalidated){if(enabledElement===undefined){throw new Error('renderWebImage: enabledElement parameter must not be undefined');}var image=enabledElement.image;if(image===undefined){throw new Error('renderWebImage: image must be loaded before it can be drawn');}if(enabledElement.viewport.voi.windowWidth===enabledElement.image.windowWidth&&enabledElement.viewport.voi.windowCenter===enabledElement.image.windowCenter&&enabledElement.viewport.invert===false){var context=enabledElement.canvas.getContext('2d');context.setTransform(1,0,0,1,0,0);context.fillStyle='black';context.fillRect(0,0,enabledElement.canvas.width,enabledElement.canvas.height);context.imageSmoothingEnabled=!enabledElement.viewport.pixelReplication;context.mozImageSmoothingEnabled=context.imageSmoothingEnabled;(0,_setToPixelCoordinateSystem2.default)(enabledElement,context);context.drawImage(image.getImage(),0,0,image.width,image.height,0,0,image.width,image.height)}else{(0,_renderColorImage.renderColorImage)(enabledElement,invalidated)}}}),(function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.default=function(element,forceFitToWindow){var enabledElement=(0,_enabledElements.getEnabledElement)(element);var oldCanvasWidth=enabledElement.canvas.width;var oldCanvasHeight=enabledElement.canvas.height;setCanvasSize(element,enabledElement.canvas);var eventData={element:element};(0,_triggerEvent2.default)(element,'cornerstoneelementresized',eventData);if(enabledElement.image===undefined){return}if(forceFitToWindow===true){(0,_fitToWindow2.default)(element);return}if(wasFitToWindow(enabledElement,oldCanvasWidth,oldCanvasHeight)){(0,_fitToWindow2.default)(element)}else{relativeRescale(enabledElement,oldCanvasWidth,oldCanvasHeight);(0,_updateImage2.default)(element)}};var _enabledElements=__webpack_require__(0);var _fitToWindow=__webpack_require__(37);var _fitToWindow2=_interopRequireDefault(_fitToWindow);var _updateImage=__webpack_require__(5);var _updateImage2=_interopRequireDefault(_updateImage);var _triggerEvent=__webpack_require__(2);var _triggerEvent2=_interopRequireDefault(_triggerEvent);var _getImageSize=__webpack_require__(38);var _getImageSize2=_interopRequireDefault(_getImageSize);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function setCanvasSize(element,canvas){if(canvas.width!==element.clientWidth){canvas.width=element.clientWidth;canvas.style.width=element.clientWidth+'px'}if(canvas.height!==element.clientHeight){canvas.height=element.clientHeight;canvas.style.height=element.clientHeight+'px'}}function wasFitToWindow(enabledElement,oldCanvasWidth,oldCanvasHeight){var scale=enabledElement.viewport.scale;var imageSize=(0,_getImageSize2.default)(enabledElement);var imageWidth=Math.round(imageSize.width*scale);var imageHeight=Math.round(imageSize.height*scale);var x=enabledElement.viewport.translation.x;var y=enabledElement.viewport.translation.y;return imageWidth===oldCanvasWidth&&imageHeight<=oldCanvasHeight||imageWidth<=oldCanvasWidth&&imageHeight===oldCanvasHeight&&x===0&&y===0}function relativeRescale(enabledElement,oldCanvasWidth,oldCanvasHeight){var scale=enabledElement.viewport.scale;var canvasWidth=enabledElement.canvas.width;var canvasHeight=enabledElement.canvas.height;var relWidthChange=canvasWidth/oldCanvasWidth;var relHeightChange=canvasHeight/oldCanvasHeight;var relChange=Math.sqrt(relWidthChange*relHeightChange);enabledElement.viewport.scale=relChange*scale}}),(function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.default=function(element){var enabledElement=(0,_enabledElements.getEnabledElement)(element);var imageSize=(0,_getImageSize2.default)(enabledElement);var verticalScale=enabledElement.canvas.height/imageSize.height;var horizontalScale=enabledElement.canvas.width/imageSize.width;enabledElement.viewport.scale=Math.min(horizontalScale,verticalScale);enabledElement.viewport.translation.x=0;enabledElement.viewport.translation.y=0;(0,_updateImage2.default)(element)};var _enabledElements=__webpack_require__(0);var _updateImage=__webpack_require__(5);var _updateImage2=_interopRequireDefault(_updateImage);var _getImageSize=__webpack_require__(38);var _getImageSize2=_interopRequireDefault(_getImageSize);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}}),(function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.default=function(enabledElement){if(enabledElement.viewport.rotation===0||enabledElement.viewport.rotation===180){return{width:enabledElement.image.width,height:enabledElement.image.height}}return{width:enabledElement.image.height,height:enabledElement.image.width}}}),(function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.default=function(element,x,y,width,height){if(element===undefined){throw new Error('getStoredPixels: parameter element must not be undefined');}x=Math.round(x);y=Math.round(y);var enabledElement=(0,_enabledElements.getEnabledElement)(element);var storedPixels=[];var index=0;var pixelData=enabledElement.image.getPixelData();for(var row=0;row<height;row++){for(var column=0;column<width;column++){var spIndex=(row+y)*enabledElement.image.columns+(column+x);storedPixels[index++]=pixelData[spIndex]}}return storedPixels};var _enabledElements=__webpack_require__(0)}),(function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.cachedImages=undefined;exports.setMaximumSizeBytes=setMaximumSizeBytes;exports.putImageLoadObject=putImageLoadObject;exports.getImageLoadObject=getImageLoadObject;exports.removeImageLoadObject=removeImageLoadObject;exports.getCacheInfo=getCacheInfo;exports.purgeCache=purgeCache;exports.changeImageIdCacheSize=changeImageIdCacheSize;var _events=__webpack_require__(16);var _events2=_interopRequireDefault(_events);var _triggerEvent=__webpack_require__(2);var _triggerEvent2=_interopRequireDefault(_triggerEvent);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var maximumSizeInBytes=1024*1024*1024;var cacheSizeInBytes=0;var imageCacheDict={};var cachedImages=exports.cachedImages=[];function setMaximumSizeBytes(numBytes){if(numBytes===undefined){throw new Error('setMaximumSizeBytes: parameter numBytes must not be undefined');}if(numBytes.toFixed===undefined){throw new Error('setMaximumSizeBytes: parameter numBytes must be a number');}maximumSizeInBytes=numBytes;(0,_triggerEvent2.default)(_events2.default,'cornerstoneimagecachemaximumsizechanged');purgeCacheIfNecessary()}function purgeCacheIfNecessary(){if(cacheSizeInBytes<=maximumSizeInBytes){return}function compare(a,b){if(a.timeStamp>b.timeStamp){return-1}if(a.timeStamp<b.timeStamp){return 1}return 0}cachedImages.sort(compare);while(cacheSizeInBytes>maximumSizeInBytes){var lastCachedImage=cachedImages[cachedImages.length-1];var imageId=lastCachedImage.imageId;removeImageLoadObject(imageId);(0,_triggerEvent2.default)(_events2.default,'cornerstoneimagecachepromiseremoved',{imageId:imageId})}var cacheInfo=getCacheInfo();(0,_triggerEvent2.default)(_events2.default,'cornerstoneimagecachefull',cacheInfo)}function putImageLoadObject(imageId,imageLoadObject){if(imageId===undefined){throw new Error('putImageLoadObject: imageId must not be undefined');}if(imageLoadObject.promise===undefined){throw new Error('putImageLoadObject: imageLoadObject.promise must not be undefined');}if(imageCacheDict.hasOwnProperty(imageId)===true){throw new Error('putImageLoadObject: imageId already in cache');}if(imageLoadObject.cancelFn&&typeof imageLoadObject.cancelFn!=='function'){throw new Error('putImageLoadObject: imageLoadObject.cancelFn must be a function');}var cachedImage={loaded:false,imageId:imageId,sharedCacheKey:undefined,imageLoadObject:imageLoadObject,timeStamp:Date.now(),sizeInBytes:0};imageCacheDict[imageId]=cachedImage;cachedImages.push(cachedImage);imageLoadObject.promise.then(function(image){if(cachedImages.indexOf(cachedImage)===-1){return}cachedImage.loaded=true;cachedImage.image=image;if(image.sizeInBytes===undefined){throw new Error('putImageLoadObject: image.sizeInBytes must not be undefined');}if(image.sizeInBytes.toFixed===undefined){throw new Error('putImageLoadObject: image.sizeInBytes is not a number');}cachedImage.sizeInBytes=image.sizeInBytes;cacheSizeInBytes+=cachedImage.sizeInBytes;var eventDetails={action:'addImage',image:cachedImage};(0,_triggerEvent2.default)(_events2.default,'cornerstoneimagecachechanged',eventDetails);cachedImage.sharedCacheKey=image.sharedCacheKey;purgeCacheIfNecessary()},function(){var cachedImage=imageCacheDict[imageId];cachedImages.splice(cachedImages.indexOf(cachedImage),1);delete imageCacheDict[imageId]})}function getImageLoadObject(imageId){if(imageId===undefined){throw new Error('getImageLoadObject: imageId must not be undefined');}var cachedImage=imageCacheDict[imageId];if(cachedImage===undefined){return}cachedImage.timeStamp=Date.now();return cachedImage.imageLoadObject}function removeImageLoadObject(imageId){if(imageId===undefined){throw new Error('removeImageLoadObject: imageId must not be undefined');}var cachedImage=imageCacheDict[imageId];if(cachedImage===undefined){throw new Error('removeImageLoadObject: imageId was not present in imageCache');}cachedImages.splice(cachedImages.indexOf(cachedImage),1);cacheSizeInBytes-=cachedImage.sizeInBytes;var eventDetails={action:'deleteImage',image:cachedImage};(0,_triggerEvent2.default)(_events2.default,'cornerstoneimagecachechanged',eventDetails);decache(cachedImage.imageLoadObject);delete imageCacheDict[imageId]}function getCacheInfo(){return{maximumSizeInBytes:maximumSizeInBytes,cacheSizeInBytes:cacheSizeInBytes,numberOfImagesCached:cachedImages.length}}function decache(imageLoadObject){imageLoadObject.promise.then(function(){if(imageLoadObject.decache){imageLoadObject.decache()}},function(){if(imageLoadObject.decache){imageLoadObject.decache()}})}function purgeCache(){while(cachedImages.length>0){var removedCachedImage=cachedImages[0];removeImageLoadObject(removedCachedImage.imageId)}}function changeImageIdCacheSize(imageId,newCacheSize){var cacheEntry=imageCacheDict[imageId];if(cacheEntry){cacheEntry.imageLoadObject.promise.then(function(image){var cacheSizeDifference=newCacheSize-image.sizeInBytes;image.sizeInBytes=newCacheSize;cacheEntry.sizeInBytes=newCacheSize;cacheSizeInBytes+=cacheSizeDifference;var eventDetails={action:'changeImageSize',image:image};(0,_triggerEvent2.default)(_events2.default,'cornerstoneimagecachechanged',eventDetails)})}}exports.default={imageCache:imageCacheDict,cachedImages:cachedImages,setMaximumSizeBytes:setMaximumSizeBytes,putImageLoadObject:putImageLoadObject,getImageLoadObject:getImageLoadObject,removeImageLoadObject:removeImageLoadObject,getCacheInfo:getCacheInfo,purgeCache:purgeCache,changeImageIdCacheSize:changeImageIdCacheSize}}),(function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.default=pixelDataToFalseColorData;var _index=__webpack_require__(7);var _index2=_interopRequireDefault(_index);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function pixelDataToFalseColorData(image,lookupTable){if(image.color&&!image.falseColor){throw new Error('Color transforms are not implemented yet');}var minPixelValue=image.minPixelValue;var canvasImageDataIndex=0;var storedPixelDataIndex=0;var numPixels=image.width*image.height;var origPixelData=image.origPixelData||image.getPixelData();var storedColorPixelData=new Uint8Array(numPixels*4);var sp=void 0;var mapped=void 0;image.color=true;image.falseColor=true;image.origPixelData=origPixelData;if(lookupTable instanceof _index2.default.LookupTable){lookupTable.build();while(storedPixelDataIndex<numPixels){sp=origPixelData[storedPixelDataIndex++];mapped=lookupTable.mapValue(sp);storedColorPixelData[canvasImageDataIndex++]=mapped[0];storedColorPixelData[canvasImageDataIndex++]=mapped[1];storedColorPixelData[canvasImageDataIndex++]=mapped[2];storedColorPixelData[canvasImageDataIndex++]=mapped[3]}}else if(minPixelValue<0){while(storedPixelDataIndex<numPixels){sp=origPixelData[storedPixelDataIndex++];storedColorPixelData[canvasImageDataIndex++]=lookupTable[sp+ -minPixelValue][0];storedColorPixelData[canvasImageDataIndex++]=lookupTable[sp+ -minPixelValue][1];storedColorPixelData[canvasImageDataIndex++]=lookupTable[sp+ -minPixelValue][2];storedColorPixelData[canvasImageDataIndex++]=lookupTable[sp+ -minPixelValue][3]}}else{while(storedPixelDataIndex<numPixels){sp=origPixelData[storedPixelDataIndex++];storedColorPixelData[canvasImageDataIndex++]=lookupTable[sp][0];storedColorPixelData[canvasImageDataIndex++]=lookupTable[sp][1];storedColorPixelData[canvasImageDataIndex++]=lookupTable[sp][2];storedColorPixelData[canvasImageDataIndex++]=lookupTable[sp][3]}}image.rgba=true;image.cachedLut=undefined;image.render=undefined;image.slope=1;image.intercept=0;image.minPixelValue=0;image.maxPixelValue=255;image.windowWidth=255;image.windowCenter=128;image.getPixelData=function(){return storedColorPixelData}}}),(function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _drawImage=__webpack_require__(6);Object.defineProperty(exports,'drawImage',{enumerable:true,get:function get(){return _interopRequireDefault(_drawImage).default}});var _generateLut=__webpack_require__(18);Object.defineProperty(exports,'generateLut',{enumerable:true,get:function get(){return _interopRequireDefault(_generateLut).default}});var _getDefaultViewport=__webpack_require__(3);Object.defineProperty(exports,'getDefaultViewport',{enumerable:true,get:function get(){return _interopRequireDefault(_getDefaultViewport).default}});var _requestAnimationFrame=__webpack_require__(19);Object.defineProperty(exports,'requestAnimationFrame',{enumerable:true,get:function get(){return _interopRequireDefault(_requestAnimationFrame).default}});var _storedPixelDataToCanvasImageData=__webpack_require__(20);Object.defineProperty(exports,'storedPixelDataToCanvasImageData',{enumerable:true,get:function get(){return _interopRequireDefault(_storedPixelDataToCanvasImageData).default}});var _storedColorPixelDataToCanvasImageData=__webpack_require__(21);Object.defineProperty(exports,'storedColorPixelDataToCanvasImageData',{enumerable:true,get:function get(){return _interopRequireDefault(_storedColorPixelDataToCanvasImageData).default}});var _storedPixelDataToCanvasImageDataColorLUT=__webpack_require__(22);Object.defineProperty(exports,'storedPixelDataToCanvasImageDataColorLUT',{enumerable:true,get:function get(){return _interopRequireDefault(_storedPixelDataToCanvasImageDataColorLUT).default}});var _storedPixelDataToCanvasImageDataPseudocolorLUT=__webpack_require__(23);Object.defineProperty(exports,'storedPixelDataToCanvasImageDataPseudocolorLUT',{enumerable:true,get:function get(){return _interopRequireDefault(_storedPixelDataToCanvasImageDataPseudocolorLUT).default}});var _index=__webpack_require__(43);Object.defineProperty(exports,'internal',{enumerable:true,get:function get(){return _interopRequireDefault(_index).default}});var _renderLabelMapImage=__webpack_require__(10);Object.defineProperty(exports,'renderLabelMapImage',{enumerable:true,get:function get(){return _renderLabelMapImage.renderLabelMapImage}});var _renderPseudoColorImage=__webpack_require__(14);Object.defineProperty(exports,'renderPseudoColorImage',{enumerable:true,get:function get(){return _renderPseudoColorImage.renderPseudoColorImage}});var _renderColorImage=__webpack_require__(8);Object.defineProperty(exports,'renderColorImage',{enumerable:true,get:function get(){return _renderColorImage.renderColorImage}});var _renderGrayscaleImage=__webpack_require__(17);Object.defineProperty(exports,'renderGrayscaleImage',{enumerable:true,get:function get(){return _renderGrayscaleImage.renderGrayscaleImage}});var _renderWebImage=__webpack_require__(35);Object.defineProperty(exports,'renderWebImage',{enumerable:true,get:function get(){return _renderWebImage.renderWebImage}});var _canvasToPixel=__webpack_require__(55);Object.defineProperty(exports,'canvasToPixel',{enumerable:true,get:function get(){return _interopRequireDefault(_canvasToPixel).default}});var _disable=__webpack_require__(56);Object.defineProperty(exports,'disable',{enumerable:true,get:function get(){return _interopRequireDefault(_disable).default}});var _displayImage=__webpack_require__(57);Object.defineProperty(exports,'displayImage',{enumerable:true,get:function get(){return _interopRequireDefault(_displayImage).default}});var _draw=__webpack_require__(59);Object.defineProperty(exports,'draw',{enumerable:true,get:function get(){return _interopRequireDefault(_draw).default}});var _drawInvalidated=__webpack_require__(60);Object.defineProperty(exports,'drawInvalidated',{enumerable:true,get:function get(){return _interopRequireDefault(_drawInvalidated).default}});var _enable=__webpack_require__(61);Object.defineProperty(exports,'enable',{enumerable:true,get:function get(){return _interopRequireDefault(_enable).default}});var _enabledElementData=__webpack_require__(65);Object.defineProperty(exports,'getElementData',{enumerable:true,get:function get(){return _enabledElementData.getElementData}});Object.defineProperty(exports,'removeElementData',{enumerable:true,get:function get(){return _enabledElementData.removeElementData}});var _enabledElements=__webpack_require__(0);Object.defineProperty(exports,'getEnabledElement',{enumerable:true,get:function get(){return _enabledElements.getEnabledElement}});Object.defineProperty(exports,'addEnabledElement',{enumerable:true,get:function get(){return _enabledElements.addEnabledElement}});Object.defineProperty(exports,'getEnabledElementsByImageId',{enumerable:true,get:function get(){return _enabledElements.getEnabledElementsByImageId}});Object.defineProperty(exports,'getEnabledElements',{enumerable:true,get:function get(){return _enabledElements.getEnabledElements}});var _layers=__webpack_require__(25);Object.defineProperty(exports,'addLayer',{enumerable:true,get:function get(){return _layers.addLayer}});Object.defineProperty(exports,'removeLayer',{enumerable:true,get:function get(){return _layers.removeLayer}});Object.defineProperty(exports,'getLayer',{enumerable:true,get:function get(){return _layers.getLayer}});Object.defineProperty(exports,'getLayers',{enumerable:true,get:function get(){return _layers.getLayers}});Object.defineProperty(exports,'getVisibleLayers',{enumerable:true,get:function get(){return _layers.getVisibleLayers}});Object.defineProperty(exports,'setActiveLayer',{enumerable:true,get:function get(){return _layers.setActiveLayer}});Object.defineProperty(exports,'getActiveLayer',{enumerable:true,get:function get(){return _layers.getActiveLayer}});Object.defineProperty(exports,'setLayerImage',{enumerable:true,get:function get(){return _layers.setLayerImage}});var _fitToWindow=__webpack_require__(37);Object.defineProperty(exports,'fitToWindow',{enumerable:true,get:function get(){return _interopRequireDefault(_fitToWindow).default}});var _getDefaultViewportForImage=__webpack_require__(66);Object.defineProperty(exports,'getDefaultViewportForImage',{enumerable:true,get:function get(){return _interopRequireDefault(_getDefaultViewportForImage).default}});var _getImage=__webpack_require__(67);Object.defineProperty(exports,'getImage',{enumerable:true,get:function get(){return _interopRequireDefault(_getImage).default}});var _getPixels=__webpack_require__(68);Object.defineProperty(exports,'getPixels',{enumerable:true,get:function get(){return _interopRequireDefault(_getPixels).default}});var _getStoredPixels=__webpack_require__(39);Object.defineProperty(exports,'getStoredPixels',{enumerable:true,get:function get(){return _interopRequireDefault(_getStoredPixels).default}});var _getViewport=__webpack_require__(69);Object.defineProperty(exports,'getViewport',{enumerable:true,get:function get(){return _interopRequireDefault(_getViewport).default}});var _imageLoader=__webpack_require__(70);Object.defineProperty(exports,'loadImage',{enumerable:true,get:function get(){return _imageLoader.loadImage}});Object.defineProperty(exports,'loadAndCacheImage',{enumerable:true,get:function get(){return _imageLoader.loadAndCacheImage}});Object.defineProperty(exports,'registerImageLoader',{enumerable:true,get:function get(){return _imageLoader.registerImageLoader}});Object.defineProperty(exports,'registerUnknownImageLoader',{enumerable:true,get:function get(){return _imageLoader.registerUnknownImageLoader}});var _invalidate=__webpack_require__(71);Object.defineProperty(exports,'invalidate',{enumerable:true,get:function get(){return _interopRequireDefault(_invalidate).default}});var _invalidateImageId=__webpack_require__(72);Object.defineProperty(exports,'invalidateImageId',{enumerable:true,get:function get(){return _interopRequireDefault(_invalidateImageId).default}});var _pageToPixel=__webpack_require__(73);Object.defineProperty(exports,'pageToPixel',{enumerable:true,get:function get(){return _interopRequireDefault(_pageToPixel).default}});var _pixelToCanvas=__webpack_require__(74);Object.defineProperty(exports,'pixelToCanvas',{enumerable:true,get:function get(){return _interopRequireDefault(_pixelToCanvas).default}});var _reset=__webpack_require__(75);Object.defineProperty(exports,'reset',{enumerable:true,get:function get(){return _interopRequireDefault(_reset).default}});var _resize=__webpack_require__(36);Object.defineProperty(exports,'resize',{enumerable:true,get:function get(){return _interopRequireDefault(_resize).default}});var _setToPixelCoordinateSystem=__webpack_require__(4);Object.defineProperty(exports,'setToPixelCoordinateSystem',{enumerable:true,get:function get(){return _interopRequireDefault(_setToPixelCoordinateSystem).default}});var _setViewport=__webpack_require__(76);Object.defineProperty(exports,'setViewport',{enumerable:true,get:function get(){return _interopRequireDefault(_setViewport).default}});var _updateImage=__webpack_require__(5);Object.defineProperty(exports,'updateImage',{enumerable:true,get:function get(){return _interopRequireDefault(_updateImage).default}});var _pixelDataToFalseColorData=__webpack_require__(41);Object.defineProperty(exports,'pixelDataToFalseColorData',{enumerable:true,get:function get(){return _interopRequireDefault(_pixelDataToFalseColorData).default}});var _index2=__webpack_require__(77);Object.defineProperty(exports,'rendering',{enumerable:true,get:function get(){return _interopRequireDefault(_index2).default}});var _imageCache=__webpack_require__(40);Object.defineProperty(exports,'imageCache',{enumerable:true,get:function get(){return _interopRequireDefault(_imageCache).default}});var _metaData=__webpack_require__(78);Object.defineProperty(exports,'metaData',{enumerable:true,get:function get(){return _interopRequireDefault(_metaData).default}});var _index3=__webpack_require__(15);Object.defineProperty(exports,'webGL',{enumerable:true,get:function get(){return _interopRequireDefault(_index3).default}});var _index4=__webpack_require__(7);Object.defineProperty(exports,'colors',{enumerable:true,get:function get(){return _interopRequireDefault(_index4).default}});var _falseColorMapping=__webpack_require__(79);Object.defineProperty(exports,'convertImageToFalseColorImage',{enumerable:true,get:function get(){return _falseColorMapping.convertImageToFalseColorImage}});Object.defineProperty(exports,'convertToFalseColorImage',{enumerable:true,get:function get(){return _falseColorMapping.convertToFalseColorImage}});Object.defineProperty(exports,'restoreImage',{enumerable:true,get:function get(){return _falseColorMapping.restoreImage}});var _events=__webpack_require__(16);Object.defineProperty(exports,'events',{enumerable:true,get:function get(){return _interopRequireDefault(_events).default}});var _triggerEvent=__webpack_require__(2);Object.defineProperty(exports,'triggerEvent',{enumerable:true,get:function get(){return _interopRequireDefault(_triggerEvent).default}});function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}}),(function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _drawImage=__webpack_require__(6);var _drawImage2=_interopRequireDefault(_drawImage);var _generateLut=__webpack_require__(18);var _generateLut2=_interopRequireDefault(_generateLut);var _getDefaultViewport=__webpack_require__(3);var _getDefaultViewport2=_interopRequireDefault(_getDefaultViewport);var _requestAnimationFrame=__webpack_require__(19);var _requestAnimationFrame2=_interopRequireDefault(_requestAnimationFrame);var _storedPixelDataToCanvasImageData=__webpack_require__(20);var _storedPixelDataToCanvasImageData2=_interopRequireDefault(_storedPixelDataToCanvasImageData);var _storedPixelDataToCanvasImageDataRGBA=__webpack_require__(30);var _storedPixelDataToCanvasImageDataRGBA2=_interopRequireDefault(_storedPixelDataToCanvasImageDataRGBA);var _storedColorPixelDataToCanvasImageData=__webpack_require__(21);var _storedColorPixelDataToCanvasImageData2=_interopRequireDefault(_storedColorPixelDataToCanvasImageData);var _storedPixelDataToCanvasImageDataColorLUT=__webpack_require__(22);var _storedPixelDataToCanvasImageDataColorLUT2=_interopRequireDefault(_storedPixelDataToCanvasImageDataColorLUT);var _storedPixelDataToCanvasImageDataPseudocolorLUT=__webpack_require__(23);var _storedPixelDataToCanvasImageDataPseudocolorLUT2=_interopRequireDefault(_storedPixelDataToCanvasImageDataPseudocolorLUT);var _getTransform=__webpack_require__(9);var _getTransform2=_interopRequireDefault(_getTransform);var _calculateTransform=__webpack_require__(24);var _calculateTransform2=_interopRequireDefault(_calculateTransform);var _transform=__webpack_require__(31);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}exports.default={drawImage:_drawImage2.default,generateLut:_generateLut2.default,getDefaultViewport:_getDefaultViewport2.default,requestAnimationFrame:_requestAnimationFrame2.default,storedPixelDataToCanvasImageData:_storedPixelDataToCanvasImageData2.default,storedPixelDataToCanvasImageDataRGBA:_storedPixelDataToCanvasImageDataRGBA2.default,storedPixelDataToCanvasImageDataColorLUT:_storedPixelDataToCanvasImageDataColorLUT2.default,storedPixelDataToCanvasImageDataPseudocolorLUT:_storedPixelDataToCanvasImageDataPseudocolorLUT2.default,storedColorPixelDataToCanvasImageData:_storedColorPixelDataToCanvasImageData2.default,getTransform:_getTransform2.default,calculateTransform:_calculateTransform2.default,Transform:_transform.Transform}}),(function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.default=function(a,b){if(!a&&!b){return true}if(!a||!b){return false}return a.id===b.id}}),(function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.default=function(image,windowWidth,windowCenter,invert,voiLUT){var maxPixelValue=image.maxPixelValue;var minPixelValue=image.minPixelValue;var offset=Math.min(minPixelValue,0);if(image.cachedLut===undefined){var length=maxPixelValue-offset+1;image.cachedLut={};image.cachedLut.lutArray=new Uint8ClampedArray(length)}var lut=image.cachedLut.lutArray;var vlutfn=(0,_getVOILut2.default)(windowWidth,windowCenter,voiLUT);if(invert===true){for(var storedValue=minPixelValue;storedValue<=maxPixelValue;storedValue++){lut[storedValue+ -offset]=255-vlutfn(storedValue)}}else{for(var _storedValue=minPixelValue;_storedValue<=maxPixelValue;_storedValue++){lut[_storedValue+ -offset]=vlutfn(_storedValue)}}return lut};var _getVOILut=__webpack_require__(27);var _getVOILut2=_interopRequireDefault(_getVOILut);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}}),(function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.default=function(image,lut,canvasImageDataData){var start=(0,_now2.default)();var pixelData=image.getPixelData();image.stats.lastGetPixelDataTime=(0,_now2.default)()-start;var minPixelValue=image.minPixelValue;var canvasImageDataIndex=0;var storedPixelDataIndex=0;var numPixels=pixelData.length;start=(0,_now2.default)();if(minPixelValue<0){while(storedPixelDataIndex<numPixels){canvasImageDataData[canvasImageDataIndex++]=lut[pixelData[storedPixelDataIndex++]+ -minPixelValue];canvasImageDataData[canvasImageDataIndex++]=lut[pixelData[storedPixelDataIndex++]+ -minPixelValue];canvasImageDataData[canvasImageDataIndex++]=lut[pixelData[storedPixelDataIndex++]+ -minPixelValue];canvasImageDataData[canvasImageDataIndex++]=pixelData[storedPixelDataIndex++]}}else{while(storedPixelDataIndex<numPixels){canvasImageDataData[canvasImageDataIndex++]=lut[pixelData[storedPixelDataIndex++]];canvasImageDataData[canvasImageDataIndex++]=lut[pixelData[storedPixelDataIndex++]];canvasImageDataData[canvasImageDataIndex++]=lut[pixelData[storedPixelDataIndex++]];canvasImageDataData[canvasImageDataIndex++]=pixelData[storedPixelDataIndex++]}}image.stats.lastStoredPixelDataToCanvasImageDataTime=(0,_now2.default)()-start};var _now=__webpack_require__(1);var _now2=_interopRequireDefault(_now);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}}),(function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.isWebGLInitialized=undefined;exports.getRenderCanvas=getRenderCanvas;exports.initRenderer=initRenderer;exports.render=render;exports.isWebGLAvailable=isWebGLAvailable;var _index=__webpack_require__(48);var _vertexShader=__webpack_require__(54);var _textureCache=__webpack_require__(33);var _textureCache2=_interopRequireDefault(_textureCache);var _createProgramFromString=__webpack_require__(34);var _createProgramFromString2=_interopRequireDefault(_createProgramFromString);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var renderCanvas=document.createElement('canvas');var gl=void 0;var texCoordBuffer=void 0;var positionBuffer=void 0;var isWebGLInitialized=false;exports.isWebGLInitialized=isWebGLInitialized;function getRenderCanvas(){return renderCanvas}function initShaders(){for(var id in _index.shaders){var shader=_index.shaders[id];shader.attributes={};shader.uniforms={};shader.vert=_vertexShader.vertexShader;shader.program=(0,_createProgramFromString2.default)(gl,shader.vert,shader.frag);shader.attributes.texCoordLocation=gl.getAttribLocation(shader.program,'a_texCoord');gl.enableVertexAttribArray(shader.attributes.texCoordLocation);shader.attributes.positionLocation=gl.getAttribLocation(shader.program,'a_position');gl.enableVertexAttribArray(shader.attributes.positionLocation);shader.uniforms.resolutionLocation=gl.getUniformLocation(shader.program,'u_resolution')}}function initRenderer(){if(isWebGLInitialized===true){return}if(initWebGL(renderCanvas)){initBuffers();initShaders();exports.isWebGLInitialized=isWebGLInitialized=true}}function updateRectangle(gl,width,height){gl.bufferData(gl.ARRAY_BUFFER,new Float32Array([width,height,0,height,width,0,0,0]),gl.STATIC_DRAW)}function handleLostContext(event){event.preventDefault();console.warn('WebGL Context Lost!')}function handleRestoredContext(event){event.preventDefault();exports.isWebGLInitialized=isWebGLInitialized=false;_textureCache2.default.purgeCache();initRenderer()}function initWebGL(canvas){gl=null;try{var options={preserveDrawingBuffer:true};gl=canvas.getContext('webgl',options)||canvas.getContext('experimental-webgl',options);canvas.removeEventListener('webglcontextlost',handleLostContext,false);canvas.addEventListener('webglcontextlost',handleLostContext,false);canvas.removeEventListener('webglcontextrestored',handleRestoredContext,false);canvas.addEventListener('webglcontextrestored',handleRestoredContext,false)}catch(error){throw new Error('Error creating WebGL context');}if(!gl){console.error('Unable to initialize WebGL. Your browser may not support it.');gl=null}return gl}function getImageDataType(image){if(image.color){return'rgb'}var datatype='int';if(image.minPixelValue>=0){datatype='u'+datatype}if(image.maxPixelValue>255){datatype+='16'}else{datatype+='8'}return datatype}function getShaderProgram(image){var datatype=getImageDataType(image);if(_index.shaders.hasOwnProperty(datatype)){return _index.shaders[datatype]}return _index.shaders.rgb}function generateTexture(image){var TEXTURE_FORMAT={uint8:gl.LUMINANCE,int8:gl.LUMINANCE_ALPHA,uint16:gl.LUMINANCE_ALPHA,int16:gl.RGB,rgb:gl.RGB};var TEXTURE_BYTES={int8:1,uint16:2,int16:3,rgb:3};var imageDataType=getImageDataType(image);var format=TEXTURE_FORMAT[imageDataType];var texture=gl.createTexture();gl.bindTexture(gl.TEXTURE_2D,texture);gl.texParameteri(gl.TEXTURE_2D,gl.TEXTURE_MIN_FILTER,gl.NEAREST);gl.texParameteri(gl.TEXTURE_2D,gl.TEXTURE_MAG_FILTER,gl.NEAREST);gl.texParameteri(gl.TEXTURE_2D,gl.TEXTURE_WRAP_S,gl.CLAMP_TO_EDGE);gl.texParameteri(gl.TEXTURE_2D,gl.TEXTURE_WRAP_T,gl.CLAMP_TO_EDGE);gl.pixelStorei(gl.UNPACK_ALIGNMENT,1);var imageData=_index.dataUtilities[imageDataType].storedPixelDataToImageData(image,image.width,image.height);gl.texImage2D(gl.TEXTURE_2D,0,format,image.width,image.height,0,format,gl.UNSIGNED_BYTE,imageData);var sizeInBytes=image.width*image.height*TEXTURE_BYTES[imageDataType];return{texture:texture,sizeInBytes:sizeInBytes}}function getImageTexture(image){var imageTexture=_textureCache2.default.getImageTexture(image.imageId);if(!imageTexture){imageTexture=generateTexture(image);_textureCache2.default.putImageTexture(image,imageTexture)}return imageTexture.texture}function initBuffers(){positionBuffer=gl.createBuffer();gl.bindBuffer(gl.ARRAY_BUFFER,positionBuffer);gl.bufferData(gl.ARRAY_BUFFER,new Float32Array([1,1,0,1,1,0,0,0]),gl.STATIC_DRAW);texCoordBuffer=gl.createBuffer();gl.bindBuffer(gl.ARRAY_BUFFER,texCoordBuffer);gl.bufferData(gl.ARRAY_BUFFER,new Float32Array([1.0,1.0,0.0,1.0,1.0,0.0,0.0,0.0]),gl.STATIC_DRAW)}function renderQuad(shader,parameters,texture,width,height){gl.clearColor(1.0,0.0,0.0,1.0);gl.viewport(0,0,width,height);gl.clear(gl.COLOR_BUFFER_BIT|gl.DEPTH_BUFFER_BIT);gl.useProgram(shader.program);gl.bindBuffer(gl.ARRAY_BUFFER,texCoordBuffer);gl.vertexAttribPointer(shader.attributes.texCoordLocation,2,gl.FLOAT,false,0,0);gl.bindBuffer(gl.ARRAY_BUFFER,positionBuffer);gl.vertexAttribPointer(shader.attributes.positionLocation,2,gl.FLOAT,false,0,0);for(var key in parameters){var uniformLocation=gl.getUniformLocation(shader.program,key);if(!uniformLocation){continue}var uniform=parameters[key];var type=uniform.type;var value=uniform.value;if(type==='i'){gl.uniform1i(uniformLocation,value)}else if(type==='f'){gl.uniform1f(uniformLocation,value)}else if(type==='2f'){gl.uniform2f(uniformLocation,value[0],value[1])}}updateRectangle(gl,width,height);gl.activeTexture(gl.TEXTURE0);gl.bindTexture(gl.TEXTURE_2D,texture);gl.drawArrays(gl.TRIANGLE_STRIP,0,4)}function render(enabledElement){var image=enabledElement.image;renderCanvas.width=image.width;renderCanvas.height=image.height;var viewport=enabledElement.viewport;var shader=getShaderProgram(image);var texture=getImageTexture(image);var parameters={u_resolution:{type:'2f',value:[image.width,image.height]},wc:{type:'f',value:viewport.voi.windowCenter},ww:{type:'f',value:viewport.voi.windowWidth},slope:{type:'f',value:image.slope},intercept:{type:'f',value:image.intercept},minPixelValue:{type:'f',value:image.minPixelValue},invert:{type:'i',value:viewport.invert?1:0}};renderQuad(shader,parameters,texture,image.width,image.height);return renderCanvas}function isWebGLAvailable(){var options={failIfMajorPerformanceCaveat:true};try{var canvas=document.createElement('canvas');return Boolean(window.WebGLRenderingContext)&&(canvas.getContext('webgl',options)||canvas.getContext('experimental-webgl',options))}catch(e){return false}}}),(function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.dataUtilities=exports.shaders=undefined;var _int=__webpack_require__(49);var _int2=__webpack_require__(50);var _rgb=__webpack_require__(51);var _uint=__webpack_require__(52);var _uint2=__webpack_require__(53);var shaders={int16:_int.int16Shader,int8:_int2.int8Shader,rgb:_rgb.rgbShader,uint16:_uint.uint16Shader,uint8:_uint2.uint8Shader};var dataUtilities={int16:_int.int16DataUtilities,int8:_int2.int8DataUtilities,rgb:_rgb.rgbDataUtilities,uint16:_uint.uint16DataUtilities,uint8:_uint2.uint8DataUtilities};exports.shaders=shaders;exports.dataUtilities=dataUtilities}),(function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var int16Shader={};function storedPixelDataToImageData(image){var pixelData=image.getPixelData();var numberOfChannels=3;var data=new Uint8Array(image.width*image.height*numberOfChannels);var offset=0;for(var i=0;i<pixelData.length;i++){var val=Math.abs(pixelData[i]);data[offset++]=val&0xFF;data[offset++]=val>>8;data[offset++]=pixelData[i]<0?0:1}return data}var int16DataUtilities=exports.int16DataUtilities={storedPixelDataToImageData:storedPixelDataToImageData};int16Shader.frag='precision mediump float;'+'uniform sampler2D u_image;'+'uniform float ww;'+'uniform float wc;'+'uniform float slope;'+'uniform float intercept;'+'uniform int invert;'+'varying vec2 v_texCoord;'+'void main() {'+'vec4 color = texture2D(u_image, v_texCoord);'+'float intensity = color.r*256.0 + color.g*65536.0;'+'if (color.b == 0.0)'+'intensity = -intensity;'+'intensity = intensity * slope + intercept;'+'float center0 = wc - 0.5;'+'float width0 = max(ww, 1.0);'+'intensity = (intensity - center0) / width0 + 0.5;'+'intensity = clamp(intensity, 0.0, 1.0);'+'gl_FragColor = vec4(intensity, intensity, intensity, 1.0);'+'if (invert == 1)'+'gl_FragColor.rgb = 1.0 - gl_FragColor.rgb;'+'}';exports.int16Shader=int16Shader}),(function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var int8Shader={};function storedPixelDataToImageData(image){var pixelData=image.getPixelData();var numberOfChannels=2;var data=new Uint8Array(image.width*image.height*numberOfChannels);var offset=0;for(var i=0;i<pixelData.length;i++){data[offset++]=pixelData[i];data[offset++]=pixelData[i]<0?0:1}return data}var int8DataUtilities=exports.int8DataUtilities={storedPixelDataToImageData:storedPixelDataToImageData};int8Shader.frag='precision mediump float;'+'uniform sampler2D u_image;'+'uniform float ww;'+'uniform float wc;'+'uniform float slope;'+'uniform float intercept;'+'uniform int invert;'+'varying vec2 v_texCoord;'+'void main() {'+'vec4 color = texture2D(u_image, v_texCoord);'+'float intensity = color.r*256.;'+'if (color.a == 0.0)'+'intensity = -intensity;'+'intensity = intensity * slope + intercept;'+'float center0 = wc - 0.5;'+'float width0 = max(ww, 1.0);'+'intensity = (intensity - center0) / width0 + 0.5;'+'intensity = clamp(intensity, 0.0, 1.0);'+'gl_FragColor = vec4(intensity, intensity, intensity, 1.0);'+'if (invert == 1)'+'gl_FragColor.rgb = 1.0 - gl_FragColor.rgb;'+'}';exports.int8Shader=int8Shader}),(function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var rgbShader={};function storedPixelDataToImageData(image){var minPixelValue=image.minPixelValue;var canvasImageDataIndex=0;var storedPixelDataIndex=0;var numStoredPixels=image.width*image.height*4;var numOutputPixels=image.width*image.height*3;var storedPixelData=image.getPixelData();var data=new Uint8Array(numOutputPixels);if(minPixelValue<0){while(storedPixelDataIndex<numStoredPixels){data[canvasImageDataIndex++]=storedPixelData[storedPixelDataIndex++]+ -minPixelValue;data[canvasImageDataIndex++]=storedPixelData[storedPixelDataIndex++]+ -minPixelValue;data[canvasImageDataIndex++]=storedPixelData[storedPixelDataIndex++]+ -minPixelValue;storedPixelDataIndex+=1}}else{while(storedPixelDataIndex<numStoredPixels){data[canvasImageDataIndex++]=storedPixelData[storedPixelDataIndex++];data[canvasImageDataIndex++]=storedPixelData[storedPixelDataIndex++];data[canvasImageDataIndex++]=storedPixelData[storedPixelDataIndex++];storedPixelDataIndex+=1}}return data}var rgbDataUtilities=exports.rgbDataUtilities={storedPixelDataToImageData:storedPixelDataToImageData};rgbShader.frag='precision mediump float;'+'uniform sampler2D u_image;'+'uniform float ww;'+'uniform float wc;'+'uniform float slope;'+'uniform float intercept;'+'uniform float minPixelValue;'+'uniform int invert;'+'varying vec2 v_texCoord;'+'void main() {'+'vec3 color = texture2D(u_image, v_texCoord).xyz;'+'color = color * 256.0 * slope + intercept;'+'float center0 = wc - 0.5 - minPixelValue;'+'float width0 = max(ww, 1.0);'+'color = (color - center0) / width0 + 0.5;'+'gl_FragColor = vec4(color, 1);'+'if (invert == 1)'+'gl_FragColor.rgb = 1. - gl_FragColor.rgb;'+'}';exports.rgbShader=rgbShader}),(function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var uint16Shader={};function storedPixelDataToImageData(image){var pixelData=image.getPixelData();var numberOfChannels=2;var data=new Uint8Array(image.width*image.height*numberOfChannels);var offset=0;for(var i=0;i<pixelData.length;i++){var val=pixelData[i];data[offset++]=val&0xFF;data[offset++]=val>>8}return data}var uint16DataUtilities=exports.uint16DataUtilities={storedPixelDataToImageData:storedPixelDataToImageData};uint16Shader.frag='precision mediump float;'+'uniform sampler2D u_image;'+'uniform float ww;'+'uniform float wc;'+'uniform float slope;'+'uniform float intercept;'+'uniform int invert;'+'varying vec2 v_texCoord;'+'void main() {'+'vec4 color = texture2D(u_image, v_texCoord);'+'float intensity = color.r*256.0 + color.a*65536.0;'+'intensity = intensity * slope + intercept;'+'float center0 = wc - 0.5;'+'float width0 = max(ww, 1.0);'+'intensity = (intensity - center0) / width0 + 0.5;'+'intensity = clamp(intensity, 0.0, 1.0);'+'gl_FragColor = vec4(intensity, intensity, intensity, 1.0);'+'if (invert == 1)'+'gl_FragColor.rgb = 1.0 - gl_FragColor.rgb;'+'}';exports.uint16Shader=uint16Shader}),(function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var uint8Shader={};function storedPixelDataToImageData(image){return image.getPixelData()}var uint8DataUtilities=exports.uint8DataUtilities={storedPixelDataToImageData:storedPixelDataToImageData};uint8Shader.frag='precision mediump float;'+'uniform sampler2D u_image;'+'uniform float ww;'+'uniform float wc;'+'uniform float slope;'+'uniform float intercept;'+'uniform int invert;'+'varying vec2 v_texCoord;'+'void main() {'+'vec4 color = texture2D(u_image, v_texCoord);'+'float intensity = color.r*256.0;'+'intensity = intensity * slope + intercept;'+'float center0 = wc - 0.5;'+'float width0 = max(ww, 1.0);'+'intensity = (intensity - center0) / width0 + 0.5;'+'intensity = clamp(intensity, 0.0, 1.0);'+'gl_FragColor = vec4(intensity, intensity, intensity, 1.0);'+'if (invert == 1)'+'gl_FragColor.rgb = 1.0 - gl_FragColor.rgb;'+'}';exports.uint8Shader=uint8Shader}),(function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var vertexShader=exports.vertexShader='attribute vec2 a_position;'+'attribute vec2 a_texCoord;'+'uniform vec2 u_resolution;'+'varying vec2 v_texCoord;'+'void main() {'+'vec2 zeroToOne = a_position / u_resolution;'+'vec2 zeroToTwo = zeroToOne * 2.0;'+'vec2 clipSpace = zeroToTwo - 1.0;'+'gl_Position = vec4(clipSpace * vec2(1, -1), 0, 1);'+'v_texCoord = a_texCoord;'+'}'}),(function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.default=function(element,pt){var enabledElement=(0,_enabledElements.getEnabledElement)(element);var transform=(0,_getTransform2.default)(enabledElement);transform.invert();return transform.transformPoint(pt.x,pt.y)};var _enabledElements=__webpack_require__(0);var _getTransform=__webpack_require__(9);var _getTransform2=_interopRequireDefault(_getTransform);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}}),(function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.default=function(element){if(element===undefined){throw new Error('disable: element must not be undefined');}var enabledElements=(0,_enabledElements.getEnabledElements)();for(var i=0;i<enabledElements.length;i++){if(enabledElements[i].element===element){var eventData={element:element};(0,_triggerEvent2.default)(element,'cornerstoneelementdisabled',eventData);enabledElements[i].element.removeChild(enabledElements[i].canvas);enabledElements[i].canvas=undefined;enabledElements.splice(i,1);break}}};var _enabledElements=__webpack_require__(0);var _triggerEvent=__webpack_require__(2);var _triggerEvent2=_interopRequireDefault(_triggerEvent);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}}),(function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.default=function(element,image,viewport){if(element===undefined){throw new Error('displayImage: parameter element must not be undefined');}if(image===undefined){throw new Error('displayImage: parameter image must not be undefined');}var enabledElement=(0,_enabledElements.getEnabledElement)(element);var oldImage=enabledElement.image;enabledElement.image=image;if(enabledElement.layers&&enabledElement.layers.length){(0,_layers.setLayerImage)(element,image)}if(enabledElement.viewport===undefined){enabledElement.viewport=(0,_getDefaultViewport2.default)(enabledElement.canvas,image)}if(viewport){for(var attrname in viewport){if(viewport[attrname]!==null){enabledElement.viewport[attrname]=viewport[attrname]}}}var frameRate=void 0;if(enabledElement.lastImageTimeStamp!==undefined){var timeSinceLastImage=(0,_now2.default)()-enabledElement.lastImageTimeStamp;frameRate=(1000/timeSinceLastImage).toFixed()}enabledElement.lastImageTimeStamp=(0,_now2.default)();var newImageEventData={viewport:enabledElement.viewport,element:enabledElement.element,image:enabledElement.image,oldImage:oldImage,enabledElement:enabledElement,frameRate:frameRate};(0,_triggerEvent2.default)(enabledElement.element,'cornerstonenewimage',newImageEventData);(0,_updateImage2.default)(element)};var _enabledElements=__webpack_require__(0);var _getDefaultViewport=__webpack_require__(3);var _getDefaultViewport2=_interopRequireDefault(_getDefaultViewport);var _updateImage=__webpack_require__(5);var _updateImage2=_interopRequireDefault(_updateImage);var _now=__webpack_require__(1);var _now2=_interopRequireDefault(_now);var _layers=__webpack_require__(25);var _triggerEvent=__webpack_require__(2);var _triggerEvent2=_interopRequireDefault(_triggerEvent);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}}),(function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.default=function(){return s4()+s4()+"-"+s4()+"-"+s4()+"-"+s4()+"-"+s4()+s4()+s4()};function s4(){return Math.floor((1+Math.random())*0x10000).toString(16).substring(1)}}),(function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.default=function(element){var enabledElement=(0,_enabledElements.getEnabledElement)(element);if(enabledElement.image===undefined){throw new Error('draw: image has not been loaded yet');}(0,_drawImage2.default)(enabledElement)};var _enabledElements=__webpack_require__(0);var _drawImage=__webpack_require__(6);var _drawImage2=_interopRequireDefault(_drawImage);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}}),(function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.default=function(){var enabledElements=(0,_enabledElements.getEnabledElements)();for(var i=0;i<enabledElements.length;i++){var ee=enabledElements[i];if(ee.invalid===true){(0,_drawImage2.default)(ee,true)}}};var _enabledElements=__webpack_require__(0);var _drawImage=__webpack_require__(6);var _drawImage2=_interopRequireDefault(_drawImage);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}}),(function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.default=function(element,options){if(element===undefined){throw new Error('enable: parameter element cannot be undefined');}if(options&&options.renderer&&options.renderer.toLowerCase()==='webgl'){if(_index2.default.renderer.isWebGLAvailable()){_index2.default.renderer.initRenderer();options.renderer='webgl'}else{console.error('WebGL not available, falling back to Canvas renderer');delete options.renderer}}var canvas=(0,_getCanvas2.default)(element);var enabledElement={element:element,canvas:canvas,image:undefined,invalid:false,needsRedraw:true,options:options,layers:[],data:{},renderingTools:{}};(0,_enabledElements.addEnabledElement)(enabledElement);(0,_resize2.default)(element,true);function draw(timestamp){if(enabledElement.canvas===undefined){return}var eventDetails={enabledElement:enabledElement,timestamp:timestamp};(0,_triggerEvent2.default)(enabledElement.element,'cornerstoneprerender',eventDetails);if(enabledElement.needsRedraw&&hasImageOrLayers(enabledElement)){(0,_drawImageSync2.default)(enabledElement,enabledElement.invalid)}(0,_requestAnimationFrame2.default)(draw)}draw()};var _enabledElements=__webpack_require__(0);var _resize=__webpack_require__(36);var _resize2=_interopRequireDefault(_resize);var _drawImageSync=__webpack_require__(62);var _drawImageSync2=_interopRequireDefault(_drawImageSync);var _requestAnimationFrame=__webpack_require__(19);var _requestAnimationFrame2=_interopRequireDefault(_requestAnimationFrame);var _index=__webpack_require__(15);var _index2=_interopRequireDefault(_index);var _triggerEvent=__webpack_require__(2);var _triggerEvent2=_interopRequireDefault(_triggerEvent);var _getCanvas=__webpack_require__(64);var _getCanvas2=_interopRequireDefault(_getCanvas);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function hasImageOrLayers(enabledElement){return enabledElement.image!==undefined||enabledElement.layers.length>0}}),(function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.default=function(enabledElement,invalidated){var image=enabledElement.image;var element=enabledElement.element;var layers=enabledElement.layers||[];if(!enabledElement.canvas||!(enabledElement.image||layers.length)){return}var start=(0,_now2.default)();image.stats={lastGetPixelDataTime:-1.0,lastStoredPixelDataToCanvasImageDataTime:-1.0,lastPutImageDataTime:-1.0,lastRenderTime:-1.0,lastLutGenerateTime:-1.0};if(layers&&layers.length){(0,_drawCompositeImage2.default)(enabledElement,invalidated)}else if(image){var render=image.render;if(!render){if(enabledElement.viewport.colormap&&enabledElement.viewport.colormap!==''&&enabledElement.image.labelmap===true){render=_renderLabelMapImage.renderLabelMapImage}else if(enabledElement.viewport.colormap&&enabledElement.viewport.colormap!==''){render=_renderPseudoColorImage.renderPseudoColorImage}else if(image.color){render=_renderColorImage.renderColorImage}else{render=_renderGrayscaleImage.renderGrayscaleImage}}render(enabledElement,invalidated)}var renderTimeInMs=(0,_now2.default)()-start;var eventData={viewport:enabledElement.viewport,element:element,image:image,enabledElement:enabledElement,canvasContext:enabledElement.canvas.getContext('2d'),renderTimeInMs:renderTimeInMs};image.stats.lastRenderTime=renderTimeInMs;enabledElement.invalid=false;enabledElement.needsRedraw=false;(0,_triggerEvent2.default)(element,'cornerstoneimagerendered',eventData)};var _now=__webpack_require__(1);var _now2=_interopRequireDefault(_now);var _drawCompositeImage=__webpack_require__(63);var _drawCompositeImage2=_interopRequireDefault(_drawCompositeImage);var _renderColorImage=__webpack_require__(8);var _renderGrayscaleImage=__webpack_require__(17);var _renderPseudoColorImage=__webpack_require__(14);var _renderLabelMapImage=__webpack_require__(10);var _triggerEvent=__webpack_require__(2);var _triggerEvent2=_interopRequireDefault(_triggerEvent);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}}),(function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.default=function(enabledElement,invalidated){var element=enabledElement.element;var allLayers=(0,_layers.getLayers)(element);var activeLayer=(0,_layers.getActiveLayer)(element);var visibleLayers=(0,_layers.getVisibleLayers)(element);var resynced=!enabledElement.lastSyncViewportsState&&enabledElement.syncViewports;enabledElement.lastSyncViewportsState=enabledElement.syncViewports;if(resynced){allLayers.forEach(function(layer){if(layer.viewport){originalViewportScale[layer.layerId]=layer.viewport.scale}})}if(enabledElement.syncViewports===true){syncViewports(visibleLayers,activeLayer)}var context=enabledElement.canvas.getContext('2d');context.setTransform(1,0,0,1,0,0);context.fillStyle='black';context.fillRect(0,0,enabledElement.canvas.width,enabledElement.canvas.height);renderLayers(context,visibleLayers,invalidated)};var _layers=__webpack_require__(25);var _renderGrayscaleImage=__webpack_require__(17);var _renderColorImage=__webpack_require__(8);var _renderPseudoColorImage=__webpack_require__(14);var _renderLabelMapImage=__webpack_require__(10);var _setToPixelCoordinateSystem=__webpack_require__(4);var _setToPixelCoordinateSystem2=_interopRequireDefault(_setToPixelCoordinateSystem);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var originalViewportScale={};function getViewportRatio(baseLayerId,targetLayerId){return originalViewportScale[targetLayerId]/originalViewportScale[baseLayerId]}function syncViewports(layers,activeLayer){layers.forEach(function(layer){if(layer===activeLayer||!layer.viewport||!activeLayer.viewport){return}if(!originalViewportScale[layer.layerId]){originalViewportScale[layer.layerId]=layer.viewport.scale}var viewportRatio=getViewportRatio(activeLayer.layerId,layer.layerId);layer.viewport.scale=activeLayer.viewport.scale*viewportRatio;layer.viewport.rotation=activeLayer.viewport.rotation;layer.viewport.translation={x:activeLayer.viewport.translation.x/viewportRatio,y:activeLayer.viewport.translation.y/viewportRatio};layer.viewport.hflip=activeLayer.viewport.hflip;layer.viewport.vflip=activeLayer.viewport.vflip})}function renderLayers(context,layers,invalidated){layers.forEach(function(layer,index){if(!layer.image){return}context.save();layer.canvas=context.canvas;(0,_setToPixelCoordinateSystem2.default)(layer,context);var colormap=layer.viewport.colormap||layer.options.colormap;var labelmap=layer.viewport.labelmap;var isInvalid=layer.invalid||invalidated;if(colormap&&colormap!==''&&labelmap===true){(0,_renderLabelMapImage.addLabelMapLayer)(layer,isInvalid)}else if(colormap&&colormap!==''){(0,_renderPseudoColorImage.addPseudoColorLayer)(layer,isInvalid)}else if(layer.image.color===true){(0,_renderColorImage.addColorLayer)(layer,isInvalid)}else{var useAlphaChannel=index===0;(0,_renderGrayscaleImage.addGrayscaleLayer)(layer,isInvalid,useAlphaChannel)}if(layer.options&&layer.options.opacity){context.globalAlpha=layer.options.opacity}else{context.globalAlpha=1}if(layer.options&&layer.options.fillStyle){context.fillStyle=layer.options.fillStyle}context.imageSmoothingEnabled=!layer.viewport.pixelReplication;context.mozImageSmoothingEnabled=context.imageSmoothingEnabled;var _layer$image=layer.image,width=_layer$image.width,height=_layer$image.height;context.drawImage(layer.canvas,0,0,width,height,0,0,width,height);context.restore();layer.invalid=false})}}),(function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.default=getCanvas;var CANVAS_CSS_CLASS='cornerstone-canvas';function createCanvas(element){var canvas=document.createElement('canvas');canvas.style.display='block';canvas.classList.add(CANVAS_CSS_CLASS);element.appendChild(canvas);return canvas}function getCanvas(element){var selector='canvas.'+CANVAS_CSS_CLASS;return element.querySelector(selector)||createCanvas(element)}}),(function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.getElementData=getElementData;exports.removeElementData=removeElementData;var _enabledElements=__webpack_require__(0);function getElementData(element,dataType){var ee=(0,_enabledElements.getEnabledElement)(element);if(ee.data.hasOwnProperty(dataType)===false){ee.data[dataType]={}}return ee.data[dataType]}function removeElementData(element,dataType){var ee=(0,_enabledElements.getEnabledElement)(element);delete ee.data[dataType]}}),(function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.default=function(element,image){var enabledElement=(0,_enabledElements.getEnabledElement)(element);return(0,_getDefaultViewport2.default)(enabledElement.canvas,image)};var _enabledElements=__webpack_require__(0);var _getDefaultViewport=__webpack_require__(3);var _getDefaultViewport2=_interopRequireDefault(_getDefaultViewport);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}}),(function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.default=function(element){var enabledElement=(0,_enabledElements.getEnabledElement)(element);return enabledElement.image};var _enabledElements=__webpack_require__(0)}),(function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.default=function(element,x,y,width,height){var storedPixels=(0,_getStoredPixels2.default)(element,x,y,width,height);var ee=(0,_enabledElements.getEnabledElement)(element);var mlutfn=(0,_getModalityLUT2.default)(ee.image.slope,ee.image.intercept,ee.viewport.modalityLUT);return storedPixels.map(mlutfn)};var _enabledElements=__webpack_require__(0);var _getStoredPixels=__webpack_require__(39);var _getStoredPixels2=_interopRequireDefault(_getStoredPixels);var _getModalityLUT=__webpack_require__(26);var _getModalityLUT2=_interopRequireDefault(_getModalityLUT);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}}),(function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.default=function(element){var enabledElement=(0,_enabledElements.getEnabledElement)(element);var viewport=enabledElement.viewport;if(viewport===undefined){return}return Object.assign({},viewport)};var _enabledElements=__webpack_require__(0)}),(function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.loadImage=loadImage;exports.loadAndCacheImage=loadAndCacheImage;exports.registerImageLoader=registerImageLoader;exports.registerUnknownImageLoader=registerUnknownImageLoader;var _imageCache=__webpack_require__(40);var _events=__webpack_require__(16);var _events2=_interopRequireDefault(_events);var _triggerEvent=__webpack_require__(2);var _triggerEvent2=_interopRequireDefault(_triggerEvent);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var imageLoaders={};var unknownImageLoader=void 0;function loadImageFromImageLoader(imageId,options){var colonIndex=imageId.indexOf(':');var scheme=imageId.substring(0,colonIndex);var loader=imageLoaders[scheme];if(loader===undefined||loader===null){if(unknownImageLoader!==undefined){return unknownImageLoader(imageId)}throw new Error('loadImageFromImageLoader: no image loader for imageId');}var imageLoadObject=loader(imageId,options);imageLoadObject.promise.then(function(image){(0,_triggerEvent2.default)(_events2.default,'cornerstoneimageloaded',{image:image})},function(error){var errorObject={imageId:imageId,error:error};(0,_triggerEvent2.default)(_events2.default,'cornerstoneimageloadfailed',errorObject)});return imageLoadObject}function loadImage(imageId,options){if(imageId===undefined){throw new Error('loadImage: parameter imageId must not be undefined');}var imageLoadObject=(0,_imageCache.getImageLoadObject)(imageId);if(imageLoadObject!==undefined){return imageLoadObject.promise}return loadImageFromImageLoader(imageId,options).promise}function loadAndCacheImage(imageId,options){if(imageId===undefined){throw new Error('loadAndCacheImage: parameter imageId must not be undefined');}var imageLoadObject=(0,_imageCache.getImageLoadObject)(imageId);if(imageLoadObject!==undefined){return imageLoadObject.promise}imageLoadObject=loadImageFromImageLoader(imageId,options);(0,_imageCache.putImageLoadObject)(imageId,imageLoadObject);return imageLoadObject.promise}function registerImageLoader(scheme,imageLoader){imageLoaders[scheme]=imageLoader}function registerUnknownImageLoader(imageLoader){var oldImageLoader=unknownImageLoader;unknownImageLoader=imageLoader;return oldImageLoader}}),(function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.default=function(element){var enabledElement=(0,_enabledElements.getEnabledElement)(element);enabledElement.invalid=true;enabledElement.needsRedraw=true;var eventData={element:element};(0,_triggerEvent2.default)(element,'cornerstoneinvalidated',eventData)};var _enabledElements=__webpack_require__(0);var _triggerEvent=__webpack_require__(2);var _triggerEvent2=_interopRequireDefault(_triggerEvent);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}}),(function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.default=function(imageId){var enabledElements=(0,_enabledElements.getEnabledElementsByImageId)(imageId);enabledElements.forEach(function(enabledElement){(0,_drawImage2.default)(enabledElement,true)})};var _enabledElements=__webpack_require__(0);var _drawImage=__webpack_require__(6);var _drawImage2=_interopRequireDefault(_drawImage);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}}),(function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.default=function(element,pageX,pageY){var enabledElement=(0,_enabledElements.getEnabledElement)(element);if(enabledElement.image===undefined){throw new Error('image has not been loaded yet');}var rect=element.getBoundingClientRect();var clientX=pageX-rect.left-window.pageXOffset;var clientY=pageY-rect.top-window.pageYOffset;var pt={x:clientX,y:clientY};var transform=(0,_getTransform2.default)(enabledElement);transform.invert();return transform.transformPoint(pt.x,pt.y)};var _enabledElements=__webpack_require__(0);var _getTransform=__webpack_require__(9);var _getTransform2=_interopRequireDefault(_getTransform);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}}),(function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.default=function(element,pt){var enabledElement=(0,_enabledElements.getEnabledElement)(element);var transform=(0,_getTransform2.default)(enabledElement);return transform.transformPoint(pt.x,pt.y)};var _enabledElements=__webpack_require__(0);var _getTransform=__webpack_require__(9);var _getTransform2=_interopRequireDefault(_getTransform);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}}),(function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.default=function(element){var enabledElement=(0,_enabledElements.getEnabledElement)(element);enabledElement.viewport=(0,_getDefaultViewport2.default)(enabledElement.canvas,enabledElement.image);(0,_updateImage2.default)(element)};var _enabledElements=__webpack_require__(0);var _getDefaultViewport=__webpack_require__(3);var _getDefaultViewport2=_interopRequireDefault(_getDefaultViewport);var _updateImage=__webpack_require__(5);var _updateImage2=_interopRequireDefault(_updateImage);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}}),(function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.default=function(element,viewport){var enabledElement=(0,_enabledElements.getEnabledElement)(element);if(enabledElement.viewport===undefined){enabledElement.viewport=(0,_getDefaultViewport2.default)(enabledElement.canvas)}if(viewport){for(var attrname in viewport){if(viewport[attrname]!==null){enabledElement.viewport[attrname]=viewport[attrname]}}}if(enabledElement.viewport.voi.windowWidth){enabledElement.viewport.voi.windowWidth=Math.max(viewport.voi.windowWidth,MIN_WINDOW_WIDTH)}if(enabledElement.viewport.scale){enabledElement.viewport.scale=Math.max(viewport.scale,MIN_VIEWPORT_SCALE)}enabledElement.viewport.rotation%=360;if(enabledElement.viewport.rotation<0){enabledElement.viewport.rotation+=360}if(enabledElement.image){(0,_updateImage2.default)(element)}};var _getDefaultViewport=__webpack_require__(3);var _getDefaultViewport2=_interopRequireDefault(_getDefaultViewport);var _enabledElements=__webpack_require__(0);var _updateImage=__webpack_require__(5);var _updateImage2=_interopRequireDefault(_updateImage);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var MIN_WINDOW_WIDTH=0.000001;var MIN_VIEWPORT_SCALE=0.0001}),(function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _renderColorImage=__webpack_require__(8);var _renderGrayscaleImage=__webpack_require__(17);var _renderWebImage=__webpack_require__(35);var _renderPseudoColorImage=__webpack_require__(14);var _renderLabelMapImage=__webpack_require__(10);exports.default={colorImage:_renderColorImage.renderColorImage,grayscaleImage:_renderGrayscaleImage.renderGrayscaleImage,webImage:_renderWebImage.renderWebImage,pseudoColorImage:_renderPseudoColorImage.renderPseudoColorImage,labelMapImage:_renderLabelMapImage.renderLabelMapImage}}),(function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.addProvider=addProvider;exports.removeProvider=removeProvider;var providers=[];function addProvider(provider){var priority=arguments.length>1&&arguments[1]!==undefined?arguments[1]:0;var i=void 0;for(i=0;i<providers.length;i++){if(providers[i].priority<=priority){break}}providers.splice(i,0,{priority:priority,provider:provider})}function removeProvider(provider){for(var i=0;i<providers.length;i++){if(providers[i].provider===provider){providers.splice(i,1);break}}}function getMetaData(type,imageId){for(var i=0;i<providers.length;i++){var result=providers[i].provider(type,imageId);if(result!==undefined){return result}}}exports.default={addProvider:addProvider,removeProvider:removeProvider,get:getMetaData}}),(function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.restoreImage=exports.convertToFalseColorImage=exports.convertImageToFalseColorImage=undefined;var _enabledElements=__webpack_require__(0);var _pixelDataToFalseColorData=__webpack_require__(41);var _pixelDataToFalseColorData2=_interopRequireDefault(_pixelDataToFalseColorData);var _colormap=__webpack_require__(28);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function getPixelValues(pixelData){var minPixelValue=Number.MAX_VALUE;var maxPixelValue=Number.MIN_VALUE;var len=pixelData.length;var pixel=void 0;for(var i=0;i<len;i++){pixel=pixelData[i];minPixelValue=minPixelValue<pixel?minPixelValue:pixel;maxPixelValue=maxPixelValue>pixel?maxPixelValue:pixel}return{minPixelValue:minPixelValue,maxPixelValue:maxPixelValue}}function getRestoreImageMethod(image){if(image.restore){return image.restore}var color=image.color;var rgba=image.rgba;var cachedLut=image.cachedLut;var slope=image.slope;var windowWidth=image.windowWidth;var windowCenter=image.windowCenter;var minPixelValue=image.minPixelValue;var maxPixelValue=image.maxPixelValue;return function(){image.color=color;image.rgba=rgba;image.cachedLut=cachedLut;image.slope=slope;image.windowWidth=windowWidth;image.windowCenter=windowCenter;image.minPixelValue=minPixelValue;image.maxPixelValue=maxPixelValue;if(image.origPixelData){var pixelData=image.origPixelData;image.getPixelData=function(){return pixelData}}image.origPixelData=undefined;image.colormapId=undefined;image.falseColor=undefined}}function ensuresColormap(colormap){if(colormap&&typeof colormap==='string'){colormap=(0,_colormap.getColormap)(colormap)}return colormap}function restoreImage(image){if(image.restore&&typeof image.restore==='function'){image.restore();return true}return false}function convertImageToFalseColorImage(image,colormap){if(image.color&&!image.falseColor){throw new Error('Color transforms are not implemented yet');}colormap=ensuresColormap(colormap);var colormapId=colormap.getId();if(image.colormapId===colormapId){return false}restoreImage(image);if(colormapId){var minPixelValue=image.minPixelValue||0;var maxPixelValue=image.maxPixelValue||255;image.restore=getRestoreImageMethod(image);var lookupTable=colormap.createLookupTable();lookupTable.setTableRange(minPixelValue,maxPixelValue);(0,_pixelDataToFalseColorData2.default)(image,lookupTable);var pixelValues=getPixelValues(image.getPixelData());image.minPixelValue=pixelValues.minPixelValue;image.maxPixelValue=pixelValues.maxPixelValue;image.windowWidth=255;image.windowCenter=128;image.colormapId=colormapId}return true}function convertToFalseColorImage(element,colormap){var enabledElement=(0,_enabledElements.getEnabledElement)(element);return convertImageToFalseColorImage(enabledElement.image,colormap)}exports.convertImageToFalseColorImage=convertImageToFalseColorImage;exports.convertToFalseColorImage=convertToFalseColorImage;exports.restoreImage=restoreImage})])});
\ No newline at end of file
